function sendOtp(a){if(checkBox)$("#tncNotify").html("Please Accept T&C To Proceed.");else{var b=/^(\+\d{1,3}[- ]?)?\d{10}$/,c=document.getElementById("phoneNo").value;if(c.match(b)){var d=new XMLHttpRequest;document.getElementById("sendOtpButton").innerHTML="Processing",document.getElementById("sendOtpButton").setAttribute("onclick",""),d.onreadystatechange=function(){4==d.readyState&&200==d.status&&(-1==d.responseText.indexOf("error")?(3==d.responseText.trim().split("%").length&&localStorage.setItem("LOGIN","1"),localStorage.setItem("PHN",document.getElementById("countryCode").placeholder+c),localStorage.setItem("OTP",d.responseText.trim().split("%")[0]),localStorage.setItem("PROID",d.responseText.trim().split("%")[1].trim()),location.href="otp.html"):($(".err-input").addClass("err"),$("#phoneNoNotify").html("Mobile Number Already Registed."),document.getElementById("sendOtpButton").innerHTML="Next",document.getElementById("sendOtpButton").setAttribute("onclick","sendOtp();")))},d.open("POST",server+"entry.php",!0);var e="phNo="+encodeURIComponent(document.getElementById("countryCode").placeholder+c);d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}else $(".err-input").addClass("err"),$("#phoneNoNotify").html("Please Enter Correct Mobile Number.")}}function checkCountry(a){localStorage.setItem("COUNTRY",$(a).find(".country-name").text()),localStorage.setItem("CODE",$(a).find(".item-note-right").text()),localStorage.setItem("SELECTEDCC","1"),location.href="login.html"}function successCallback(a){var b=a.value.split("-")[1];"1"==localStorage.getItem("SELECTEDCC")?(document.getElementById("country").setAttribute("placeholder",localStorage.getItem("COUNTRY")),document.getElementById("countryCode").setAttribute("placeholder",localStorage.getItem("CODE"))):ccGenerator(b)&&(document.getElementById("country").setAttribute("placeholder",localStorage.getItem("COUNTRY")),document.getElementById("countryCode").setAttribute("placeholder",localStorage.getItem("CODE")))}function errorCallback(a){document.getElementById("country").setAttribute("placeholder","India"),document.getElementById("countryCode").setAttribute("placeholder","+91")}function startTimer(a,b){var d,e,c=a;interval=setInterval(function(){d=parseInt(c/60,10),e=parseInt(c%60,10),d=d<10?"0"+d:d,e=e<10?"0"+e:e,b.text(d+":"+e),--c<0&&(c=a)},1e3)}function reSendOtp(a){popupOpenbtn1(),startTimer(300,$("#time")),document.getElementById("phoneNoVerify").value="";var d=localStorage.getItem("PHN"),e=localStorage.getItem("PROID"),f=new XMLHttpRequest;f.onreadystatechange=function(){4==f.readyState&&200==f.status&&" "!==f.responseText.trim()&&(console.log(f.responseText.trim()),localStorage.setItem("OTP",f.responseText.trim()),clearInterval(interval),listSMS(),startWatch())},f.open("POST",server+"reEntry.php",!0);var g="phNo="+encodeURIComponent(d)+"&id="+e;f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function initApp(){if(console.log("InitApp"),!SMS)return void console.log("SMS plugin not ready");listSMS(),startWatch(),document.addEventListener("onSMSArrive",function(a){var b=a.data;if(console.log("PostInitApp "+b),smsList.push(b),updateStatus("SMS arrived, count: "+smsList.length),-1!=b.body.indexOf("MSG")){var c=parseInt(b.body);console.log(c),verify(c)}})}function update(a,b){console.log("UPDATE "+a+":::"+b)}function updateStatus(a){console.log("UPDATESTATUS "+a)}function updateData(a){console.log("UPDATEDATA "+a)}function listSMS(){updateData(""),SMS&&SMS.listSMS({},function(a){updateStatus("sms listed as json array");var b="";if(Array.isArray(a))for(var c in a){var d=a[c];smsList.push(d),b+=d.address+": "+d.body+"<br/>"}updateData(b)},function(a){updateStatus("error list sms: "+a)})}function startWatch(){SMS&&SMS.startWatch(function(){update("watching","watching started")},function(){updateStatus("failed to start watching")})}function stopWatch(){SMS&&SMS.stopWatch(function(){update("watching","watching stopped")},function(){updateStatus("failed to stop watching")})}function sendSMS(){}function deleteLastSMS(){}function restoreAllSMS(){updateData(""),SMS&&SMS.restoreSMS(smsList,function(a){smsList.length=0,updateStatus(a+" sms messages restored")},function(a){updateStatus("error restore sms: "+a)})}function toggleIntercept(){interceptEnabled=!interceptEnabled,interceptEnabled&&(smsList.length=0),SMS&&SMS.enableIntercept(interceptEnabled,function(){},function(){}),console.log("intercept "+(interceptEnabled?"ON":"OFF")),console.log(interceptEnabled?"Disable":"Enable")}function verify(a){console.log("AUTO Veri"+a),a==localStorage.getItem("OTP")&&("1"==localStorage.getItem("LOGIN")?(loadingOn(),setTimeout(function(){window.localStorage.setItem("VALIDATED","HOME"),window.location.href="home.html"},500)):setVerified())}function verifyOtp(a){var b=/^[0-9]{6,6}$/,c=document.getElementById("phoneNoVerify").value;c.match(b)?c==localStorage.getItem("OTP")?"1"==localStorage.getItem("LOGIN")?(loadingOn(),setTimeout(function(){window.localStorage.setItem("VALIDATED","HOME"),window.location.href="home.html"},500)):setVerified():($(".err-input").addClass("err"),$(".err-notify").html("Invalid O.T.P")):($(".err-input").addClass("err"),$(".err-notify").html("6 digits required."))}function removeErr(a){$(".err-input").removeClass("err"),$(".err-notify").html("")}function setVerified(a){loadingOn();var b=localStorage.getItem("PROID"),c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(console.log(c.responseText.trim()),c.responseText.trim()&&(window.location.href="user_profile.html"))},c.open("POST",server+"setVerified.php",!0);var d="proId="+b;c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d)}function removeErrPro(a){$("#proName").css("border-bottom","1px solid #bdbdbd"),$("#proEmail").css("border-bottom","1px solid #bdbdbd"),$("#proGender").css("border-bottom","1px solid #bdbdbd"),$("#proStatus").css("border-bottom","1px solid #63b5f6"),$("#proPic").css("border","1px solid #fff"),$("#proCategory").css("border-bottom","1px solid #bdbdbd"),$(".err-notify").html("")}function getPhoto(){localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","GET"),navigator.camera.getPicture(getPhotoSuccess,getPhotoFail,{quality:60,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY})}function getPhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,document.getElementById("proPic").style.backgroundImage="url("+a+")",fileURL=a,checkURL=a,localStorage.setItem("PAGELOC",""),proPicUpdated=!0}function getPhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function takePhoto(){localStorage.setItem("PAGELOC",pageLocation),localStorage.setItem("PAGERED","TAKE"),appState.takingPicture=!0,navigator.camera.getPicture(takePhotoSuccess,takePhotoFail,{quality:60,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA})}function takePhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,document.getElementById("proPic").style.backgroundImage="url("+a+")",fileURL=a,checkURL=a,proPicUpdated=!0,localStorage.setItem("PAGELOC",""),proPicUpdated=!0}function takePhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function cleanup(){function a(){console.log("Camera cleanup success.")}function b(a){console.log("Failed because: "+a)}navigator.camera.cleanup(a,b)}function updateProfile(a){if(checkBox)$("#privacyErr").html("Please Agree To Proceed.");else{var b=/^[a-z ,.'-]+$/i,c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,d=document.getElementById("proName").value,e=d.split(" ")[0],f=d.split(" ").length>1?d.split(" ")[1]:"",g=document.getElementById("proEmail").value,h=document.getElementById("proGender").value,i=document.getElementById("proStatus").value;if(proPicUpdated)if(d.match(b))if(g.match(c))if("0"!==h)if(" "!=i&&""!==i){var j=new XMLHttpRequest;j.onreadystatechange=function(){loadingOn(),4==j.readyState&&200==j.status&&(console.log(j.responseText.trim()),j.responseText.trim()&&displayImageUpload())},j.open("POST",server+"profileDataUpdate.php",!0);var k="proFName="+e+"&proLName="+f+"&proEmail="+g+"&proGender="+h+"&proStatus="+i+"&proId="+localStorage.getItem("PROID");j.setRequestHeader("Content-type","application/x-www-form-urlencoded"),console.log(k),j.send(k)}else $("#proStatus").css("border-bottom","2px solid #000"),$("#statusErr").html("Invalid Status");else $("#proGender").css("border-bottom","2px solid #000"),$("#genderErr").html("Please Select Your Gender");else $("#proEmail").css("border-bottom","2px solid #000"),$("#emailErr").html("Invalid Email");else $("#proName").css("border-bottom","2px solid #000"),$("#nameErr").html("Invalid Name");else $("#proPic").css("border","2px solid #000"),$("#picErr").html("Select a display picture.")}}function displayImageUpload(){function f(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),loadingOff(),window.location.href="home.html"}function g(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure"),loadingOff()}console.log("in upload file:"+checkURL);var a=encodeURI(server+"displayImageUpload.php"),b=new FileUploadOptions;b.fileKey="fileUploadKey",b.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),b.mimeType="image/jpeg",b.httpMethod="POST";var c={};c.id=localStorage.getItem("PROID"),b.params=c,b.chunkedMode=!1;var d={headerParam:"headerValue"};b.headers=d;var e=new FileTransfer;e.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%"),$("#proPerc").html(b)}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},e.upload(checkURL,a,f,g,b)}function loadingOn(){var b=document.getElementById("loading");b.className=b.className.replace(" cd-popup",""),b.className=b.className+" is-visible"}function loadingOff(){var a=document.getElementById("loading"),b=a.className;a.className=a.className.replace(b,"cd-popup")}function loadingOnC(){document.getElementById("proLoader").style.display="table"}function loadingOffC(){document.getElementById("proLoader").style.display="none"}function checkOffline(a){var b="",c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(console.log("Offline:"+c.responseText.trim()),""!=c.responseText&&null!=c.responseText&&(b=JSON.parse(c.responseText.trim()),"1"==b.online?document.getElementById("onlineStatus").innerHTML="<p>Online</p>":document.getElementById("onlineStatus").innerHTML="<p>Last Seen "+formatAMPM(new Date(b.last_seen))+"</p>"))},c.open("POST",server+"checkOffline.php",!0);var d="singleChatId="+a;console.log(d),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d)}function makeOffline(){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&console.log(a.responseText.trim())},a.open("POST",server+"makeOffline.php",!0);var b="proId="+localStorage.getItem("PROID");a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(b)}function makeOnline(){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&console.log(a.responseText.trim())},a.open("POST",server+"makeOnline.php",!0);var b="proId="+localStorage.getItem("PROID");a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(b)}function formatAMPM(a){var b=new Date,c="";c=a.getDate()==b.getDate()&&a.getMonth()==b.getMonth()&&a.getFullYear()==b.getFullYear()?"":a.getDate()+" "+monArr[a.getMonth()];var d=a.getHours(),e=a.getMinutes(),f=d>=12?"pm":"am";return d%=12,d=d||12,e=e<10?"0"+e:e,d+":"+e+f+" "+c}function sqlToJsDate(a){var b=a.split(/[- :]/),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=new Date(Date.UTC(b[0],b[1]-1,b[2],b[3],b[4],b[5]));return d.getDate()+" "+c[d.getMonth()]+" "+d.getFullYear()}function checkConnection(a){var b=navigator.connection.type;console.log("Connection type: "+b),"none"==b||"NONE"==b?(0==a&&$("body").append(connErr),"index.html"==pageLocation&&clearTimeout(timerIndex)):1==a&&location.reload()}function notiGen(){scheduleMultiple()}function schedule(a,b,c,d,e){console.log("in schedule::"+a+"::"+b+"::"+c+"::"+d+"::"+e);var f="Android"==device.platform?"file://sound/close.mp3":"file://beep.caf";new Date;cordova.plugins.notification.local.schedule({id:a,title:b,text:c,at:d,sound:f,icon:"img/icon.png",data:{redirectId:e}});var h="";if(""===localStorage.getItem("NOTIFICATION")||null===localStorage.getItem("NOTIFICATION")){var i=[];h={id:a,title:b,text:c,at:d,sound:f,icon:"img/icon.png",data:{redirectId:e}},i.push(h),localStorage.setItem("NOTIFICATION",JSON.stringify(i))}else{var j=JSON.parse(localStorage.getItem("NOTIFICATION"));h={id:a,title:b,text:c,at:d,sound:f,icon:"img/icon.png",data:{redirectId:e}},j.push(h),localStorage.setItem("NOTIFICATION",JSON.stringify(j))}}function scheduleMultiple(a){var b=new Date;cordova.plugins.notification.local.schedule([{id:99,title:"First",text:"UNO Message",at:b,sound:"file://sound/close.mp3",icon:"img/icon.png"},{id:100,title:"Second",text:"DUO Message",at:b,sound:"file://sound/close.mp3",icon:"img/icon.png"}])}function mainwp(){function a(a){sendDetails(a.uri)}function b(a){"toast"==a.type&&a.jsonContent&&pushNotification.showToastNotification(successHandler,d,{Title:a.jsonContent["wp:Text1"],Subtitle:a.jsonContent["wp:Text2"],NavigationUri:a.jsonContent["wp:Param"]}),"raw"==a.type&&a.jsonContent&&alert(a.jsonContent.Body)}function c(a){alert("Json ERROR:"+a)}function d(a){alert("ERROR handler:"+a)}pushwp.register(a,d,{channelName:"PheonixPush",ecb:b,uccb:a,errcb:c})}function main(a){PushNotification.hasPermission(function(a){a.isEnabled&&console.log("isEnabled")}),push.on("registration",function(a){console.log(a.registrationId),sendDetails(a.registrationId)}),push.on("error",function(a){console.log(a.message)}),push.on("notification",function(a){alert("Message"),console.log(a.message),console.log(a.title),console.log(a.count),console.log(a.sound),console.log(a.image),console.log(a.additionalData)})}function onNotificationAPN(a){window.localStorage.setItem("push_que",a.id);a.id;if("1"==a.foreground){window.localStorage.setItem("push_que",a.id);a.id}if(event.alert&&navigator.notification.alert(event.alert),event.sound){new Media(event.sound).play()}event.badge&&pushNotification.setApplicationIconBadgeNumber(successHandler,errorHandler,event.badge)}function onNotificationGCM(a){if(alert(a.event),a.foreground){window.localStorage.setItem("push_que",a.payload.id);a.payload.id}else a.coldstart,window.localStorage.setItem("push_que",a.payload.id)}function sendDetails(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText),!1!==b.responseText.trim()||""!==b.responseText.trim()?localStorage.setItem("NOTIFICATIONID",a):console.log("NOT REGISTERED"))},b.open("GET",server+"setNotificationId.php?id="+encodeURIComponent(a)+"&type="+device.platform+"&proId="+localStorage.getItem("PROID"),!0),b.send()}function reShare(a,b){a.stopPropagation();var c=b.replace(/~/g,'"'),d=JSON.parse(c);share(a,d.from,d.id,d.type,d.genId,d.imageURL,d.userName,d.time,d.desc,d.title,d.count,d.posterId,d.posterName)}function share(a,b,c,d,e,f,g,h,i,j,k,l,m){a.stopPropagation(),localStorage.setItem("SHAREDDATA",'{"from":"'+b+'","id":"'+c+'","type":"'+d+'","genId":"'+e+'","imageURL":"'+f+'","userName":"'+g+'","time":"'+h+'","desc":"'+i+'","title":"'+j+'","count":"'+k+'","posterId":"'+l+'","posterName":"'+m+'"}');var n="";if(""===localStorage.getItem("GRPIDLIST")||null===localStorage.getItem("GRPIDLIST"))document.getElementById("groupListShare").style.display="none",$(".groups-txt").hide();else{for(var o=JSON.parse(localStorage.getItem("GRPIDLIST")),p=0;p<o.length;p++)n+='<div class="col-30" onclick="sendShareGroup(\''+o[p].id+'\')"><div class="dash-chat-img" style="background-image:url('+server+o[p].photo+')"></div><p>'+o[p].name+"</p></div>";console.log(n),document.getElementById("groupListShare").innerHTML=n}document.getElementById("shareList").style.display="block"}function hideShareListing(a){document.getElementById("shareList").style.display="none"}function openContactList(a){for(var b=JSON.parse(localStorage.getItem("CONTACTS")),c="<form name='shareForm'>",d=0,e=0;e<b.length;e++)b[e].is_user&&(console.log("X:"+b[e].system_id),2==b[e].status&&(c+='<div class="row">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+server+b[e].imageURL+')">                    </div>                </div>                <div class="col-70 col-center">                    <p class="contact-person-name">'+b[e].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i> '+b[e].phone+'</p>                </div>                <div class="col-10">                    <label class="radio-button">                        <input type="radio" name="shareRadio" value="'+b[e].system_id+'" id="rdb'+d+++'" data-system-id="'+b[e].system_id+'" >                        <div class="radio-button__checkmark"></div>                    </label>                </div>            </div>'));document.getElementById("contactListShare").innerHTML=c+"</form>",$("#listingContact").show()}function openContactListSearch(a){var b="<form name='shareForm'>",c=0;document.getElementById("contactListShare").innerHTML="";for(var d=JSON.parse(localStorage.getItem("CONTACTS")),e=0;e<d.length;e++)d[e].is_user&&-1!=d[e].name.toLowerCase().indexOf(a.value.toLowerCase())&&(b+='<div class="row">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+server+d[e].imageURL+')">                    </div>                </div>                <div class="col-70 col-center">                    <p class="contact-person-name">'+d[e].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i> '+d[e].phone+'</p>                </div>                <div class="col-10">                    <label class="radio-button">                        <input type="radio" name="shareRadio" value="'+d[e].system_id+'" id="rdb'+c+++'" data-system-id="'+d[e].system_id+'" >                        <div class="radio-button__checkmark"></div>                    </label>                </div>            </div>');document.getElementById("contactListShare").innerHTML=b+"</form>"}function hideContactListing(a){$("#listingContact").hide()}function sendShareContact(a){document.getElementById("sendShareContactButton").innerHTML="Sending...",document.getElementById("sendShareContactButton").setAttribute("onclick","");var d="";try{d=document.forms.shareForm.shareRadio.value}catch(a){document.getElementById("sendShareContactButton").innerHTML="Send",alert("Unable to select contact.")}if(console.log("Y:"+d),""!==d&&null!==d){var f=new XMLHttpRequest;f.onreadystatechange=function(){4==f.readyState&&200==f.status&&(console.log(f.responseText.trim()),1==f.responseText.trim()?openChat(d):(document.getElementById("sendShareContactButton").innerHTML="Send",document.getElementById("sendShareContactButton").setAttribute("onclick","sendShareContact()"),console.log("not uploded")))},f.open("POST",server+"chatUploadPost.php",!0);var g="proId="+localStorage.getItem("PROID")+"&chatterId="+d+"&desc="+encodeURIComponent(localStorage.getItem("SHAREDDATA"));f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}else console.log("ELSE"),$("#displayListErr").html("Select at least one user to continue.")}function sendShareGroup(a){if(confirm("Post to the group?")){var b=JSON.parse(localStorage.getItem("SHAREDDATA")),c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(console.log(c.responseText.trim()),c.responseText.trim()&&getGroupId(a))},c.open("POST",server+"uploadGroupPost.php",!0);var d="grpId="+a+"&proId="+localStorage.getItem("PROID")+"&desc="+encodeURIComponent(localStorage.getItem("SHAREDDATA"))+"&type="+b.type+"&title="+b.title;console.log(d),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d),console.log(d)}}function checkPostShare(){var a=localStorage.getItem("PROID"),b=localStorage.getItem("SINGLECHATID"),c=localStorage.getItem("POSTSHARE"),d=new XMLHttpRequest;d.onreadystatechange=function(){if(mutualExclusive=!0,4==d.readyState&&200==d.status)if(console.log(d.responseText.trim()),d.responseText.trim()){var a='<div class="row chat section">            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date)+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <p>'+localStorage.getItem("POSTSHARE")+"</p>                </div>            </div>        </div>";document.getElementById("chat").innerHTML+=a,$("html, body").scrollTop($(document).height()),mutualExclusive=!1}else console.log("error"),mutualExclusive=!1},d.open("POST",server+"sendSingleChat.php",!0);var e="proId="+a+"&chatterId="+b+"&message="+encodeURIComponent(c);d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}function showDeleteOptions(a,b){$(".celeb-post-del").hide(),$(b).siblings(".celeb-post-del").css("display","block"),a.stopPropagation()}function hideOptions(a){$(".celeb-post-del").hide(),a.stopPropagation()}function deletePost(a,b){if(console.log(b),confirm("Are you sure you want to remove this post?")){var c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(console.log(c.responseText.trim()),!1!==c.responseText.trim()?(document.getElementById("mediumExpression").innerHTML=localStorage.getItem("DATAFEED"),$("#mediumExpression").children("#user"+b).remove(),localStorage.setItem("DATAFEED",document.getElementById("mediumExpression").innerHTML),$("#user"+b).remove()):console.log("error"))},c.open("POST",server+"deletePost.php",!0);var d="postId="+b;c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d)}a.stopPropagation()}function deleteCelebPost(a,b){if(console.log(b),confirm("Are you sure you want to remove this post?")){var c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(console.log(c.responseText.trim()),!1!==c.responseText.trim()?(document.getElementById("mediumExpression").innerHTML=localStorage.getItem("DATAFEED"),$("#mediumExpression").children("#celeb"+b).remove(),localStorage.setItem("DATAFEED",document.getElementById("mediumExpression").innerHTML),$("#celeb"+b).remove()):console.log("error"))},c.open("POST",server+"deleteCelebPost.php",!0);var d="postId="+b;c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d)}a.stopPropagation()}function deleteGroupPost(a,b){if(console.log(b),confirm("Are you sure you want to remove this post?")){var c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(console.log(c.responseText.trim()),!1!==c.responseText.trim()?(document.getElementById("mediumExpression").innerHTML=localStorage.getItem("DATAFEED"),$("#mediumExpression").children("#group"+b).remove(),localStorage.setItem("DATAFEED",document.getElementById("mediumExpression").innerHTML),$("#group"+b).remove()):console.log("error"))},c.open("POST",server+"deleteGroupPost.php",!0);var d="postId="+b;c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d)}a.stopPropagation()}function notificationCounter(){var a=parseInt(document.getElementById("notificationCount").innerHTML),b=parseInt(document.getElementById("notificationCount").innerHTML),c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState&&200==c.status)if(console.log(c.responseText.trim()),c.responseText.trim()){if(data=JSON.parse(c.responseText.trim()),b=data.length,document.getElementById("notificationCount").innerHTML=b,localStorage.setItem("COUNT",b),a<b){var d=new Audio("sound/notify.mp3");d.play(),navigator.vibrate(500)}}else document.getElementById("notificationCount").innerHTML=0,localStorage.setItem("COUNT","0")},c.open("POST",server+"notificationCounter.php",!0);var d="proId="+localStorage.getItem("PROID");c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d)}function fetchNotification(){localStorage.setItem("LATESTFOLLOWCELEB",1);var a="",b="",c="",d="",e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status)if(console.log(e.responseText.trim()),e.responseText.trim()){a=JSON.parse(e.responseText.trim());for(var f=0;f<a.length;f++)if(d=1==a[f].status?"unread-notify":"","friendRequest"==a[f].notiType)b+='<div class="row notify-outer '+d+'"  onclick="setGeneratorId(\''+a[f].fromId+'\')">        <div class="col-25"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a[f].fromPhoto)+')"></div></div>        <div class="col-75 col-center"><bold>'+a[f].fromName+" </bold>"+a[f].notiDesc+'<div class="time"><i class="fa fa-clock-o"></i> '+formatAMPM(new Date(a[f].notiAt))+"</div></div>    </div>";else if("comment"==a[f].notiType){if("user"==a[f].detail.src)c="setPostId('"+a[f].detail.id+"','"+a[f].detail.type+"','"+a[f].detail.genId+"','"+a[f].detail.genPhoto+"','"+a[f].detail.genName+"','"+a[f].detail.time+"','"+a[f].detail.desc+"','"+a[f].detail.URL+"','"+a[f].detail.commentCount+"')";else if("group"==a[f].detail.src)if("shared"==a[f].detail.type){var g=a[f].detail.desc.replace(/"/g,"~");c="setGroupPostId('"+a[f].detail.id+"','"+a[f].detail.type+"','"+a[f].detail.groupId+"','"+a[f].detail.groupPhoto+"','"+a[f].detail.groupName+"','"+a[f].detail.time+"','"+g+"','"+a[f].detail.URL+"','"+a[f].detail.commentCount+"','"+a[f].detail.postedById+"','"+a[f].detail.postedByName+"')"}else c="setGroupPostId('"+a[f].detail.id+"','"+a[f].detail.type+"','"+a[f].detail.groupId+"','"+a[f].detail.groupPhoto+"','"+a[f].detail.groupName+"','"+a[f].detail.time+"','"+a[f].detail.desc+"','"+a[f].detail.URL+"','"+a[f].detail.commentCount+"','"+a[f].detail.postedById+"','"+a[f].detail.postedByName+"')";else"celeb"==a[f].detail.src&&(c="setCelebPostId('"+a[f].detail.id+"','"+a[f].detail.type+"','"+a[f].detail.celebId+"','"+a[f].detail.celebPhoto+"','"+a[f].detail.celebName+"','"+a[f].detail.time+"','"+a[f].detail.desc+"','"+a[f].detail.URL+"','"+a[f].detail.commentCount+"')");b+='<div class="row notify-outer '+d+'" onclick="'+c+'">        <div class="col-25"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a[f].fromPhoto)+')"></div></div>        <div class="col-75 col-center"><bold>'+a[f].fromName+" </bold>"+a[f].notiDesc+'<div class="time"><i class="fa fa-clock-o"></i> '+formatAMPM(new Date(a[f].notiAt))+"</div></div>    </div>"}else"create"==a[f].notiType&&(b+='<div class="row notify-outer '+d+'"  onclick="getGroupId(\''+a[f].grpId+'\')">        <div class="col-25"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a[f].fromPhoto)+')"></div></div>        <div class="col-75 col-center"><bold>'+a[f].fromName+" </bold>"+a[f].notiDesc+'<div class="time"><i class="fa fa-clock-o"></i> '+formatAMPM(new Date(a[f].notiAt))+"</div></div>    </div>");document.getElementById("notifyList").innerHTML=b,setTimeout(function(){$(".notify-outer").removeClass("unread-notify")},3e3)}else console.log("error")},e.open("POST",server+"fetchNotification.php",!0);var f="proId="+localStorage.getItem("PROID");e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}function toggleNotifyLoader(){newLoaderOn(),offsetNotify+=10,fetchNextNotification(offsetNotify)}function fetchNextNotification(a){var b="",c="",d="",e="",f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)if(console.log(f.responseText.trim()),f.responseText.trim()&&""!==f.responseText.trim()){b=JSON.parse(f.responseText.trim());for(var a=0;a<b.length;a++)if(e=1==b[a].status?"unread-notify":"","friendRequest"==b[a].notiType)c+='<div class="row notify-outer '+e+'"  onclick="setGeneratorId(\''+b[a].fromId+'\')">        <div class="col-25"><div class="dash-chat-img" style="background-image:url('+server+getThumb(b[a].fromPhoto)+')"></div></div>        <div class="col-75 col-center"><bold>'+b[a].fromName+" </bold>"+b[a].notiDesc+'<div class="time"><i class="fa fa-clock-o"></i> '+formatAMPM(new Date(b[a].notiAt))+"</div></div>    </div>";else if("comment"==b[a].notiType){if("user"==b[a].detail.src)d="setPostId('"+b[a].detail.id+"','"+b[a].detail.type+"','"+b[a].detail.genId+"','"+b[a].detail.genPhoto+"','"+b[a].detail.genName+"','"+b[a].detail.time+"','"+b[a].detail.desc+"','"+b[a].detail.URL+"','"+b[a].detail.commentCount+"')";else if("group"==b[a].detail.src)if("shared"==b[a].detail.type){var g=b[a].detail.desc.replace(/"/g,"~");d="setGroupPostId('"+b[a].detail.id+"','"+b[a].detail.type+"','"+b[a].detail.groupId+"','"+b[a].detail.groupPhoto+"','"+b[a].detail.groupName+"','"+b[a].detail.time+"','"+g+"','"+b[a].detail.URL+"','"+b[a].detail.commentCount+"','"+b[a].detail.postedById+"','"+b[a].detail.postedByName+"')"}else d="setGroupPostId('"+b[a].detail.id+"','"+b[a].detail.type+"','"+b[a].detail.groupId+"','"+b[a].detail.groupPhoto+"','"+b[a].detail.groupName+"','"+b[a].detail.time+"','"+b[a].detail.desc+"','"+b[a].detail.URL+"','"+b[a].detail.commentCount+"','"+b[a].detail.postedById+"','"+b[a].detail.postedByName+"')";else"celeb"==b[a].detail.src&&(d="setCelebPostId('"+b[a].detail.id+"','"+b[a].detail.type+"','"+b[a].detail.celebId+"','"+b[a].detail.celebPhoto+"','"+b[a].detail.celebName+"','"+b[a].detail.time+"','"+b[a].detail.desc+"','"+b[a].detail.URL+"','"+b[a].detail.commentCount+"')");c+='<div class="row notify-outer '+e+'" onclick="'+d+'">        <div class="col-25"><div class="dash-chat-img" style="background-image:url('+server+getThumb(b[a].fromPhoto)+')"></div></div>        <div class="col-75 col-center"><bold>'+b[a].fromName+" </bold>"+b[a].notiDesc+'<div class="time"><i class="fa fa-clock-o"></i> '+formatAMPM(new Date(b[a].notiAt))+"</div></div>    </div>"}else"create"==b[a].notiType&&(c+='<div class="row notify-outer '+e+'"  onclick="getGroupId(\''+b[a].grpId+'\')">        <div class="col-25"><div class="dash-chat-img" style="background-image:url('+server+getThumb(b[a].fromPhoto)+')"></div></div>        <div class="col-75 col-center"><bold>'+b[a].fromName+" </bold>"+b[a].notiDesc+'<div class="time"><i class="fa fa-clock-o"></i> '+formatAMPM(new Date(b[a].notiAt))+"</div></div>    </div>");document.getElementById("notifyList").innerHTML+=c,newLoaderOff(),setTimeout(function(){$(".notify-outer").removeClass("unread-notify")},3e3)}else document.getElementById("loadMore").innerHTML="No More Notifications",console.log("no more post"),newLoaderOff()},f.open("POST",server+"fetchNextNotification.php",!0);var g="proId="+localStorage.getItem("PROID")+"&offset="+a;console.log(g),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function newLoaderOn(){document.getElementById("loadMore").style.display="none",document.getElementById("postLoader").style.display="block"}function newLoaderOff(){document.getElementById("postLoader").style.display="none",document.getElementById("loadMore").style.display="block"}function DownloadFile(a,b,c){}function download(a,b){confirm("Are you sure you want to download content?")&&(assetURL=encodeURI(a),folderName=b,fileName=date.yyyymmdd()+"_"+Math.floor(89999*Math.random()+1e4),ext=assetURL.substr(assetURL.lastIndexOf(".")+1),store=cordova.file.externalRootDirectory,window.resolveLocalFileSystemURL(store+folderName+fileName+"."+ext,alterDownload,downloadAsset))}function downloadAsset(a){console.log("In DownloadAsset"),$("#popupNotificationText").html("<p> File Downloading Started... </p>"),$("#popupNotification").fadeIn("fast"),$("#popupNotification").fadeOut(2500);var b=new FileTransfer;console.log("About to start transfer"),b.download(assetURL,store+folderName+"/"+fileName+"."+ext,function(a){function b(b){console.log("extension: "+b.extension+"\ncanBeOpen: "+b.canBeOpen),b.canBeOpen?window.cordova.plugins.FileOpener.openFile(a.toURL(),c,d):alert("Phone Doesn't Have The Required Software.")}function c(a){console.log("message: "+a.message)}function d(a){console.log("message: "+a.message)}$("#popupNotificationText").html("<p> File Downloaded To /MSG... </p>"),$("#popupNotification").fadeIn("fast"),$("#popupNotification").fadeOut(2500),console.log("asset download complete: "+a.fullPath+":"+a.toURL()),window.cordova.plugins.FileOpener.canOpenFile(a.toURL(),b,d)},function(a){console.log("Error"),console.dir(a)})}function alterDownload(){function a(a){function c(a){console.log("Directory created"+a)}function d(a){console.log("Unable to create new directory: "+a.code)}console.log("file system open: "+a.name);var b=a.root;console.log("directoryEntry:::"+b),b.getDirectory(folderName,{create:!0,exclusive:!1},c,d);var e=a.root,f=e.fullPath;f="file:///storage/sdcard0/"+folderName+"/"+fileName+"."+ext,filetransfer(f)}function b(a){console.log(a.target.error.code)}console.log("In AlterDownload "),window.requestFileSystem(LocalFileSystem.PERSISTENT,0,a,b)}function filetransfer(a){$("#popupNotificationText").html("<p> File Downloading Started... </p>"),$("#popupNotification").fadeIn("fast"),$("#popupNotification").fadeOut(2500),(new FileTransfer).download(assetURL,a,function(a){$("#popupNotificationText").html("<p> File Downloaded... </p>"),$("#popupNotification").fadeIn("fast"),$("#popupNotification").fadeOut(2500),console.log("alter download complete: "+a.fullPath)},function(a){console.log("download error source "+a.source),console.log("download error target "+a.target),console.log("upload error code"+a.code)})}function loadOn(a){document.getElementsByClassName("cus")[0].style.display="block"}function loadOff(){document.getElementsByClassName("cus")[0].style.display="none"}function convert(){console.log("IN Convert");var a=document.getElementById("proText").value,b=emojione.unicodeToImage(a);document.getElementById("proText").value=b,console.log(b)}function uploadText(a){var b=document.getElementById("proText").value;if(""!==b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&c.responseText.trim()&&(closePopup(),dataFeedRefreshPrevious(),removeJunk())},c.open("POST",server+"uploadText.php",!0);var d="proText="+b+"&proId="+localStorage.getItem("PROID");c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d)}else console.log("Status Not Updated.")}function postTakeVideo(a){var b=function(a){var b,c,d;for(b=0,d=a.length;b<d;b+=1)c=a[b].fullPath,checkURL=c,document.getElementById("videoImage").src=c,popupVideo()},c=function(a){navigator.notification.console.log("Error code: "+a.code,null,"Capture Error")};navigator.device.capture.captureVideo(b,c,{limit:1,quality:0})}function postGetVideo(a){function b(a){checkURL=a,document.getElementById("videoImage").src=a,closepopupplain1(),popupVideo()}function c(a){console.log("Failed because: "+a)}console.log("get vid"),navigator.camera.getPicture(b,c,{quality:50,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.VIDEO,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function uploadVideo(){function f(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("videoDesc").value="",closePopup(),dataFeedRefreshPrevious(),removeJunk()}function g(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}console.log("in upload video:"+checkURL);var a=encodeURI(server+"uploadVideo.php?proId="+localStorage.getItem("PROID")+"&desc="+document.getElementById("videoDesc").value),b=new FileUploadOptions;b.fileKey="file",b.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),b.mimeType="video/3gpp",b.httpMethod="POST";var c={};c.proId=localStorage.getItem("PROID"),c.desc=document.getElementById("videoDesc").value,b.params=c,b.chunkedMode=!1;var d={headerParam:"headerValue"};b.headers=d;var e=new FileTransfer;e.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},e.upload(checkURL,a,f,g,b)}function postTakeAudio(a){pendingAudio=!0;var b=function(a){var b,c,d;for(b=0,d=a.length;b<d;b+=1)c=a[b].fullPath,checkURL=c,document.getElementById("audioImage").src="img/icons/audio.svg",popupAudio()},c=function(a){alert("Sorry! Your phone dosen't support this functionality."),console.log("Error code: "+a,null,"Capture Error")};navigator.device.capture.captureAudio(b,c,{limit:1})}function postGetAudio(a){function b(a){checkURL=a;var b=checkURL.substr(checkURL.lastIndexOf(".")+1);"wav"==b||"amr"==b||"mp3"==b?(document.getElementById("audioImage").src=a,popupAudio()):alert("Audio File Format Not Supported."),closepopupplain2()}function c(a){console.log("Failed because: "+a)}navigator.camera.getPicture(b,c,{quality:100,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.ALLMEDIA,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function uploadAudio(){function f(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("audioDesc").value="",closePopup(),dataFeedRefreshPrevious(),removeJunk()}function g(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}pendingAudio=!1,console.log("in upload audio:"+checkURL);var a=encodeURI(server+"uploadAudio.php"),b=new FileUploadOptions;b.fileKey="file",b.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),b.mimeType="audio/wav",b.httpMethod="POST";var c={};c.proId=localStorage.getItem("PROID"),c.desc=document.getElementById("audioDesc").value,b.params=c,b.chunkedMode=!1;var d={headerParam:"headerValue"};b.headers=d;var e=new FileTransfer;e.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},e.upload(checkURL,a,f,g,b)}function postTakePhoto(a){removeJunk(),localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","TAKE"),console.log("in postTakePhoto"),navigator.camera.getPicture(postTakePhotoSuccess,postTakePhotoFail,{quality:60,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA})}function postTakePhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,checkURL=a,document.getElementById("photoImage").style.backgroundImage="url("+a+")",popupPhoto(),localStorage.setItem("PAGELOC","")}function postTakePhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function postGetPhoto(a){removeJunk(),localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","GET"),console.log("get pic"),navigator.camera.getPicture(postGetPhotoSuccess,postGetPhotoFail,{quality:60,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY})}function postGetPhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,checkURL=a,document.getElementById("photoImage").style.backgroundImage="url("+a+")",closepopupplain(),popupPhoto(),localStorage.setItem("PAGELOC","")}function postGetPhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function uploadPhoto(){function f(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("photoDesc").value="",closePopup(),dataFeedRefreshPrevious(),removeJunk()}function g(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}console.log("in upload image:"+checkURL);var a=encodeURI(server+"uploadPhoto.php"),b=new FileUploadOptions;b.fileKey="file",b.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),b.mimeType="image/jpeg",b.httpMethod="POST";var c={};c.proId=localStorage.getItem("PROID"),c.desc=document.getElementById("photoDesc").value,b.params=c,b.chunkedMode=!1;var d={headerParam:"headerValue"};b.headers=d;var e=new FileTransfer;e.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},e.upload(checkURL,a,f,g,b)}function postGetFile(a){function b(a){checkURL=a;var b=!1,c=checkURL.substr(checkURL.lastIndexOf(".")+1),d=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var e in d)e==c&&(console.log("File: "+e),document.getElementById("fileImage").style.backgroundImage="url(img/attach_icons/"+d[e]+")",b=!0,popupFile());b||alert("Sorry, File Not Supported.")}function c(a){console.log("Failed because: "+a)}console.log("get file"),navigator.camera.getPicture(b,c,{quality:50,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.ALLMEDIA,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function uploadFile(){function k(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("fileDesc").value="",closePopup(),dataFeedRefreshPrevious(),removeJunk()}function l(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}console.log("in upload file:"+checkURL);var a=checkURL.substr(checkURL.lastIndexOf(".")+1);console.log("extenstion:"+a);var b=JSON.parse('{"pdf":"application/pdf" , "txt":"text/plain" , "doc":"application/msword" , "docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document" , "ppt":"application/vnd.ms-powerpointtd>" , "pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation" , "xls":"application/vnd.ms-excel" , "xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}'),c=!1,d="";for(var e in b)e==a&&(console.log("File: "+e),c=!0,d=b[e]);if(c){console.log(d);var f=encodeURI(server+"uploadFile.php?proId="+localStorage.getItem("PROID")+"&desc="+document.getElementById("fileDesc").value+"&ext="+a),g=new FileUploadOptions;g.fileKey="file",g.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),g.mimeType=d,g.httpMethod="POST";var h={};h.proId=localStorage.getItem("PROID"),h.desc=document.getElementById("fileDesc").value,h.ext=a,g.params=h,g.chunkedMode=!1;var i={headerParam:"headerValue"};g.headers=i;var j=new FileTransfer;j.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},j.upload(checkURL,f,k,l,g)}else alert("File Not Supported.")}function popupText(a){$("#textPop").addClass("is-visible")}function popupVideo(a){$("#videoPop").addClass("is-visible")}function popupAudio(a){$("#audioPop").addClass("is-visible")}function popupPhoto(a){$("#photoPop").addClass("is-visible")}function popupFile(a){$("#filePop").addClass("is-visible")}function closePopup(a){$(".cd-popup").removeClass("is-visible")}function closeChatPopup(){$(".send-attach-outer").removeClass("send-attach-outer-visible")}function chatPopup(a){$("#"+a).addClass("send-attach-outer-visible")}function checkScroll(){for(var a=0;a<videos.length;a++){var i,j,k,b=videos[a],c=b.offsetLeft,d=b.offsetTop,e=b.offsetWidth,f=b.offsetHeight,g=c+e,h=d+f;i=Math.max(0,Math.min(e,window.pageXOffset+window.innerWidth-c,g-window.pageXOffset)),j=Math.max(0,Math.min(f,window.pageYOffset+window.innerHeight-d,h-window.pageYOffset)),k=i*j/(e*f),k>fraction?b.play():b.pause()}}function dataFeedRefresh(a){var b=localStorage.getItem("PROID"),c="",e="",f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status){console.log(f.responseText.trim());var a=JSON.parse(f.responseText.trim());localStorage.setItem("LASTCREATED",a[0].time),console.log("Latest:"+a[0].time);for(var d=0;d<a.length;d++)if("user"==a[d].format||"friend"==a[d].format){if(e=a[d].generator_id==b?'<li class="item" onclick="deletePost(event,\''+a[d].id+"')\">Delete</li>":"","photo"==a[d].type)c+='<div class="post-container" id="user'+a[d].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+a[d].generator_id+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img"  style="background-image:url('+server+getThumb(a[d].details.profile_photo_url)+')"></div></div><div class="col-55"><p>'+a[d].details.user_name+'</p></div><div class="col-30 post-time">'+formatAMPM(new Date(a[d].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del" style="display: none;">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+a[d].id+"','"+a[d].type+"','"+a[d].generator_id+"','"+a[d].details.profile_photo_url+"','"+a[d].details.user_name+"','"+a[d].time+"','"+a[d].details.photo_description+"','"+a[d].details.photo_title+"','"+a[d].details.comment_count+"')\">Share</li>"+e+'                    </ul>                </div>       </div>       </div><div class="post-desc" >'+emojione.unicodeToImage(a[d].details.photo_description)+'</div><div class="post-pic" ><img src="'+server+getThumb(a[d].details.photo_title)+'" /></div><div class="row post-comment"><div class="col-50 comment-return" onclick="setPostId(\''+a[d].id+"','"+a[d].type+"','"+a[d].generator_id+"','"+a[d].details.profile_photo_url+"','"+a[d].details.user_name+"','"+a[d].time+"','"+a[d].details.photo_description+"','"+a[d].details.photo_title+"','"+a[d].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[d].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+a[d].details.photo_title+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==a[d].type)c+='<div class="post-container" id="user'+a[d].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+a[d].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+a[d].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(a[d].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del" style="display: none;">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+a[d].id+"','"+a[d].type+"','"+a[d].generator_id+"','"+a[d].details.profile_photo_url+"','"+a[d].details.user_name+"','"+a[d].time+"','"+a[d].details.text_description+"','0','"+a[d].details.comment_count+"')\">Share</li>"+e+'                    </ul>                </div>                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(a[d].details.text_description)+'            </div>            <div class="post-comment row">                <div class="col-100 comment-return" onclick="setPostId(\''+a[d].id+"','"+a[d].type+"','"+a[d].generator_id+"','"+a[d].details.profile_photo_url+"','"+a[d].details.user_name+"','"+a[d].time+"','"+a[d].details.text_description+"','0','"+a[d].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[d].details.comment_count+" comments</div></div></div>";else if("video"==a[d].type)c+='<div class="post-container" id="user'+a[d].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+a[d].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+a[d].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(a[d].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+a[d].id+"','"+a[d].type+"','"+a[d].generator_id+"','"+a[d].details.profile_photo_url+"','"+a[d].details.user_name+"','"+a[d].time+"','"+a[d].details.video_description+"','"+a[d].details.video_title+"','"+a[d].details.comment_count+"')\">Share</li>"+e+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a[d].details.video_description)+'            </div>            <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+a[d].details.video_title+'" type="video/mp4">                </video>            </div>           <div class="row post-comment">            <div class="col-50 comment-return" onclick="setPostId(\''+a[d].id+"','"+a[d].type+"','"+a[d].generator_id+"','"+a[d].details.profile_photo_url+"','"+a[d].details.user_name+"','"+a[d].time+"','"+a[d].details.video_description+"','"+a[d].details.video_title+"','"+a[d].details.comment_count+'\')"> <i class="fa fa-comment"></i> '+a[d].details.comment_count+' comments </div>               <div class="col-50 text-right" onclick="download(\''+server+a[d].details.video_title+"','MSG/videos')\" > <i class=\"fa fa-download\"></i> </div></div></div>";else if("audio"==a[d].type)c+='<div class="post-container" id="user'+a[d].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+a[d].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+a[d].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(a[d].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+a[d].id+"','"+a[d].type+"','"+a[d].generator_id+"','"+a[d].details.profile_photo_url+"','"+a[d].details.user_name+"','"+a[d].time+"','"+a[d].details.audio_description+"','"+a[d].details.audio_title+"','"+a[d].details.comment_count+"')\">Share</li>"+e+'                    </ul>                </div>            </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(a[d].details.audio_description)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+a[d].details.audio_title+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment">            <div class="col-50 comment-return" onclick="setPostId(\''+a[d].id+"','"+a[d].type+"','"+a[d].generator_id+"','"+a[d].details.profile_photo_url+"','"+a[d].details.user_name+"','"+a[d].time+"','"+a[d].details.audio_description+"','"+a[d].details.audio_title+"','"+a[d].details.comment_count+'\')"> <i class="fa fa-comment"></i> '+a[d].details.comment_count+' comments </div>               <div class="col-50 text-right" onclick="download(\''+server+a[d].details.audio_title+"','MSG/audios')\" > <i class=\"fa fa-download\"></i> </div></div></div>";else if("file"==a[d].type){var g="",h=a[d].details.file_title,i=h.substr(h.lastIndexOf(".")+1),j=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var k in j)k==i&&(console.log("File is: "+k),g="img/attach_icons/"+j[k]);c+='<div class="post-container" id="user'+a[d].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+a[d].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+a[d].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(a[d].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+a[d].id+"','"+a[d].type+"','"+a[d].generator_id+"','"+a[d].details.profile_photo_url+"','"+a[d].details.user_name+"','"+a[d].time+"','"+a[d].details.file_description+"','"+a[d].details.file_title+"','"+a[d].details.comment_count+"')\">Share</li>"+e+'                    </ul>                </div>            </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a[d].details.file_description)+'            </div>             <div class="post-pic" >              <img src="'+g+'" />             </div>           <div class="row post-comment">            <div class="col-50 comment-return" onclick="setPostId(\''+a[d].id+"','"+a[d].type+"','"+a[d].generator_id+"','"+a[d].details.profile_photo_url+"','"+a[d].details.user_name+"','"+a[d].time+"','"+a[d].details.file_description+"','"+a[d].details.file_title+"','"+a[d].details.comment_count+'\')"> <i class="fa fa-comment"></i> '+a[d].details.comment_count+' comments </div>               <div class="col-50 text-right" onclick="download(\''+server+a[d].details.file_title+"','MSG/files')\" > <i class=\"fa fa-download\"></i> </div>            </div></div>"}}else if("celebrity"==a[d].format)if(e=a[d].details.applied_by==b?'<li class="item" onclick="deleteCelebPost(event,\''+a[d].id+"')\">Delete</li>":"","photo"==a[d].type)c+='<div class="post-container" id="celeb'+a[d].id+'"><div class="row post-head" onclick="setCelebId(\''+a[d].celebId+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].details.celeb_photo_url)+')"></div></div><div class="col-60"><p>'+a[d].details.celeb_name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(a[d].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+a[d].id+"','"+a[d].type+"','"+a[d].celebId+"','"+a[d].details.celeb_photo_url+"','"+a[d].details.celeb_name+"','"+a[d].time+"','"+a[d].details.photo_description+"','"+a[d].details.photo_title+"','"+a[d].details.comment_count+"')\">Share</li>"+e+'                    </ul>                </div></div></div><div class="post-desc" >'+emojione.unicodeToImage(a[d].details.photo_description)+'</div><div class="post-pic" ><img src="'+server+getThumb(a[d].details.photo_title)+'" /></div><div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+a[d].id+"','"+a[d].type+"','"+a[d].celebId+"','"+a[d].details.celeb_photo_url+"','"+a[d].details.celeb_name+"','"+a[d].time+"','"+a[d].details.photo_description+"','"+a[d].details.photo_title+"','"+a[d].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[d].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+a[d].details.photo_title+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==a[d].type)c+='<div class="post-container" id="celeb'+a[d].id+'"><div class="row post-head" onclick="setCelebId(\''+a[d].celebId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].details.celeb_photo_url)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a[d].details.celeb_name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a[d].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+a[d].id+"','"+a[d].type+"','"+a[d].celebId+"','"+a[d].details.celeb_photo_url+"','"+a[d].details.celeb_name+"','"+a[d].time+"','"+a[d].details.text_description+"','0','"+a[d].details.comment_count+"')\">Share</li>"+e+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a[d].details.text_description)+'            </div><div class="post-comment row" >                <div class="col-100 comment-return" onclick="setCelebPostId(\''+a[d].id+"','"+a[d].type+"','"+a[d].celebId+"','"+a[d].details.celeb_photo_url+"','"+a[d].details.celeb_name+"','"+a[d].time+"','"+a[d].details.text_description+"','0','"+a[d].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[d].details.comment_count+" comments</div></div></div>";else if("video"==a[d].type)c+='<div class="post-container" id="celeb'+a[d].id+'"><div class="row post-head" onclick="setCelebId(\''+a[d].celebId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].details.celeb_photo_url)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a[d].details.celeb_name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a[d].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+a[d].id+"','"+a[d].type+"','"+a[d].celebId+"','"+a[d].details.celeb_photo_url+"','"+a[d].details.celeb_name+"','"+a[d].time+"','"+a[d].details.video_description+"','"+a[d].details.video_title+"','"+a[d].details.comment_count+"')\">Share</li>"+e+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a[d].details.video_description)+'            </div>            <div class="post-video">                <video  controls preload="auto"  loop>                    <source src="'+server+a[d].details.video_title+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+a[d].id+"','"+a[d].type+"','"+a[d].celebId+"','"+a[d].details.celeb_photo_url+"','"+a[d].details.celeb_name+"','"+a[d].time+"','"+a[d].details.video_description+"','"+a[d].details.video_title+"','"+a[d].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[d].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+a[d].details.video_title+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("audio"==a[d].type)c+='<div class="post-container" id="celeb'+a[d].id+'"><div class="row post-head" onclick="setCelebId(\''+a[d].celebId+'\')" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].details.celeb_photo_url)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a[d].details.celeb_name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a[d].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+a[d].id+"','"+a[d].type+"','"+a[d].celebId+"','"+a[d].details.celeb_photo_url+"','"+a[d].details.celeb_name+"','"+a[d].time+"','"+a[d].details.audio_description+"','"+a[d].details.audio_title+"','"+a[d].details.comment_count+"')\">Share</li>"+e+'                    </ul>                </div>                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(a[d].details.audio_description)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+a[d].details.audio_title+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+a[d].id+"','"+a[d].type+"','"+a[d].celebId+"','"+a[d].details.celeb_photo_url+"','"+a[d].details.celeb_name+"','"+a[d].time+"','"+a[d].details.audio_description+"','"+a[d].details.audio_title+"','"+a[d].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[d].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+a[d].details.audio_title+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("file"==a[d].type){var l="",m=a[d].details.file_title,n=m.substr(m.lastIndexOf(".")+1),o=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var p in o)p==n&&(console.log("File is: "+p),l="img/attach_icons/"+o[p]);c+='<div class="post-container" id="celeb'+a[d].id+'"><div class="row post-head" onclick="setCelebId(\''+a[d].celebId+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].details.celeb_photo_url)+')"></div></div><div class="col-60"><p>'+a[d].details.celeb_name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(a[d].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+a[d].id+"','"+a[d].type+"','"+a[d].celebId+"','"+a[d].details.celeb_photo_url+"','"+a[d].details.celeb_name+"','"+a[d].time+"','"+a[d].details.file_description+"','"+a[d].details.file_title+"','"+a[d].details.comment_count+"')\">Share</li>"+e+'                    </ul>                </div></div></div><div class="post-desc" >'+emojione.unicodeToImage(a[d].details.file_description)+'</div><div class="post-pic" ><img src="'+l+'" /></div><div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+a[d].id+"','"+a[d].type+"','"+a[d].celebId+"','"+a[d].details.celeb_photo_url+"','"+a[d].details.celeb_name+"','"+a[d].time+"','"+a[d].details.file_description+"','"+a[d].details.file_title+"','"+a[d].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[d].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+a[d].details.file_title+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div></div></div>"}localStorage.setItem("DATAFEED",c),megaLoad4=!0,console.log("4-megaLoad:"+megaLoad4),firstCall&&(console.log("firstCall"),dataFeedRefreshPopulate())}},f.open("POST",server+"dataFeed.php",!0);var g="proId="+localStorage.getItem("PROID");f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function dataFeedRefreshPopulate(a){if(console.log("dataFeedRefreshPopulate"),document.getElementById("dataFeed").innerHTML=localStorage.getItem("DATAFEED"),""!==localStorage.getItem("POSTCOMMENTCOUNT")&&null!==localStorage.getItem("POSTCOMMENTCOUNT")){var b=localStorage.getItem("POSTCOMMENTCOUNT").split(",");console.log(b[0]+":::"+b[1]),$("#user"+b[0]).children(".post-comment").children(".comment-return").html('<i class="fa fa-comment">  '+b[1]+" comments</i>"),localStorage.setItem("POSTCOMMENTCOUNT","")}else if(""!==localStorage.getItem("GROUPCOMMENTCOUNT")&&null!==localStorage.getItem("GROUPCOMMENTCOUNT")){var c=localStorage.getItem("GROUPCOMMENTCOUNT").split(",");console.log(c[0]+":::"+c[1]),$("#group"+c[0]).children(".post-comment").children(".comment-return").html('<i class="fa fa-comment">  '+c[1]+" comments</i>"),localStorage.setItem("GROUPCOMMENTCOUNT","")}else if(""!==localStorage.getItem("CELEBCOMMENTCOUNT")&&null!==localStorage.getItem("CELEBCOMMENTCOUNT")){var d=localStorage.getItem("CELEBCOMMENTCOUNT").split(",");console.log(d[0]+":::"+d[1]),$("#celeb"+d[0]).children(".post-comment").children(".comment-return").html('<i class="fa fa-comment">  '+d[1]+" comments</i>"),localStorage.setItem("CELEBCOMMENTCOUNT","")}setTimeout(function(){myScroll.refresh()},1e3),setTimeout(function(){$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3),document.getElementById("cardLoader").style.display="none",document.getElementById("wrapper").style.display="block"}function toggleHomeLoader(a){document.getElementById("loadMore").style.display="none",document.getElementById("proLoader").style.display="block",offsetHome+=10,dataFeedRefreshNext(offsetHome)}function toggleHomeLoaderPrevious(a){document.getElementById("loadNew").style.display="none",document.getElementById("proLoaderNew").style.display="block",dataFeedRefreshPrevious()}function dataFeedRefreshNext(a){var b=localStorage.getItem("PROID"),c="",d="",f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status){console.log(f.responseText.trim()),localStorage.setItem("FEED",f.responseText.trim());var a=JSON.parse(f.responseText.trim());if(0!==a.length){for(var e=0;e<a.length;e++)if("user"==a[e].format||"friend"==a[e].format){if(c=a[e].generator_id==b?'<li class="item" onclick="deletePost(event,\''+a[e].id+"')\">Delete</li>":"","photo"==a[e].type)d+='<div class="post-container" id="user'+a[e].id+'"><div class="row post-head"  onclick="setGeneratorId(event,\''+a[e].generator_id+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img"  style="background-image:url('+server+getThumb(a[e].details.profile_photo_url)+')"></div></div><div class="col-55"><p>'+a[e].details.user_name+'</p></div><div class="col-30 post-time">'+formatAMPM(new Date(a[e].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+a[e].id+"','"+a[e].type+"','"+a[e].generator_id+"','"+a[e].details.profile_photo_url+"','"+a[e].details.user_name+"','"+a[e].time+"','"+a[e].details.photo_description+"','"+a[e].details.photo_title+"','"+a[e].details.comment_count+"')\">Share</li>"+c+'                    </ul>                </div>       </div>       </div><div class="post-desc" >'+emojione.unicodeToImage(a[e].details.photo_description)+'</div><div class="post-pic" ><img src="'+server+getThumb(a[e].details.photo_title)+'" /></div><div class="row post-comment"><div class="col-50 comment-return" onclick="setPostId(\''+a[e].id+"','"+a[e].type+"','"+a[e].generator_id+"','"+a[e].details.profile_photo_url+"','"+a[e].details.user_name+"','"+a[e].time+"','"+a[e].details.photo_description+"','"+a[e].details.photo_title+"','"+a[e].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[e].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+a[e].details.photo_title+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==a[e].type)d+='<div class="post-container" id="user'+a[e].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+a[e].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[e].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+a[e].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(a[e].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+a[e].id+"','"+a[e].type+"','"+a[e].generator_id+"','"+a[e].details.profile_photo_url+"','"+a[e].details.user_name+"','"+a[e].time+"','"+a[e].details.text_description+"','0','"+a[e].details.comment_count+"')\">Share</li>"+c+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a[e].details.text_description)+'            </div>            <div class="post-comment row" >                <div class="col-100 comment-return" onclick="setPostId(\''+a[e].id+"','"+a[e].type+"','"+a[e].generator_id+"','"+a[e].details.profile_photo_url+"','"+a[e].details.user_name+"','"+a[e].time+"','"+a[e].details.text_description+"','0','"+a[e].details.comment_count+'\')" ><i class="fa fa-comment"></i> '+a[e].details.comment_count+" comments</div></div></div>";else if("video"==a[e].type)d+='<div class="post-container" id="user'+a[e].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+a[e].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[e].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+a[e].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(a[e].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+a[e].id+"','"+a[e].type+"','"+a[e].generator_id+"','"+a[e].details.profile_photo_url+"','"+a[e].details.user_name+"','"+a[e].time+"','"+a[e].details.video_description+"','"+a[e].details.video_title+"','"+a[e].details.comment_count+"')\">Share</li>"+c+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a[e].details.video_description)+'            </div>            <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+a[e].details.video_title+'" type="video/mp4">                </video>            </div>           <div class="row post-comment">            <div class="col-50 comment-return" onclick="setPostId(\''+a[e].id+"','"+a[e].type+"','"+a[e].generator_id+"','"+a[e].details.profile_photo_url+"','"+a[e].details.user_name+"','"+a[e].time+"','"+a[e].details.video_description+"','"+a[e].details.video_title+"','"+a[e].details.comment_count+'\')"> <i class="fa fa-comment"></i> '+a[e].details.comment_count+' comments </div>               <div class="col-50 text-right" onclick="download(\''+server+a[e].details.video_title+"','MSG/videos')\" > <i class=\"fa fa-download\"></i> </div></div></div>";else if("audio"==a[e].type)d+='<div class="post-container" id="user'+a[e].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+a[e].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[e].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+a[e].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(a[e].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+a[e].id+"','"+a[e].type+"','"+a[e].generator_id+"','"+a[e].details.profile_photo_url+"','"+a[e].details.user_name+"','"+a[e].time+"','"+a[e].details.audio_description+"','"+a[e].details.audio_title+"','"+a[e].details.comment_count+"')\">Share</li>"+c+'                    </ul>                </div>            </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(a[e].details.audio_description)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+a[e].details.audio_title+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment">            <div class="col-50 comment-return" onclick="setPostId(\''+a[e].id+"','"+a[e].type+"','"+a[e].generator_id+"','"+a[e].details.profile_photo_url+"','"+a[e].details.user_name+"','"+a[e].time+"','"+a[e].details.audio_description+"','"+a[e].details.audio_title+"','"+a[e].details.comment_count+'\')"> <i class="fa fa-comment"></i> '+a[e].details.comment_count+' comments </div>               <div class="col-50 text-right" onclick="download(\''+server+a[e].details.audio_title+"','MSG/audios')\" > <i class=\"fa fa-download\"></i> </div></div></div>";else if("file"==a[e].type){var g="",h=a[e].details.file_title,i=h.substr(h.lastIndexOf(".")+1),j=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var k in j)k==i&&(console.log("File is: "+k),g="img/attach_icons/"+j[k]);d+='<div class="post-container" id="user'+a[e].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+a[e].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[e].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+a[e].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(a[e].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+a[e].id+"','"+a[e].type+"','"+a[e].generator_id+"','"+a[e].details.profile_photo_url+"','"+a[e].details.user_name+"','"+a[e].time+"','"+a[e].details.file_description+"','"+a[e].details.file_title+"','"+a[e].details.comment_count+"')\">Share</li>"+c+'                    </ul>                </div>            </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a[e].details.file_description)+'            </div>             <div class="post-pic" >              <img src="'+g+'" />             </div>           <div class="row post-comment">            <div class="col-50 comment-return" onclick="setPostId(\''+a[e].id+"','"+a[e].type+"','"+a[e].generator_id+"','"+a[e].details.profile_photo_url+"','"+a[e].details.user_name+"','"+a[e].time+"','"+a[e].details.file_description+"','"+a[e].details.file_title+"','"+a[e].details.comment_count+'\')"> <i class="fa fa-comment"></i> '+a[e].details.comment_count+' comments </div>               <div class="col-50 text-right" onclick="download(\''+server+a[e].details.file_title+"','MSG/files')\" > <i class=\"fa fa-download\"></i> </div>            </div></div>"}}else if("celebrity"==a[e].format)if(c=a[e].details.applied_by==b?'<li class="item" onclick="deletePost(event,\''+a[e].id+"')\">Delete</li>":"","photo"==a[e].type)d+='<div class="post-container" id="celeb'+a[e].id+'"><div class="row post-head" onclick="setCelebId(\''+a[e].celebId+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a[e].details.celeb_photo_url)+')"></div></div><div class="col-60"><p>'+a[e].details.celeb_name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(a[e].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+a[e].id+"','"+a[e].type+"','"+a[e].celebId+"','"+a[e].details.celeb_photo_url+"','"+a[e].details.celeb_name+"','"+a[e].time+"','"+a[e].details.photo_description+"','"+a[e].details.photo_title+"','"+a[e].details.comment_count+"')\">Share</li>"+c+'                    </ul>                </div></div></div><div class="post-desc" >'+emojione.unicodeToImage(a[e].details.photo_description)+'</div><div class="post-pic" ><img src="'+server+getThumb(a[e].details.photo_title)+'" /></div><div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+a[e].id+"','"+a[e].type+"','"+a[e].celebId+"','"+a[e].details.celeb_photo_url+"','"+a[e].details.celeb_name+"','"+a[e].time+"','"+a[e].details.photo_description+"','"+a[e].details.photo_title+"','"+a[e].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[e].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+a[e].details.photo_title+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==a[e].type)d+='<div class="post-container" id="celeb'+a[e].id+'"><div class="row post-head" onclick="setCelebId(\''+a[e].celebId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[e].details.celeb_photo_url)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a[e].details.celeb_name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a[e].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+a[e].id+"','"+a[e].type+"','"+a[e].celebId+"','"+a[e].details.celeb_photo_url+"','"+a[e].details.celeb_name+"','"+a[e].time+"','"+a[e].details.text_description+"','0','"+a[e].details.comment_count+"')\">Share</li>"+c+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a[e].details.text_description)+'            </div><div class="post-comment row" >                <div class="col-100 comment-return" onclick="setCelebPostId(\''+a[e].id+"','"+a[e].type+"','"+a[e].celebId+"','"+a[e].details.celeb_photo_url+"','"+a[e].details.celeb_name+"','"+a[e].time+"','"+a[e].details.text_description+"','0','"+a[e].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[e].details.comment_count+" comments</div></div></div>";else if("video"==a[e].type)d+='<div class="post-container" id="celeb'+a[e].id+'"><div class="row post-head" onclick="setCelebId(\''+a[e].celebId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[e].details.celeb_photo_url)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a[e].details.celeb_name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a[e].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+a[e].id+"','"+a[e].type+"','"+a[e].celebId+"','"+a[e].details.celeb_photo_url+"','"+a[e].details.celeb_name+"','"+a[e].time+"','"+a[e].details.video_description+"','"+a[e].details.video_title+"','"+a[e].details.comment_count+"')\">Share</li>"+c+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a[e].details.video_description)+'            </div>            <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+a[e].details.video_title+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+a[e].id+"','"+a[e].type+"','"+a[e].celebId+"','"+a[e].details.celeb_photo_url+"','"+a[e].details.celeb_name+"','"+a[e].time+"','"+a[e].details.video_description+"','"+a[e].details.video_title+"','"+a[e].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[e].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+a[e].details.video_title+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("audio"==a[e].type)d+='<div class="post-container" id="celeb'+a[e].id+'"><div class="row post-head" onclick="setCelebId(\''+a[e].celebId+'\')" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[e].details.celeb_photo_url)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a[e].details.celeb_name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a[e].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+a[e].id+"','"+a[e].type+"','"+a[e].celebId+"','"+a[e].details.celeb_photo_url+"','"+a[e].details.celeb_name+"','"+a[e].time+"','"+a[e].details.audio_description+"','"+a[e].details.audio_title+"','"+a[e].details.comment_count+"')\">Share</li>"+c+'                    </ul>                </div>                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(a[e].details.audio_description)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+a[e].details.audio_title+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+a[e].id+"','"+a[e].type+"','"+a[e].celebId+"','"+a[e].details.celeb_photo_url+"','"+a[e].details.celeb_name+"','"+a[e].time+"','"+a[e].details.audio_description+"','"+a[e].details.audio_title+"','"+a[e].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[e].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+a[e].details.audio_title+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("file"==a[e].type){var l="",m=a[e].details.file_title,n=m.substr(m.lastIndexOf(".")+1),o=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var p in o)p==n&&(console.log("File is: "+p),l="img/attach_icons/"+o[p]);d+='<div class="post-container" id="celeb'+a[e].id+'"><div class="row post-head" onclick="setCelebId(\''+a[e].celebId+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a[e].details.celeb_photo_url)+')"></div></div><div class="col-60"><p>'+a[e].details.celeb_name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(a[e].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+a[e].id+"','"+a[e].type+"','"+a[e].celebId+"','"+a[e].details.celeb_photo_url+"','"+a[e].details.celeb_name+"','"+a[e].time+"','"+a[e].details.file_description+"','"+a[e].details.file_title+"','"+a[e].details.comment_count+"')\">Share</li>"+c+'                    </ul>                </div></div></div><div class="post-desc" >'+emojione.unicodeToImage(a[e].details.file_description)+'</div><div class="post-pic" ><img src="'+l+'" /></div><div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+a[e].id+"','"+a[e].type+"','"+a[e].celebId+"','"+a[e].details.celeb_photo_url+"','"+a[e].details.celeb_name+"','"+a[e].time+"','"+a[e].details.file_description+"','"+a[e].details.file_title+"','"+a[e].details.comment_count+'\')"><i class="fa fa-comment"></i> '+a[e].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+a[e].details.file_title+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div></div></div>"}document.getElementById("dataFeed").innerHTML+=d,$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3),setTimeout(function(){myScroll.refresh()},1e3)}else console.log("No More Post"),myScroll.refresh()}},f.open("POST",server+"dataFeedNext.php",!0);var g="proId="+localStorage.getItem("PROID")+"&offset="+a;f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),console.log(g),f.send(g)}function dataFeedRefreshPrevious(){var a=localStorage.getItem("PROID"),b="",c="",e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){console.log(e.responseText.trim()),localStorage.setItem("FEED",e.responseText.trim());var d=JSON.parse(e.responseText.trim());if(0!==d.length){localStorage.setItem("LASTCREATED",d[0].time);for(var f=0;f<d.length;f++)if("user"==d[f].format||"friend"==d[f].format){if(b=d[f].generator_id==a?'<li class="item" onclick="deletePost(event,\''+d[f].id+"')\">Delete</li>":"","photo"==d[f].type)c+='<div class="post-container" id="user'+d[f].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+d[f].generator_id+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img"  style="background-image:url('+server+getThumb(d[f].details.profile_photo_url)+')"></div></div><div class="col-55"><p>'+d[f].details.user_name+'</p></div><div class="col-30 post-time">'+formatAMPM(new Date(d[f].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+d[f].id+"','"+d[f].type+"','"+d[f].generator_id+"','"+d[f].details.profile_photo_url+"','"+d[f].details.user_name+"','"+d[f].time+"','"+d[f].details.photo_description+"','"+d[f].details.photo_title+"','"+d[f].details.comment_count+"')\">Share</li>"+b+'                    </ul>                </div>       </div>       </div><div class="post-desc" >'+emojione.unicodeToImage(d[f].details.photo_description)+'</div><div class="post-pic" ><img src="'+server+getThumb(d[f].details.photo_title)+'" /></div><div class="row post-comment"><div class="col-50 comment-return" onclick="setPostId(\''+d[f].id+"','"+d[f].type+"','"+d[f].generator_id+"','"+d[f].details.profile_photo_url+"','"+d[f].details.user_name+"','"+d[f].time+"','"+d[f].details.photo_description+"','"+d[f].details.photo_title+"','"+d[f].details.comment_count+'\')"><i class="fa fa-comment"></i> '+d[f].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[f].details.photo_title+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==d[f].type)c+='<div class="post-container" id="user'+d[f].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+d[f].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[f].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+d[f].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(d[f].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+d[f].id+"','"+d[f].type+"','"+d[f].generator_id+"','"+d[f].details.profile_photo_url+"','"+d[f].details.user_name+"','"+d[f].time+"','"+d[f].details.text_description+"','0','"+d[f].details.comment_count+"')\">Share</li>"+b+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[f].details.text_description)+'            </div>            <div class="post-comment row" >                <div class="col-100 comment-return" onclick="setPostId(\''+d[f].id+"','"+d[f].type+"','"+d[f].generator_id+"','"+d[f].details.profile_photo_url+"','"+d[f].details.user_name+"','"+d[f].time+"','"+d[f].details.text_description+"','0','"+d[f].details.comment_count+'\')" ><i class="fa fa-comment"></i> '+d[f].details.comment_count+" comments</div></div></div>";else if("video"==d[f].type)c+='<div class="post-container" id="user'+d[f].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+d[f].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[f].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+d[f].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(d[f].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+d[f].id+"','"+d[f].type+"','"+d[f].generator_id+"','"+d[f].details.profile_photo_url+"','"+d[f].details.user_name+"','"+d[f].time+"','"+d[f].details.video_description+"','"+d[f].details.video_title+"','"+d[f].details.comment_count+"')\">Share</li>"+b+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[f].details.video_description)+'            </div>            <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+d[f].details.video_title+'" type="video/mp4">                </video>            </div>           <div class="row post-comment">            <div class="col-50 comment-return" onclick="setPostId(\''+d[f].id+"','"+d[f].type+"','"+d[f].generator_id+"','"+d[f].details.profile_photo_url+"','"+d[f].details.user_name+"','"+d[f].time+"','"+d[f].details.video_description+"','"+d[f].details.video_title+"','"+d[f].details.comment_count+'\')"> <i class="fa fa-comment"></i> '+d[f].details.comment_count+' comments </div>               <div class="col-50 text-right" onclick="download(\''+server+d[f].details.video_title+"','MSG/videos')\" > <i class=\"fa fa-download\"></i> </div></div></div>";else if("audio"==d[f].type)c+='<div class="post-container" id="user'+d[f].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+d[f].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[f].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+d[f].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(d[f].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+d[f].id+"','"+d[f].type+"','"+d[f].generator_id+"','"+d[f].details.profile_photo_url+"','"+d[f].details.user_name+"','"+d[f].time+"','"+d[f].details.audio_description+"','"+d[f].details.audio_title+"','"+d[f].details.comment_count+"')\">Share</li>"+b+'                    </ul>                </div>            </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(d[f].details.audio_description)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+d[f].details.audio_title+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment">            <div class="col-50 comment-return" onclick="setPostId(\''+d[f].id+"','"+d[f].type+"','"+d[f].generator_id+"','"+d[f].details.profile_photo_url+"','"+d[f].details.user_name+"','"+d[f].time+"','"+d[f].details.audio_description+"','"+d[f].details.audio_title+"','"+d[f].details.comment_count+'\')"> <i class="fa fa-comment"></i> '+d[f].details.comment_count+' comments </div>               <div class="col-50 text-right" onclick="download(\''+server+d[f].details.audio_title+"','MSG/audios')\" > <i class=\"fa fa-download\"></i> </div></div></div>";else if("file"==d[f].type){var g="",h=d[f].details.file_title,i=h.substr(h.lastIndexOf(".")+1),j=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var k in j)k==i&&(console.log("File is: "+k),g="img/attach_icons/"+j[k]);c+='<div class="post-container" id="user'+d[f].id+'"><div class="row post-head"  onclick="setGeneratorId(\''+d[f].generator_id+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[f].details.profile_photo_url)+')">                    </div>                </div>                <div class="col-55">                    <p>'+d[f].details.user_name+'</p>                </div>                <div class="col-30 post-time">'+formatAMPM(new Date(d[f].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'user\',\''+d[f].id+"','"+d[f].type+"','"+d[f].generator_id+"','"+d[f].details.profile_photo_url+"','"+d[f].details.user_name+"','"+d[f].time+"','"+d[f].details.file_description+"','"+d[f].details.file_title+"','"+d[f].details.comment_count+"')\">Share</li>"+b+'                    </ul>                </div>            </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[f].details.file_description)+'            </div>             <div class="post-pic" >              <img src="'+g+'" />             </div>           <div class="row post-comment">            <div class="col-50 comment-return" onclick="setPostId(\''+d[f].id+"','"+d[f].type+"','"+d[f].generator_id+"','"+d[f].details.profile_photo_url+"','"+d[f].details.user_name+"','"+d[f].time+"','"+d[f].details.file_description+"','"+d[f].details.file_title+"','"+d[f].details.comment_count+'\')"> <i class="fa fa-comment"></i> '+d[f].details.comment_count+' comments </div>               <div class="col-50 text-right" onclick="download(\''+server+d[f].details.file_title+"','MSG/files')\" > <i class=\"fa fa-download\"></i> </div>            </div></div>"}}else if("celebrity"==d[f].format)if(b=d[f].details.applied_by==a?'<li class="item" onclick="deletePost(event,\''+d[f].id+"')\">Delete</li>":"","photo"==d[f].type)c+='<div class="post-container" id="celeb'+d[f].id+'"><div class="row post-head" onclick="setCelebId(\''+d[f].celebId+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[f].details.celeb_photo_url)+')"></div></div><div class="col-60"><p>'+d[f].details.celeb_name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[f].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+d[f].id+"','"+d[f].type+"','"+d[f].celebId+"','"+d[f].details.celeb_photo_url+"','"+d[f].details.celeb_name+"','"+d[f].time+"','"+d[f].details.photo_description+"','"+d[f].details.photo_title+"','"+d[f].details.comment_count+"')\">Share</li>"+b+'                    </ul>                </div></div></div><div class="post-desc" >'+emojione.unicodeToImage(d[f].details.photo_description)+'</div><div class="post-pic" ><img src="'+server+getThumb(d[f].details.photo_title)+'" /></div><div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+d[f].id+"','"+d[f].type+"','"+d[f].celebId+"','"+d[f].details.celeb_photo_url+"','"+d[f].details.celeb_name+"','"+d[f].time+"','"+d[f].details.photo_description+"','"+d[f].details.photo_title+"','"+d[f].details.comment_count+'\')"><i class="fa fa-comment"></i> '+d[f].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[f].details.photo_title+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==d[f].type)c+='<div class="post-container" id="celeb'+d[f].id+'"><div class="row post-head" onclick="setCelebId(\''+d[f].celebId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[f].details.celeb_photo_url)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[f].details.celeb_name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[f].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+d[f].id+"','"+d[f].type+"','"+d[f].celebId+"','"+d[f].details.celeb_photo_url+"','"+d[f].details.celeb_name+"','"+d[f].time+"','"+d[f].details.text_description+"','0','"+d[f].details.comment_count+"')\">Share</li>"+b+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[f].details.text_description)+'            </div><div class="post-comment row" >                <div class="col-100 comment-return" onclick="setCelebPostId(\''+d[f].id+"','"+d[f].type+"','"+d[f].celebId+"','"+d[f].details.celeb_photo_url+"','"+d[f].details.celeb_name+"','"+d[f].time+"','"+d[f].details.text_description+"','0','"+d[f].details.comment_count+'\')"><i class="fa fa-comment"></i> '+d[f].details.comment_count+" comments</div></div></div>";else if("video"==d[f].type)c+='<div class="post-container" id="celeb'+d[f].id+'"><div class="row post-head" onclick="setCelebId(\''+d[f].celebId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[f].details.celeb_photo_url)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[f].details.celeb_name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[f].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+d[f].id+"','"+d[f].type+"','"+d[f].celebId+"','"+d[f].details.celeb_photo_url+"','"+d[f].details.celeb_name+"','"+d[f].time+"','"+d[f].details.video_description+"','"+d[f].details.video_title+"','"+d[f].details.comment_count+"')\">Share</li>"+b+'                    </ul>                </div>                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[f].details.video_description)+'            </div>            <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+d[f].details.video_title+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+d[f].id+"','"+d[f].type+"','"+d[f].celebId+"','"+d[f].details.celeb_photo_url+"','"+d[f].details.celeb_name+"','"+d[f].time+"','"+d[f].details.video_description+"','"+d[f].details.video_title+"','"+d[f].details.comment_count+'\')"><i class="fa fa-comment"></i> '+d[f].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[f].details.video_title+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("audio"==d[f].type)c+='<div class="post-container" id="celeb'+d[f].id+'"><div class="row post-head" onclick="setCelebId(\''+d[f].celebId+'\')" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[f].details.celeb_photo_url)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[f].details.celeb_name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[f].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+d[f].id+"','"+d[f].type+"','"+d[f].celebId+"','"+d[f].details.celeb_photo_url+"','"+d[f].details.celeb_name+"','"+d[f].time+"','"+d[f].details.audio_description+"','"+d[f].details.audio_title+"','"+d[f].details.comment_count+"')\">Share</li>"+b+'                    </ul>                </div>                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(d[f].details.audio_description)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+d[f].details.audio_title+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+d[f].id+"','"+d[f].type+"','"+d[f].celebId+"','"+d[f].details.celeb_photo_url+"','"+d[f].details.celeb_name+"','"+d[f].time+"','"+d[f].details.audio_description+"','"+d[f].details.audio_title+"','"+d[f].details.comment_count+'\')"><i class="fa fa-comment"></i> '+d[f].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[f].details.audio_title+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("file"==d[f].type){var l="",m=d[f].details.file_title,n=m.substr(m.lastIndexOf(".")+1),o=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var p in o)p==n&&(console.log("File is: "+p),l="img/attach_icons/"+o[p]);c+='<div class="post-container" id="celeb'+d[f].id+'"><div class="row post-head" onclick="setCelebId(\''+d[f].celebId+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[f].details.celeb_photo_url)+')"></div></div><div class="col-60"><p>'+d[f].details.celeb_name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[f].time))+'<i class="fa fa-ellipsis-v" onclick="showDeleteOptions(event,this)"></i>                <div class="celeb-post-del">                    <ul class="list">                        <li class="item" onclick="share(event,\'celeb\',\''+d[f].id+"','"+d[f].type+"','"+d[f].celebId+"','"+d[f].details.celeb_photo_url+"','"+d[f].details.celeb_name+"','"+d[f].time+"','"+d[f].details.file_description+"','"+d[f].details.file_title+"','"+d[f].details.comment_count+"')\">Share</li>"+b+'                    </ul>                </div></div></div><div class="post-desc" >'+emojione.unicodeToImage(d[f].details.file_description)+'</div><div class="post-pic" ><img src="'+l+'" /></div><div class="row post-comment"><div class="col-50 comment-return" onclick="setCelebPostId(\''+d[f].id+"','"+d[f].type+"','"+d[f].celebId+"','"+d[f].details.celeb_photo_url+"','"+d[f].details.celeb_name+"','"+d[f].time+"','"+d[f].details.file_description+"','"+d[f].details.file_title+"','"+d[f].details.comment_count+'\')"><i class="fa fa-comment"></i> '+d[f].details.comment_count+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[f].details.file_title+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div></div></div>"}document.getElementById("dataFeed").innerHTML=c+document.getElementById("dataFeed").innerHTML,console.log(c),$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3),localStorage.setItem("DATAFEED",c+localStorage.getItem("DATAFEED")),setTimeout(function(){myScroll.refresh()},1e3)}else console.log("No More Post"),myScroll.refresh()}},e.open("POST",server+"dataFeedPrevious.php",!0);var f="proId="+localStorage.getItem("PROID")+"&onset="+encodeURIComponent(localStorage.getItem("LASTCREATED"));e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),console.log(f),e.send(f)}function setGeneratorId(a){a==localStorage.getItem("PROID")?window.location.href="profile.html":(localStorage.setItem("RELATIONPROFILEID",a),window.location.href="friend_profile.html")}function setPostId(a,b,c,d,e,f,g,h,i){var j='{"id":"'+a+'","type":"'+b+'","genId":"'+c+'","imageURL":"'+d+'","userName":"'+e+'","time":"'+f+'","desc":"'+g+'","title":"'+h+'","count":"'+i+'"}';localStorage.setItem("HOMEPOSTDETAIL",j),window.location.href="comment_screen.html"}function fetchGroupList(a){var b=localStorage.getItem("PROID"),c=new XMLHttpRequest,d="",e='<div class="group-list-inner" >';e+='<div class="row"  id= "grpHome" data-group-name="MSG"  onclick="openHome()">                    <div class="col-15">                        <div class="counter-person-icon celeb-post-icon" style="background-image:url(img/icon.png)"></div>                    </div>                    <div class="col-80 col-center">MSG</div>                    <div class="col-5 col-center grpCol" id="grpColHome" ><i class="fa fa-dot-circle-o" aria-hidden="true"></i></div>                </div>',c.onreadystatechange=function(){if(4==c.readyState&&200==c.status)if(console.log(c.responseText.trim()),!1!==c.responseText.trim()&&""!==c.responseText.trim()){localStorage.setItem("GRPIDLIST",c.responseText.trim()),d=JSON.parse(c.responseText),console.log(d.length);for(var b=0;b<d.length;b++)e+='<div class="row"  id="grp'+d[b].id+'" data-group-name="'+emojione.unicodeToImage(d[b].name)+'"  onclick="openGroupHome(\''+d[b].id+"','"+d[b].status+'\')">                    <div class="col-15">                        <div class="counter-person-icon celeb-post-icon" style="background-image:url('+server+getThumb(d[b].photo)+')"></div>                    </div>                    <div class="col-80 col-center">'+d[b].name+'</div>                    <div class="col-5 col-center grpCol" id="grpCol'+d[b].id+'" ></div>                </div>';localStorage.setItem("HOMEGROUPLIST",e+"</div>"),"R"==a&&fetchGroupListPopulate(),megaLoad5=!0,console.log("5-megaLoad:"+megaLoad5)}else megaLoad5=!0,console.log("5-megaLoad:"+megaLoad5),console.log("else of group list home"),document.getElementById("rotatingImg").style.display="none",document.getElementById("containerRotatingImg").setAttribute("onclick","")},c.open("POST",server+"fetchActiveGroupList.php",!0);var f="proId="+b;c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(f)}function fetchGroupListPopulate(a){console.log("fetchGroupListPopulate"),document.getElementById("groupList").innerHTML=localStorage.getItem("HOMEGROUPLIST")}function getGroupList(a){console.log("IN"),$("#groupList").toggle("fast"),$("#rotatingImg").toggleClass("rotate180")}function fetchComments(){if(!mutualExclusive1){var a=JSON.parse(localStorage.getItem("HOMEPOSTDETAIL")),b=a.id,c="";if("photo"==a.type)c+='<div class="row post-head" onclick="setGeneratorId(\''+a.genId+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')"></div></div><div class="col-60"><p>'+a.userName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(a.title)+'" /></div><div class="row post-comment"><div class="col-50"><i class="fa fa-comment"></i> '+a.count+' comments</div><div class="col-50 text-right"><i class="fa fa-download"></i></div></div>';else if("text"==a.type)c+='<div class="row post-head" onclick="setGeneratorId(\''+a.genId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a.userName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'            </div>            <div class="post-comment" >                <i class="fa fa-comment"></i> '+a.count+" comments            </div>";else if("video"==a.type)c+='<div class="row post-head" onclick="setGeneratorId(\''+a.genId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a.userName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'            </div>            <div class="post-video">                <video controls preload="auto">                    <source src="'+server+a.title+'" type="video/mp4">                </video>            </div>            <div class="post-comment" >                <i class="fa fa-comment"></i> '+a.count+" comments            </div>        </div>";else if("audio"==a.type)c+='<div class="row post-head" onclick="setGeneratorId(\''+a.genId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a.userName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(a.desc)+'            </div>            <div class="post-video">                <audio controls>                    <source src="'+server+a.title+'" type="audio/wav">                </audio>            </div>            <div class="post-comment" >                <i class="fa fa-comment"></i> '+a.count+" comments            </div>        </div>";else if("file"==a.type){var d="",e=a.title,f=e.substr(e.lastIndexOf(".")+1),g=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var h in g)h==f&&(console.log("File is: "+h),d="img/attach_icons/"+g[h]);c+='<div class="row post-head" onclick="setGeneratorId(\''+a.genId+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')"></div></div><div class="col-60"><p>'+a.userName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'</div><div class="post-pic" ><img src="'+d+'" /></div><div class="row post-comment"><div class="col-50"><i class="fa fa-comment"></i> '+a.count+' comments</div><div class="col-50 text-right"><i class="fa fa-download"></i></div></div>'}var i="",j=new XMLHttpRequest;j.onreadystatechange=function(){if(4==j.readyState&&200==j.status)if(console.log(j.responseText.trim()),-1==j.responseText.indexOf("no comments - 402")){for(var a=JSON.parse(j.responseText),d=a.length-1;d>=0;d--)i+='<div class="row post-head" onclick="setGeneratorId(\''+a[d].userId+'\')">            <div class="col-15 post-pro-pic col-center">                <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].imageURL)+')">                </div>            </div>            <div class="col-60">                <p>'+a[d].name+'</p>                <p class="comment">'+emojione.unicodeToImage(a[d].comment)+'</p>            </div>            <div class="col-25 post-time">                '+formatAMPM(new Date(a[d].time))+"            </div>        </div>";document.getElementById("commentFocus").innerHTML=c+i;var e="<i class='fa fa-comment'></i> "+a[0].count+" comments";localStorage.setItem("POSTCOMMENTCOUNT",b+","+a[0].count),$(".post-comment").html(e),$("html, body").scrollTop($(document).height())}else document.getElementById("commentFocus").innerHTML=c},j.open("POST",server+"fetchComments.php",!0);var k="postId="+b;j.setRequestHeader("Content-type","application/x-www-form-urlencoded"),j.send(k)}}function sendCommentStatus(a){var b=/[^\s]+/;a.value.match(b)?(document.getElementById("sendDisable").style.display="none",document.getElementById("sendEnable").style.display="block"):(document.getElementById("sendEnable").style.display="none",document.getElementById("sendDisable").style.display="block")}function sendComment(){document.getElementById("sendEnable").style.display="none",document.getElementById("sendDisable").style.display="block";var a=localStorage.getItem("PROID"),b=JSON.parse(localStorage.getItem("HOMEPOSTDETAIL")),c=b.id,d=document.getElementById("commentMessage").value,e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(mutualExclusive1=!0,console.log(e.responseText.trim()),e.responseText.trim()?(document.getElementById("commentMessage").value="",mutualExclusive1=!1,fetchComments()):(console.log("error"),mutualExclusive1=!1))},e.open("POST",server+"sendComment.php",!0);var f="proId="+a+"&postId="+c+"&message="+encodeURIComponent(d);e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}function fetchPreProfile(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),!1!==b.responseText.trim()&&localStorage.setItem("USERINFO",b.responseText.trim()),megaLoad6=!0,console.log("6-megaLoad:"+megaLoad6))},b.open("POST",server+"fetchProfile.php",!0);var c="proId="+localStorage.getItem("PROID");b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}function profileFullImage(a){var b=$(a).css("background-image");b=b.replace("url(","").replace(")","").replace(/"/g,""),document.getElementById("fullImage").setAttribute("src",remThumb(b)),document.getElementById("imageAction").style.display="table"}function fetchProfile(a){var b="",d="",e="",f=new XMLHttpRequest;f.onreadystatechange=function(){if(preLoaderOn(),4==f.readyState&&200==f.status)if(console.log(f.responseText.trim()),!1!==f.responseText.trim()){if(d=JSON.parse(f.responseText.trim()),$(".user-profile-pic").css("backgroundImage","url("+server+getThumb(d[0].imageURL)+")"),b+='<p class="name">'+d[0].name+" <span> ("+d[0].gender+')</span></p>        <p class="status">'+d[0].quote+'        </p>        <p class="mobile">'+d[0].phNo+'</p>        <p class="email">'+d[0].email+'</p>        <div class="rule-80"></div>        <div class="row my-profile-details-following" id="celebfollowListId" onclick="showFollowingList()">            <div class="col-80">Following</div>            <div class="col-20">'+d[0].followingCount+"</div>        </div>",document.getElementById("infoFetch").innerHTML=b,localStorage.setItem("USERINFO",f.responseText.trim()),""==d[0].celebList||null==d[0].celebList)document.getElementById("celebfollowListId").setAttribute("onclick","");else{for(var a=0;a<d[0].celebList.length;a++)e+='<div class="row" onclick="gotoCeleb(\''+d[0].celebList[a].celebId+'\')">                <div class="col-20">                    <div class="celeb-pro-pic-cont" style="background-image:url('+server+d[0].celebList[a].celebPhoto+')"></div>                </div>                <div class="col-80">                    <div class="celeb-pro-desc">                        <h3>'+d[0].celebList[a].celebName+"</h3>                        <p>                       "+d[0].celebList[a].celebQuote+"                             </p>                    </div>                </div>            </div>";document.getElementById("followingList").innerHTML=e}preLoaderOff()}else console.log("ELSE"),preLoaderOff()},f.open("POST",server+"fetchProfile.php",!0);var g="proId="+localStorage.getItem("PROID");f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function toggleLoaderProfile(a){document.getElementById("loadMore").style.display="none",document.getElementById("proLoader").style.display="block",offsetProfile+=10,fetchNextProfile(offsetProfile)}function fetchNextProfile(a){var b="",c="",d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status)if(console.log(d.responseText.trim()),!1!==d.responseText.trim())if(c=JSON.parse(d.responseText.trim()),0!==c.length){for(var a=0;a<c[0].detail.length;a++)if("photo"==c[0].detail[a].type)b+='<div class="row post-head" ><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+c[0].imageURL+')"></div></div><div class="col-60"><p>'+c[0].name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(c[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(c[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+c[0].detail[a].URL+'" /></div><div class="row post-comment"><div class="col-50" onclick="setPostId(\''+c[0].detail[a].id+"','"+c[0].detail[a].type+"','"+c[0].generatorId+"','"+c[0].imageURL+"','"+c[0].name+"','"+c[0].detail[a].at+"','"+c[0].detail[a].desc+"','"+c[0].detail[a].URL+"','"+c[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+c[0].detail[a].commentCount+' comments </div><div class="col-40 text-right" onclick="download(\''+server+c[0].detail[a].URL+'\',\'MSG/images\')" ><i class="fa fa-download"></i> </div><div class="col-10 text-right" onclick="share(\''+c[0].detail[a].id+'\')" ><i class="fa fa-share"></i> </div></div>';else if("text"==c[0].detail[a].type)b+='<div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+c[0].imageURL+')">                    </div>                </div>                <div class="col-60">                    <p>'+c[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(c[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(c[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setPostId(\''+c[0].detail[a].id+"','"+c[0].detail[a].type+"','"+c[0].generator_id+"','"+c[0].imageURL+"','"+c[0].name+"','"+c[0].detail[a].at+"','"+c[0].detail[a].desc+"','0','"+c[0].detail[a].commentCount+'\')">                <i class="fa fa-comment"></i> '+c[0].detail[a].commentCount+" comments            </div>";else if("video"==c[0].detail[a].type)b+='<div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+c[0].imageURL+')">                    </div>                </div>                <div class="col-60">                    <p>'+c[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(c[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(c[0].detail[a].desc)+'            </div>            <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+c[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setPostId(\''+c[0].detail[a].id+"','"+c[0].detail[a].type+"','"+c[0].generatorId+"','"+c[0].imageURL+"','"+c[0].name+"','"+c[0].detail[a].at+"','"+c[0].detail[a].desc+"','"+c[0].detail[a].URL+"','"+c[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+c[0].detail[a].commentCount+' comments </div><div class="col-40 text-right" onclick="download(\''+server+c[0].detail[a].URL+'\',\'MSG/videos\')" ><i class="fa fa-download"></i> </div><div class="col-10 text-right" onclick="share(\''+c[0].detail[a].id+'\')" ><i class="fa fa-share"></i> </div>            </div>';else if("audio"==c[0].detail[a].type)b+='<div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+c[0].imageURL+')">                    </div>                </div>                <div class="col-60">                    <p>'+c[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(c[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(c[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls>                    <source src="'+server+c[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setPostId(\''+c[0].detail[a].id+"','"+c[0].detail[a].type+"','"+c[0].generatorId+"','"+c[0].imageURL+"','"+c[0].name+"','"+c[0].detail[a].at+"','"+c[0].detail[a].desc+"','"+c[0].detail[a].URL+"','"+c[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+c[0].detail[a].commentCount+' comments </div><div class="col-40 text-right" onclick="download(\''+server+c[0].detail[a].URL+'\',\'MSG/audios\')" ><i class="fa fa-download"></i> </div><div class="col-10 text-right" onclick="share(\''+c[0].detail[a].id+'\')" ><i class="fa fa-share"></i> </div>        </div>';else if("file"==c[0].detail[a].type){var e="",f=c[0].detail[a].URL,g=f.substr(f.lastIndexOf(".")+1),h=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var i in h)i==g&&(console.log("File is: "+i),e="img/attach_icons/"+h[i]);b+='<div class="row post-head" ><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+c[0].imageURL+')"></div></div><div class="col-60"><p>'+c[0].name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(c[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(c[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+e+'" /></div><div class="row post-comment"><div class="col-50" onclick="setPostId(\''+c[0].detail[a].id+"','"+c[0].detail[a].type+"','"+c[0].generatorId+"','"+c[0].imageURL+"','"+c[0].name+"','"+c[0].detail[a].at+"','"+c[0].detail[a].desc+"','"+c[0].detail[a].URL+"','"+c[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+c[0].detail[a].commentCount+' comments </div><div class="col-40 text-right" onclick="download(\''+server+c[0].detail[a].URL+'\',\'MSG/files\')" ><i class="fa fa-download"></i> </div><div class="col-10 text-right" onclick="share(\''+c[0].detail[a].id+'\')" ><i class="fa fa-share"></i> </div></div>'}document.getElementById("postList").innerHTML+=b,document.getElementById("loadMore").style.display="block",document.getElementById("proLoader").style.display="none"}else document.getElementById("loadMore").innerHTML="<p>No More Posts</p>",document.getElementById("loadMore").setAttribute("onclick",""),document.getElementById("loadMore").style.display="block",document.getElementById("proLoader").style.display="none";else console.log("ELSE")},d.open("POST",server+"fetchNextProfile.php",!0);var e="proId="+localStorage.getItem("PROID")+"&offset="+a;console.log(e),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}function extractProfile(a){var b=JSON.parse(localStorage.getItem("USERINFO"));document.getElementById("proPic").style.backgroundImage="url("+server+getThumb(b[0].imageURL)+")",document.getElementById("proName").value=b[0].name,document.getElementById("proEmail").value=b[0].email,document.getElementById("proGender").value=b[0].gender,document.getElementById("proStatus").value=b[0].quote}function updatePrevProfile(a){var b=/^[a-z ,.'-]+$/i,c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,d=document.getElementById("proName").value,e=d.split(" ")[0],f=d.split(" ").length>1?d.split(" ")[1]:"",g=document.getElementById("proEmail").value,h=document.getElementById("proGender").value,i=document.getElementById("proStatus").value;if(d.match(b))if(g.match(c))if(" "!=i&&""!==i){var j=new XMLHttpRequest;j.onreadystatechange=function(){loadingOn(),4==j.readyState&&200==j.status&&(console.log(j.responseText.trim()),j.responseText.trim()&&(proPicUpdated?prevDisplayImageUpload():window.location.href="profile.html"))},j.open("POST",server+"prevProfileDataUpdate.php",!0);var k="proFName="+e+"&proLName="+f+"&proEmail="+g+"&proGender="+h+"&proStatus="+i+"&proId="+localStorage.getItem("PROID");j.setRequestHeader("Content-type","application/x-www-form-urlencoded"),console.log(k),j.send(k)}else $("#proStatus").css("border-bottom","2px solid #000"),$("#statusErr").html("Invalid Status");else $("#proEmail").css("border-bottom","2px solid #000"),$("#emailErr").html("Invalid Email");else $("#proName").css("border-bottom","2px solid #000"),$("#nameErr").html("Invalid Name")}function prevDisplayImageUpload(a){function g(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),loadingOff(),window.location.href="profile.html"}function h(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure"),loadingOff()}console.log("in upload file:"+checkURL);var b=encodeURI(server+"prevDisplayImageUpload.php"),c=new FileUploadOptions;c.fileKey="fileUploadKey",c.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),c.mimeType="image/jpeg",c.httpMethod="POST";var d={};d.id=localStorage.getItem("PROID"),c.params=d,c.chunkedMode=!1;var e={headerParam:"headerValue"};c.headers=e;var f=new FileTransfer;f.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%"),$("#proPerc").html(b)}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},f.upload(checkURL,b,g,h,c)}function fetchInfo(a){var b=localStorage.getItem("PROID"),c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var a=JSON.parse(c.responseText.trim());a.length>0&&(document.getElementById("proQuote").innerHTML='"'+a[0].user_quote+'"',$(".side-nav-profile").css("backgroundImage","url("+server+a[0].profile_photo_url+")"))}},c.open("POST",server+"fetchInfo.php",!0);var d="proId="+b;c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d)}function removeJunk(a){$(".cd-popup-container").children("textarea").val(""),$(".status-update-cont").children("textarea").val(""),$(".myBar").css("width","0"),$("#photoImage").attr("src","//:0"),$("#audioImage").attr("src","//:0"),$("#videoImage").attr("src","//:0"),$(".send-attach-img").attr("src","//:0")}function checkUserStatus(a){var b=localStorage.getItem("PROID"),c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(console.log(c.responseText.trim()),c.responseText.trim()&&contactFetch())},c.open("POST",server+"checkUserStatus.php",!0);var d="proId="+b;c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d)}function contactFetch(a,b,c){function d(d){if(""!=localStorage.getItem("PHN")&&null!=localStorage.getItem("PHN"))for(var e=[],f=0;f<d.length;f++){var g,h="",i="";if(!(null===d[f].displayName||null===d[f].phoneNumbers||void 0===d[f].displayName||void 0===d[f].phoneNumbers||localStorage.getItem("PHN").indexOf(d[f].phoneNumbers[0].value)>-1))for(var j=0;j<d[f].phoneNumbers.length;j++)0==j?(g="",h=d[f].phoneNumbers[j].value):(g="_"+j,i=d[f].phoneNumbers[j].value),h.replace(/-|\s/g,"")==i.replace(/-|\s/g,"")?console.log("PREV:"+h+":::NXT:"+i):e.push({id:d[f].phoneNumbers[j].id,system_id:"",name:d[f].displayName+g,phone:d[f].phoneNumbers[j].value.replace(/-|\s/g,""),imageURL:"",is_user:"",status:"0",action_user:""})}else console.log("PHN Not Set");var k=[],l=[];$.each(e,function(a,b){-1==$.inArray(b.phone,k)&&(k.push(b.phone),l.push(b))});var m=JSON.stringify(l);localStorage.setItem("LASTCONTACTID",e[e.length-1].id),contactsCheckDB(m,a,b,c)}function e(a){console.log("onError!")}"CON"==a&&(preLoaderOn(),localStorage.setItem("CONTACTS",""));var f=new ContactFindOptions;f.filter="",f.multiple=!0,f.hasPhoneNumber=!0;var g=[navigator.contacts.fieldType.id,navigator.contacts.fieldType.displayName,navigator.contacts.fieldType.phoneNumbers];navigator.contacts.find(g,d,e,f)}function nextContactFetch(a){function b(a){console.log("Found "+a.length+" contacts.");for(var b=[],c=0;c<a.length;c++)null===a[c].displayName||null===a[c].phoneNumbers||void 0===a[c].displayName||void 0===a[c].phoneNumbers||localStorage.getItem("PHN").indexOf(a[c].phoneNumbers[0].value)>-1||b.push({id:a[c].id,system_id:"",name:a[c].displayName,phone:a[c].phoneNumbers[0].value,imageURL:"",is_user:"",status:"0",action_user:""});var d=JSON.stringify(b);console.log(d),contactsCheckDB(d)}function c(a){console.log("onError!")}var d=new ContactFindOptions;d.filter="",d.multiple=!0,d.desiredFields=[navigator.contacts.fieldType.id,navigator.contacts.fieldType.displayName,navigator.contacts.fieldType.name,navigator.contacts.fieldType.phoneNumbers],d.hasPhoneNumber=!0;var e=[navigator.contacts.fieldType.id,navigator.contacts.fieldType.displayName,navigator.contacts.fieldType.name,navigator.contacts.fieldType.phoneNumbers];navigator.contacts.find(e,b,c,d)}function contactsCheckDB(a,b,c,d){var e=localStorage.getItem("PROID"),f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status){if(console.log(f.responseText.trim()),-1==f.responseText.indexOf("error")){var a=JSON.parse(f.responseText.trim());a=sortByName(a,"name"),localStorage.setItem("CONTACTS",JSON.stringify(a)),"CON"==b?(console.log("via CON"),fetchContacts(),fetchContactRelation()):"ACC"==b?(console.log("via ACC"),acceptReq("2",c,d)):"SEN"==b&&(console.log("via SEN"),sendReq("1",c,d))}megaLoad2=!0,console.log("2-megaLoad:"+megaLoad2)}},f.open("POST",server+"contactsCheckDB.php",!0);var g="proId="+e+"&phNo="+encodeURIComponent(localStorage.getItem("PHN"))+"&data="+encodeURIComponent(a);f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function fetchContacts(a){preLoaderOn();var b='<div class="letter-cont friend-request">',c='<div class="letter-cont">',d='<div class="letter-cont friend-request">',e=JSON.parse(localStorage.getItem("CONTACTS"));console.log(localStorage.getItem("CONTACTS")),document.getElementById("contactsContainer").innerHTML="";for(var f=0;f<e.length;f++)if(e[f].is_user)if(4==e[f].status)d+='<div class="row ">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+server+getThumb(e[f].imageURL)+')">                    </div>                </div>                <div class="col-50 col-center" >                    <p class="contact-person-name">'+e[f].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i>'+e[f].phone+'</p>                </div>                <div class="col-30 text-right" id="imgReq'+e[f].system_id+'">                  <button class="button unblock" onclick="unBlockContacts(\''+e[f].system_id+'\')">unBlock</button>                 </div>            </div><div id="extraReq'+e[f].system_id+'"></div>';else{var g='<button class="button add" onclick="sendRequest(\''+e[f].system_id+"','0')\" >Add</button>",h="",i="";1==e[f].status?(console.log(e[f].action_user),e[f].action_user==localStorage.getItem("PROID")?g='<button class="button pending">Pending...</button>':(g="",h='<div class="row status"><div class="col-20"></div><div class="col-40"><button class="button accept" onclick="sendRequest(\''+e[f].system_id+'\',\'2\')" >Accept</button></div> <div class="col-40"><button class="button reject"  onclick="sendRequest(\''+e[f].system_id+"','3')\" >Reject</button></div> </div>",i="friend-request-notify")):2==e[f].status?g=' <img src="img/icons/chat.svg" onclick="openChat(\''+e[f].system_id+"')\"/>":3==e[f].status?g='<button class="button add" onclick="sendRequest(\''+e[f].system_id+"','1')\" >Add</button>":5==e[f].status?g='<button class="button add" onclick="sendRequest(\''+e[f].system_id+"','1')\" >Add</button>":6==e[f].status&&(g='<button class="button add" onclick="sendRequest(\''+e[f].system_id+"','1')\" >Add</button>"),b+='<div class="row '+i+'">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon"  style="background-image:url('+server+getThumb(e[f].imageURL)+')">                    </div>                </div>                <div class="col-50 col-center" onclick="checkProfile(this)" data-system-id="'+e[f].system_id+'">                    <p class="contact-person-name">'+e[f].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i>'+e[f].phone+'</p>                </div>                <div class="col-30 text-right" id="imgReq'+e[f].system_id+'">                   '+g+'                </div>            </div><div id="extraReq'+e[f].system_id+'">'+h+"</div>"}else c+='   <div class="row" onclick="">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon">                        <img src="img/list/arya_stark.jpg">                    </div>                </div>                <div class="col-80 col-center">                    <p class="contact-person-name">'+e[f].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i> '+e[f].phone+" <span onclick=\"sendInvite('"+e[f].id+"','"+e[f].phone+"')\">invite</span></p>                </div>            </div>";document.getElementById("contactsContainer").innerHTML=b+"</div>"+c+"</div>"+d+"</div>"}function openResponseOptions(a){console.log($(a).siblings(".add-friend-request").html()),$(a).siblings(".add-friend-request").css("display","block")}function sortByName(a,b){return a.sort(function(a,c){var d=a[b],e=c[b];return d<e?-1:d>e?1:0})}function cSearch(a){var b='<div class="letter-cont friend-request">',c='<div class="letter-cont">',d='<div class="letter-cont friend-request">',e=JSON.parse(localStorage.getItem("CONTACTS"));document.getElementById("contactsContainer").innerHTML="";for(var f=0;f<e.length;f++)if(-1!=e[f].name.toLowerCase().indexOf(a.value.toLowerCase()))if(e[f].is_user)if(4==e[f].status)d+='<div class="row ">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon"  style="background-image:url('+server+getThumb(e[f].imageURL)+')">                    </div>                </div>                <div class="col-50 col-center" >                    <p class="contact-person-name">'+e[f].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i>'+e[f].phone+'</p>                </div>                <div class="col-30 text-right" id="imgReq'+e[f].system_id+'">                  <button class="button unblock" onclick="unBlockContacts(\''+e[f].system_id+'\')">unBlock</button>                 </div>            </div><div id="extraReq'+e[f].system_id+'"></div>';else{var g,h,i='<button class="button add" onclick="sendRequest(\''+e[f].system_id+"','0')\" >Add</button>";1==e[f].status?(console.log(e[f].action_user),e[f].action_user==localStorage.getItem("PROID")?i='<button class="button pending">Pending...</button>':(i="",h='<div class="row status"><div class="col-20"></div><div class="col-40"><button class="button accept" onclick="sendRequest(\''+e[f].system_id+'\',\'2\')" >Accept</button></div> <div class="col-40"><button class="button reject"  onclick="sendRequest(\''+e[f].system_id+"','3')\" >Reject</button></div> </div>",g="friend-request-notify")):2==e[f].status?i=' <img src="img/icons/chat.svg" onclick="openChat(\''+e[f].system_id+"')\"/>":3==e[f].status?i='<button class="button add" onclick="sendRequest(\''+e[f].system_id+"','1')\" >Add</button>":5==e[f].status?i='<button class="button add" onclick="sendRequest(\''+e[f].system_id+"','1')\" >Add</button>":6==e[f].status&&(i='<button class="button add" onclick="sendRequest(\''+e[f].system_id+"','1')\" >Add</button>"),b+='<div class="row '+g+'">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon"  style="background-image:url('+server+getThumb(e[f].imageURL)+')">                    </div>                </div>                <div class="col-50 col-center" onclick="checkProfile(this)" data-system-id="'+e[f].system_id+'">                    <p class="contact-person-name">'+e[f].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i>'+e[f].phone+'</p>                </div>                <div class="col-30 text-right" id="imgReq'+e[f].system_id+'">                   '+i+'                </div>            </div><div id="extraReq'+e[f].system_id+'">'+h+"</div>"}else c+='   <div class="row" onclick="">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon">                        <img src="img/list/arya_stark.jpg">                    </div>                </div>                <div class="col-80 col-center">                    <p class="contact-person-name">'+e[f].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i> '+e[f].phone+" <span onclick=\"sendInvite('"+e[f].id+"','"+e[f].phone+"')\">invite</span></p>                </div>            </div>";document.getElementById("contactsContainer").innerHTML=b+"</div>"+c+"</div>"+d+"</div>"}function cClear(){document.getElementById("search-input").value="",fetchContacts()}function checkProfile(a){localStorage.setItem("RELATIONPROFILEID",a.getAttribute("data-system-id")),window.location.href="friend_profile.html"}function decideBlock(a){document.getElementById("cbx").checked?confirm("Are You Sure You Want To Block?")?block():document.getElementById("cbx").checked=!1:confirm("Are You Sure You Want To unBlock?")?unBlock():document.getElementById("cbx").checked=!0}function block(){fId=document.getElementById("cbx").getAttribute("data-friend-id");var a=localStorage.getItem("PROID"),c="",d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status&&(console.log(d.responseText.trim()),d.responseText.trim())){c=JSON.parse(localStorage.getItem("CONTACTS"));for(var e=0;e<c.length;e++)c[e].is_user&&c[e].system_id==fId&&(c[e].status="4",c[e].action_user=a,localStorage.setItem("LATESTFOLLOWCELEB",1),location.href="contacts.html");localStorage.setItem("CONTACTS",JSON.stringify(c))}},d.open("POST",server+"blockRelationRequest.php",!0);var e="proId="+a+"&friId="+fId;d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}function unBlock(){if(confirm("Are You Sure You Want To unBlock?")){fId=document.getElementById("cbx").getAttribute("data-friend-id");var a=localStorage.getItem("PROID"),c="",d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status&&(console.log(d.responseText.trim()),d.responseText.trim())){c=JSON.parse(localStorage.getItem("CONTACTS"));for(var e=0;e<c.length;e++)c[e].is_user&&c[e].system_id==fId&&(c[e].status="6",c[e].action_user=a,location.href="contacts.html");localStorage.setItem("CONTACTS",JSON.stringify(c))}},d.open("POST",server+"unBlockRelationRequest.php",!0);var e="proId="+a+"&friId="+fId;d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}}function unBlockContacts(a){if(confirm("Are You Sure You Want To unBlock?")){var b=localStorage.getItem("PROID"),d="",e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status&&(console.log(e.responseText.trim()),e.responseText.trim())){d=JSON.parse(localStorage.getItem("CONTACTS"));for(var f=0;f<d.length;f++)d[f].is_user&&d[f].system_id==a&&(d[f].status="6",d[f].action_user=b,location.href="contacts.html");localStorage.setItem("CONTACTS",JSON.stringify(d))}},e.open("POST",server+"unBlockRelationRequest.php",!0);var f="proId="+b+"&friId="+a;e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}}function sendRequest(a,b,c){if(0==b){confirm("Are You Sure You Want To Send Request?")&&decideSendReq(b,a,c)}else if(1==b){var e=confirm("Are You Sure You Want To Send Request?");e&&resendReq(b,a,c)}else if(2==b){var f=confirm("Are You Sure You Want To Accept Request?");f&&decideAccept(b,a,c)}else if(3==b){var g=confirm("Are You Sure You Want To Decline Request?");g&&declineReq(b,a,c)}else if(4==b);else if(5==b){var h=confirm("Are You Sure You Want To Unfriend?");h&&unFriend(b,a,c)}}function decideSendReq(a,b,c){if("profile"==c){console.log("1:decideSendReq");var d="",e="",f=!1;d=JSON.parse(localStorage.getItem("CONTACTS")),e=JSON.parse(localStorage.getItem("NEWFRIENDCONTACT"));for(var g=0;g<d.length;g++)d[g].phone.substr(d[g].phone.length-10)==e.phone.substr(e.phone.length-10)&&(f=!0);console.log(f),f?sendReq(a,b,c):(document.getElementById("loaderContent").innerHTML="Adding Contact...",preLoaderOn(),addAndSendReq(a,b,c))}else sendReq(a,b,c)}function addAndSendReq(a,b,c){function e(a){console.log("Save Success"),contactFetch("SEN",b,c)}function f(a){alert("Error = "+a.code)}console.log("3:addAndSendReq");var d=JSON.parse(localStorage.getItem("NEWFRIENDCONTACT")),g=navigator.contacts.create();g.displayName=d.name,g.nickname=d.name;var h=[];h[0]=new ContactField("mobile",d.phone,!0),g.phoneNumbers=h,g.save(e,f)}function sendReq(a,b,c){console.log("2:sendReq");var d=b,e=localStorage.getItem("PROID"),g="",h=new XMLHttpRequest;h.onreadystatechange=function(){if(4==h.readyState&&200==h.status)if(console.log(h.responseText.trim()),!1!==h.responseText.trim()){g=JSON.parse(localStorage.getItem("CONTACTS"));for(var a=0;a<g.length;a++)g[a].is_user&&g[a].system_id==d&&(g[a].status="1",g[a].action_user=e,"profile"==c?document.getElementById("relationStatus").innerHTML='<button class="button pending">Pending...</button>':document.getElementById("imgReq"+d).innerHTML='<button class="button pending">Pending...</button>');localStorage.setItem("CONTACTS",JSON.stringify(g)),preLoaderOff()}else console.log("else of sendReq"),preLoaderOff()},h.open("POST",server+"sendRelationRequest.php",!0);var i="proId="+e+"&friId="+d;h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(i)}function resendReq(a,b,c){var d=b,e=localStorage.getItem("PROID"),g="",h=new XMLHttpRequest;h.onreadystatechange=function(){if(4==h.readyState&&200==h.status&&(console.log(h.responseText.trim()),!1!==h.responseText.trim())){g=JSON.parse(localStorage.getItem("CONTACTS"));for(var a=0;a<g.length;a++)g[a].is_user&&g[a].system_id==d&&(g[a].status="1",g[a].action_user=e,"profile"==c?document.getElementById("relationStatus").innerHTML='<button class="button pending">Pending...</button>':document.getElementById("imgReq"+d).innerHTML='<button class="button pending">Pending...</button>');localStorage.setItem("CONTACTS",JSON.stringify(g))}},h.open("POST",server+"reSendRelationRequest.php",!0);var i="proId="+e+"&friId="+d;h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(i)}function decideAccept(a,b,c){if("profile"==c){console.log("1:decideAccept");var d="",e="",f=!1;d=JSON.parse(localStorage.getItem("CONTACTS")),e=JSON.parse(localStorage.getItem("NEWFRIENDCONTACT"));for(var g=0;g<d.length;g++)d[g].phone.substr(d[g].phone.length-10)==e.phone.substr(e.phone.length-10)&&(f=!0);console.log(f),f?acceptReq(a,b,c):(document.getElementById("loaderContent").innerHTML="Adding Contact...",preLoaderOn(),addAndAccept(a,b,c))}else acceptReq(a,b,c);localStorage.setItem("LATESTFOLLOWCELEB",1)}function addAndAccept(a,b,c){function e(a){console.log("Save Success"),contactFetch("ACC",b,c)}function f(a){alert("Error = "+a.code)}console.log("3:addAndAccept");var d=JSON.parse(localStorage.getItem("NEWFRIENDCONTACT")),g=navigator.contacts.create();g.displayName=d.name,g.nickname=d.name;var h=[];h[0]=new ContactField("mobile",d.phone,!0),g.phoneNumbers=h,g.save(e,f)}function acceptReq(a,b,c){console.log("2:acceptReq");var d=b,e=localStorage.getItem("PROID"),f="2",g="";g=JSON.parse(localStorage.getItem("CONTACTS"));var h=new XMLHttpRequest;h.onreadystatechange=function(){if(4==h.readyState&&200==h.status)if(console.log(h.responseText.trim()),h.responseText.trim()){for(var a=0;a<g.length;a++)g[a].is_user&&g[a].system_id==d&&(g[a].status=f,g[a].action_user=e,"profile"==c?document.getElementById("relationStatus").innerHTML='<button class="button message" onclick="openChat(\''+g[a].system_id+"')\">Message</button>":(document.getElementById("imgReq"+d).innerHTML='<img src="img/icons/chat.svg" onclick="openChat(\''+g[a].system_id+"')\"/>",document.getElementById("extraReq"+d).innerHTML="",$("#extraReq"+d).prev(".row").removeClass("friend-request-notify")));localStorage.setItem("CONTACTS",JSON.stringify(g)),preLoaderOff()}else console.log("not accepted"),preLoaderOff()},h.open("POST",server+"acceptRelationRequest.php",!0);var i="proId="+e+"&friId="+d;h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(i)}function declineReq(a,b,c){var d=b,e=localStorage.getItem("PROID"),g="",h=new XMLHttpRequest;h.onreadystatechange=function(){if(4==h.readyState&&200==h.status&&(console.log(h.responseText.trim()),h.responseText.trim())){g=JSON.parse(localStorage.getItem("CONTACTS"));for(var a=0;a<g.length;a++)g[a].is_user&&g[a].system_id==d&&(g[a].status="3",g[a].action_user=e,"profile"==c?document.getElementById("relationStatus").innerHTML='<button class="button add" onclick="sendRequest(\''+d+"','1','profile')\" >Add Friend</button>":(document.getElementById("imgReq"+d).innerHTML='<button class="button add" onclick="sendRequest(\''+d+"','1','')\" >Add</button>",document.getElementById("extraReq"+d).innerHTML="",$("#extraReq"+d).prev(".row").removeClass("friend-request-notify")));localStorage.setItem("CONTACTS",JSON.stringify(g))}},h.open("POST",server+"declineRelationRequest.php",!0);var i="proId="+e+"&friId="+d;h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(i)}function unFriend(a,b,c){var d=b,e=localStorage.getItem("PROID"),g="",h=new XMLHttpRequest;h.onreadystatechange=function(){if(4==h.readyState&&200==h.status&&(console.log(h.responseText.trim()),h.responseText.trim())){localStorage.setItem("LATESTFOLLOWCELEB",1),g=JSON.parse(localStorage.getItem("CONTACTS"));for(var b=0;b<g.length;b++)g[b].is_user&&g[b].system_id==d&&(g[b].status=a,g[b].action_user=e,"profile"==c&&(document.getElementById("relationStatus").innerHTML='<button class="button add" onclick="sendRequest(\''+d+"','1','profile')\" >Add Friend</button>"));localStorage.setItem("CONTACTS",JSON.stringify(g))}},h.open("POST",server+"unFriendRelationRequest.php",!0);var i="proId="+e+"&friId="+d;h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(i)}function sendInvite(a,b){window.plugins.socialsharing.shareViaSMS("Download MSG, A Complete Social Networking Solution. https://play.google.com/store/apps/details?id=com.terasoltechnologies.aeons",b,function(a){console.log("ok: "+a)},function(a){console.log("error: "+a)})}function openChat(a){console.log("openChat"+a),localStorage.setItem("SINGLECHATID",a),window.location.href="singlechat.html"}function fetchContactRelation(){var a=localStorage.getItem("PROID"),b="",c="",d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status)if(console.log(d.responseText.trim()),-1==d.responseText.trim().indexOf("error")){c=JSON.parse(localStorage.getItem("CONTACTS")),b=JSON.parse(d.responseText.trim());for(var a=0;a<b.length;a++)for(var e=0;e<c.length;e++)if(c[e].is_user&&c[e].system_id==b[a].nmId){c[e].status=b[a].status,c[e].action_user=b[a].actionId;var f='<button class="button add" onclick="sendRequest(\''+c[e].system_id+"','0')\">Add</button>",g="";1==c[e].status?(console.log(c[e].action_user),c[e].action_user==localStorage.getItem("PROID")?f='<button class="button pending" >Pending...</button>':(f="",g='<div class="row status"><div class="col-20"></div><div class="col-40"><button class="button accept" onclick="sendRequest(\''+c[e].system_id+'\',\'2\')" >Accept</button></div> <div class="col-40"><button class="button reject"  onclick="sendRequest(\''+c[e].system_id+"','3')\" >Reject</button></div> </div>")):2==c[e].status?f=' <img src="img/icons/chat.svg" onclick="openChat(\''+c[e].system_id+"')\"/>":3==c[e].status?f='<button class="button add" onclick="sendRequest(\''+c[e].system_id+"','1')\">Add</button>":4==c[e].status?f=c[e].action_user==localStorage.getItem("PROID")?'<button  class="button unblock" onclick="unBlockContacts(\''+c[e].system_id+"')\">unBlock</button>":0:5==c[e].status?f='<button class="button add" onclick="sendRequest(\''+c[e].system_id+"','1')\" >Add</button>":6==c[e].status&&(f='<button class="button add" onclick="sendRequest(\''+c[e].system_id+"','1')\" >Add</button>"),0===f&&$("#imgReq"+c[e].system_id).parent().hide(),document.getElementById("imgReq"+c[e].system_id).innerHTML=f,document.getElementById("extraReq"+c[e].system_id).innerHTML=g}localStorage.setItem("CONTACTS",JSON.stringify(c)),preLoaderOff()}else console.log("OUT"),preLoaderOff()},d.open("POST",server+"fetchRelation.php",!0);var e="proId="+a;d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}function fetchRelation(){var a=localStorage.getItem("PROID"),b="",c="",d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){if(-1==d.responseText.trim().indexOf("error")){c=JSON.parse(localStorage.getItem("CONTACTS")),b=JSON.parse(d.responseText.trim());for(var a=0;a<b.length;a++)for(var e=0;e<c.length;e++)c[e].is_user&&c[e].system_id==b[a].nmId&&(c[e].status=b[a].status,c[e].action_user=b[a].actionId);localStorage.setItem("CONTACTS",JSON.stringify(c))}else console.log("ELSE OF FETCH RELATION");megaLoad3=!0,console.log("3-megaLoad:"+megaLoad3)}},d.open("POST",server+"fetchRelation.php",!0);var e="proId="+a;d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}function fetchFriendProfile(){var a=localStorage.getItem("RELATIONPROFILEID"),b="",d="",e="";isBlockStyle="";var f=new XMLHttpRequest;f.onreadystatechange=function(){if(preLoaderOn(),4==f.readyState&&200==f.status)if(console.log(f.responseText.trim()),!1!==f.responseText.trim()){d=JSON.parse(f.responseText.trim()),document.getElementById("headTitle").innerHTML=d[0].name,$(".user-profile-pic").css("backgroundImage","url("+server+getThumb(d[0].imageURL)+")");var c={name:d[0].name,phone:d[0].phNo};localStorage.setItem("NEWFRIENDCONTACT",JSON.stringify(c));var g=' <button class="button add" onclick="sendRequest(\''+a+"','0','profile')\" >Add Friend</button>";if(1==d[0].relationStatus?g=d[0].actionUser==localStorage.getItem("PROID")?' <button class="button pending">Pending...</button>':' <div class="col-50" onclick="sendRequest(\''+a+"','2','profile')\" ><button class=\"button\">Accept</button></div>   <div class=\"col-50\" onclick=\"sendRequest('"+a+"','3','profile')\"><button class=\"button reject\">Reject</button></div>":2==d[0].relationStatus?g=' <button class="button message" onclick="sendRequest(\''+a+"','5','profile')\">Unfriend</button>   <button class=\"button message\" onclick=\"openChat('"+a+"')\">Message</button>":3==d[0].relationStatus?g='<button class="button add" onclick="sendRequest(\''+a+"','1','profile')\" >Add Friend</button> ":4==d[0].relationStatus?d[0].actionUser==localStorage.getItem("PROID")?(g='<button class="button unblock" onclick="unBlock(\''+a+"')\" >Unblock</button> ",isBlockStyle="style='display:none;'"):g="<span></span>":5==d[0].relationStatus?g='<button class="button add" onclick="sendRequest(\''+a+"','1','profile')\" >Add Friend</button>":6==d[0].relationStatus&&(g='<button class="button add" onclick="sendRequest(\''+a+"','1','profile')\" >Add Friend</button>"),console.log(g),b+='<p class="name">'+d[0].name+" <span> ("+d[0].gender+')</span></p>        <p class="status">'+d[0].quote+'        </p>        <p class="mobile">'+d[0].phNo+'</p>        <p class="email">'+d[0].email+'</p>        <div class="row user-profile-friend-req" id="relationStatus">'+g+'        </div>        <ul class="list friend-profile-block" '+isBlockStyle+'>            <li class="item">                Block '+d[0].name+'                <label class="switch">                    <input type="checkbox" class="switch__input" onclick="decideBlock()" id="cbx" data-friend-id="'+a+'" >                    <div class="switch__toggle"></div>                </label>            </li>        </ul>      <div class="space-1"></div>        <div class="rule-80"></div>        <div class="row my-profile-details-following" id="celebfollowListId" onclick="showFollowingList()">            <div class="col-80">Following</div>            <div class="col-20">'+d[0].followingCount+"</div>        </div>",document.getElementById("infoFetch").innerHTML=b,""==d[0].celebList||null==d[0].celebList)document.getElementById("celebfollowListId").setAttribute("onclick","");else{for(var h=0;h<d[0].celebList.length;h++)e='<div class="row" onclick="gotoCeleb(\''+d[0].celebList[h].celebId+'\')">                <div class="col-20">                    <div class="celeb-pro-pic-cont" style="background-image:url('+server+d[0].celebList[h].celebPhoto+')"></div>                </div>                <div class="col-80">                    <div class="celeb-pro-desc">                        <h3>'+d[0].celebList[h].celebName+"</h3>                        <p>                       "+d[0].celebList[h].celebQuote+"                             </p>                    </div>                </div>            </div>";document.getElementById("followingList").innerHTML=e}preLoaderOff()}else console.log("ELSE"),preLoaderOff()},f.open("POST",server+"fetchFriendProfile.php",!0);var g="proId="+localStorage.getItem("PROID")+"&rProId="+encodeURIComponent(a);f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function toggleLoaderFriendProfile(a){document.getElementById("loadMore").style.display="none",document.getElementById("proLoader").style.display="block",offsetFriendProfile+=10,fetchNextFriendProfile(offsetFriendProfile)}function showFollowingList(){document.getElementById("flDisp").style.display="block"}function hideFollowingList(){document.getElementById("flDisp").style.display="none"}function fetchNextFriendProfile(a){var b="",c="",d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status)if(console.log(d.responseText.trim()),!1!==d.responseText.trim())if(c=JSON.parse(d.responseText.trim()),0!==c.length){for(var a=0;a<c[0].detail.length;a++)if("photo"==c[0].detail[a].type)b+='<div class="row post-head" ><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+c[0].imageURL+')"></div></div><div class="col-60"><p>'+c[0].name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(c[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(c[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+c[0].detail[a].URL+'" /></div><div class="row post-comment"><div class="col-50" onclick="setPostId(\''+c[0].detail[a].id+"','"+c[0].detail[a].type+"','"+c[0].generatorId+"','"+c[0].imageURL+"','"+c[0].name+"','"+c[0].detail[a].at+"','"+c[0].detail[a].desc+"','"+c[0].detail[a].URL+"','"+c[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+c[0].detail[a].commentCount+' comments </div><div class="col-40 text-right" onclick="download(\''+server+c[0].detail[a].URL+'\',\'MSG/images\')" ><i class="fa fa-download"></i> </div><div class="col-10 text-right" onclick="share(\''+c[0].detail[a].id+'\')" ><i class="fa fa-share"></i> </div></div>';else if("text"==c[0].detail[a].type)b+='<div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+c[0].imageURL+')">                    </div>                </div>                <div class="col-60">                    <p>'+c[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(c[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(c[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setPostId(\''+c[0].detail[a].id+"','"+c[0].detail[a].type+"','"+c[0].generator_id+"','"+c[0].imageURL+"','"+c[0].name+"','"+c[0].detail[a].at+"','"+c[0].detail[a].desc+"','0','"+c[0].detail[a].commentCount+'\')">                <i class="fa fa-comment"></i> '+c[0].detail[a].commentCount+" comments            </div>";else if("video"==c[0].detail[a].type)b+='<div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+c[0].imageURL+')">                    </div>                </div>                <div class="col-60">                    <p>'+c[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(c[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(c[0].detail[a].desc)+'            </div>            <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+c[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setPostId(\''+c[0].detail[a].id+"','"+c[0].detail[a].type+"','"+c[0].generatorId+"','"+c[0].imageURL+"','"+c[0].name+"','"+c[0].detail[a].at+"','"+c[0].detail[a].desc+"','"+c[0].detail[a].URL+"','"+c[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+c[0].detail[a].commentCount+' comments </div><div class="col-40 text-right" onclick="download(\''+server+c[0].detail[a].URL+'\',\'MSG/videos\')" ><i class="fa fa-download"></i> </div><div class="col-10 text-right" onclick="share(\''+c[0].detail[a].id+'\')" ><i class="fa fa-share"></i> </div>            </div>';else if("audio"==c[0].detail[a].type)b+='<div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+c[0].imageURL+')">                    </div>                </div>                <div class="col-60">                    <p>'+c[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(c[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(c[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls>                    <source src="'+server+c[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setPostId(\''+c[0].detail[a].id+"','"+c[0].detail[a].type+"','"+c[0].generatorId+"','"+c[0].imageURL+"','"+c[0].name+"','"+c[0].detail[a].at+"','"+c[0].detail[a].desc+"','"+c[0].detail[a].URL+"','"+c[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+c[0].detail[a].commentCount+' comments </div><div class="col-40 text-right" onclick="download(\''+server+c[0].detail[a].URL+'\',\'MSG/audios\')" ><i class="fa fa-download"></i> </div><div class="col-10 text-right" onclick="share(\''+c[0].detail[a].id+'\')" ><i class="fa fa-share"></i> </div>        </div>';else if("file"==c[0].detail[a].type){var e="",f=c[0].detail[a].URL,g=f.substr(f.lastIndexOf(".")+1),h=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var i in h)i==g&&(console.log("File is: "+i),e="img/attach_icons/"+h[i]);b+='<div class="row post-head" ><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+c[0].imageURL+')"></div></div><div class="col-60"><p>'+c[0].name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(c[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(c[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+e+'" /></div><div class="row post-comment"><div class="col-50" onclick="setPostId(\''+c[0].detail[a].id+"','"+c[0].detail[a].type+"','"+c[0].generatorId+"','"+c[0].imageURL+"','"+c[0].name+"','"+c[0].detail[a].at+"','"+c[0].detail[a].desc+"','"+c[0].detail[a].URL+"','"+c[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+c[0].detail[a].commentCount+' comments </div><div class="col-40 text-right" onclick="download(\''+server+c[0].detail[a].URL+'\',\'MSG/files\')" ><i class="fa fa-download"></i> </div><div class="col-10 text-right" onclick="share(\''+c[0].detail[a].id+'\')" ><i class="fa fa-share"></i> </div></div>'}document.getElementById("postList").innerHTML+=b,document.getElementById("loadMore").style.display="block",document.getElementById("proLoader").style.display="none"}else document.getElementById("loadMore").innerHTML="<p>No More Posts</p>",document.getElementById("loadMore").setAttribute("onclick",""),document.getElementById("loadMore").style.display="block",document.getElementById("proLoader").style.display="none";else console.log("ELSE")},d.open("POST",server+"fetchNextFriendProfile.php",!0);var e="rProId="+localStorage.getItem("RELATIONPROFILEID")+"&offset="+a;console.log(e),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}function request(a){console.log(a.checked)}function custom_sort(a,b){return new Date(b.time).getTime()-new Date(a.time).getTime()}function custom_sort_div(a,b){var c=$(a).find(".date-con").attr("data-con-date"),d=$(b).find(".date-con").attr("data-con-date");return console.log("CSD"+c+":::"+d),new Date(d).getTime()-new Date(c).getTime()}function messageCounter(){var a="",b="",c="",d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status&&(console.log(d.responseText.trim()),d.responseText.trim())){a=JSON.parse(d.responseText.trim());for(var e=0;e<a.length;e++)"photo"==a[e].type?(b='<i class="fa fa-picture-o"></i>',c=emojione.unicodeToImage(a[e].desc)):"video"==a[e].type?(b='<i class="fa fa-video-camera"></i>',c=emojione.unicodeToImage(a[e].desc)):"audio"==a[e].type?(b='<i class="fa fa-headphones"></i>',c=emojione.unicodeToImage(a[e].desc)):"file"==a[e].type?(b='<i class="fa fa-file"></i>',c=emojione.unicodeToImage(a[e].desc)):"post"==a[e].type?(b='<i class="fa fa-address-card-o"></i>',c="Post"):"contact"==a[e].type?(b='<i class="fa fa-address-book-o"></i>',c="Contact"):"text"==a[e].type?(b="",c=emojione.unicodeToImage(a[e].desc)):"map"==a[e].type?(b='<i class="fa fa-location-arrow"></i>',c=emojione.unicodeToImage(a[e].desc)):(b="",c=""),"single"==a[e].format?"0"===a[e].currUnread&&(document.getElementById("pSingle"+a[e].chatterId).innerHTML=a[e].unread,document.getElementById("labelSingle"+a[e].chatterId).innerHTML=formatAMPM(new Date(a[e].time)),document.getElementById("labelSingle"+a[e].chatterId).setAttribute("data-con-date",a[e].time),document.getElementById("descSingle"+a[e].chatterId).innerHTML=b+" "+c):"group"==a[e].format&&-1!==a[e].currUnread.indexOf(","+localStorage.getItem("PROID")+",")&&(document.getElementById("pGroup"+a[e].id).innerHTML=a[e].unread,document.getElementById("labelGroup"+a[e].id).innerHTML=formatAMPM(new Date(a[e].time)),document.getElementById("labelGroup"+a[e].id).setAttribute("data-con-date",a[e].time),document.getElementById("descGroup"+a[e].id).innerHTML="<b>"+a[e].senderName+"</b> <i class='fa fa-angle-right' aria-hidden='true'></i> "+b+" "+c),console.log($("#chatListing .chat-cont-inner").sort(custom_sort_div).appendTo("#chatListing"))}},d.open("POST",server+"messageCounter.php",!0);var e="proId="+localStorage.getItem("PROID");d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}function fetchActiveChatList(a){preLoaderOn();var b=localStorage.getItem("PROID"),c=new XMLHttpRequest,d="",e=JSON.parse(localStorage.getItem("CONTACTS")),f="",g="",h="";c.onreadystatechange=function(){if(4==c.readyState&&200==c.status)if(console.log("CHAT:::"+c.responseText.trim()),!1!==c.responseText.trim()&&""!==c.responseText.trim())if(d=JSON.parse(c.responseText),console.log("CS:"+JSON.stringify(d.sort(custom_sort))),chatListData=d,0!==d.length){for(var a=0;a<d.length;a++)if("photo"==d[a].type?(g='<i class="fa fa-picture-o"></i>',h=emojione.unicodeToImage(d[a].desc)):"video"==d[a].type?(g='<i class="fa fa-video-camera"></i>',h=emojione.unicodeToImage(d[a].desc)):"audio"==d[a].type?(g='<i class="fa fa-headphones"></i>',h=emojione.unicodeToImage(d[a].desc)):"file"==d[a].type?(g='<i class="fa fa-file"></i>',h=emojione.unicodeToImage(d[a].desc)):"post"==d[a].type?(g='<i class="fa fa-address-card-o"></i>',h="Post"):"contact"==d[a].type?(g='<i class="fa fa-address-book-o"></i>',h="Contact"):"text"==d[a].type?(g="",h=emojione.unicodeToImage(d[a].desc)):"map"==d[a].type?(g='<i class="fa fa-location-arrow"></i>',h=emojione.unicodeToImage(d[a].desc)):(g="",h=""),"single"==d[a].format){console.log(d[a].format);for(var b=0;b<e.length;b++)e[b].is_user&&d[a].chatterId==e[b].system_id&&(f+='<div class="row chat-cont-inner" id="single'+d[a].chatterId+"\" onmousedown=\"holdChat(this,'single','"+d[a].chatterId+"')\" onmouseup=\"unHoldChat('"+d[a].chatterId+'\')">                <div class="col-20">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[b].imageURL)+')">                    </div>                </div>                <div class="col-80">                    <div class="dash-chat-notify">                        <label class="date-con" data-con-date="'+d[a].time+'" id="labelSingle'+d[a].chatterId+'">'+formatAMPM(new Date(d[a].time))+'</label>                        <p id="pSingle'+d[a].chatterId+'">'+d[a].unread+'</p>                    </div>                    <div class="dash-chat-name">'+e[b].name+'</div>                    <label class="dash-chat-desc" id="descSingle'+d[a].chatterId+'"> '+g+" "+h+"</label>                </div>            </div>")}else"group"==d[a].format&&(console.log("GRP:::"+d[a].format),""==d[a].senderId||null==d[a].senderId?f+='<div class="row chat-cont-inner" id="group'+d[a].id+"\" onmousedown=\"holdChat(this,'group','"+d[a].id+"')\" onmouseup=\"unHoldChatGroup('"+d[a].id+"','"+d[a].status+'\')">                <div class="col-20">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[a].imageURL)+')">                    </div>                </div>                <div class="col-80">                    <div class="dash-chat-notify">                        <label class="date-con" data-con-date="'+d[a].created+'">'+formatAMPM(new Date(d[a].created))+'</label>                    </div>                    <div class="dash-chat-name">'+d[a].name+'</div>                    <label class="dash-chat-desc"><b> Group Created on '+sqlToJsDate(d[a].created)+"</b>  </label>                </div>            </div>":f+='<div class="row chat-cont-inner" id="group'+d[a].id+"\" onmousedown=\"holdChat(this,'group','"+d[a].id+"')\" onmouseup=\"unHoldChatGroup('"+d[a].id+"','"+d[a].status+'\')">                <div class="col-20">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[a].imageURL)+')">                    </div>                </div>                <div class="col-80">                    <div class="dash-chat-notify">                        <label class="date-con" data-con-date="'+d[a].time+'" id="labelGroup'+d[a].id+'">'+formatAMPM(new Date(d[a].time))+'</label>                        <p id="pGroup'+d[a].id+'">'+d[a].unread+'</p>                    </div>                    <div class="dash-chat-name">'+d[a].name+'</div>                    <label class="dash-chat-desc" id="descGroup'+d[a].id+'"><b>'+d[a].senderName+"</b> <i class='fa fa-angle-right' aria-hidden='true'></i> "+g+" "+h+"</label>                </div>            </div>");document.getElementById("chatListing").innerHTML=f,preLoaderOff()}else document.getElementById("blankChat").style.display="block",preLoaderOff(),console.log("else of chat length");else document.getElementById("blankChat").style.display="block",preLoaderOff(),console.log("else of chat"),console.log("chat blank")},c.open("POST",server+"fetchActiveChatList.php",!0);var i="proId="+b;c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(i)}function chatSearch(a){document.getElementById("crossHide").style.display="table-cell";var c=(localStorage.getItem("PROID"),chatListData),d=JSON.parse(localStorage.getItem("CONTACTS")),e="",f="",g="";chatListData=c;for(var h=0;h<c.length;h++)if("photo"==c[h].type?(f='<i class="fa fa-picture-o"></i>',g=emojione.unicodeToImage(c[h].desc)):"video"==c[h].type?(f='<i class="fa fa-video-camera"></i>',g=emojione.unicodeToImage(c[h].desc)):"audio"==c[h].type?(f='<i class="fa fa-headphones"></i>',g=emojione.unicodeToImage(c[h].desc)):"file"==c[h].type?(f='<i class="fa fa-file"></i>',g=emojione.unicodeToImage(c[h].desc)):"post"==c[h].type?(f='<i class="fa fa-address-card-o"></i>',g="Post"):"contact"==c[h].type?(f='<i class="fa fa-address-book-o"></i>',g="Contact"):"text"==c[h].type?(f="",g=emojione.unicodeToImage(c[h].desc)):"map"==c[h].type?(f='<i class="fa fa-location-arrow"></i>',g=emojione.unicodeToImage(c[h].desc)):(f="",g=""),"single"==c[h].format){console.log(c[h].format);for(var i=0;i<d.length;i++)-1!=d[i].name.toLowerCase().indexOf(a.value.toLowerCase())&&d[i].is_user&&c[h].chatterId==d[i].system_id&&(e+='<div class="row chat-cont-inner" id="single'+c[h].chatterId+"\" onmousedown=\"holdChat(this,'single','"+c[h].chatterId+"')\" onmouseup=\"unHoldChat('"+c[h].chatterId+'\')">                <div class="col-20">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[i].imageURL)+')">                    </div>                </div>                <div class="col-80">                    <div class="dash-chat-notify">                        <label>'+formatAMPM(new Date(c[h].time))+'</label>                    </div>                    <div class="dash-chat-name">'+d[i].name+'</div>                    <label class="dash-chat-desc"> '+f+" "+g+"</label>                </div>            </div>")}else"group"==c[h].format&&(console.log("GRP:::"+c[h].format),-1!=c[h].name.toLowerCase().indexOf(a.value.toLowerCase())&&(""==c[h].senderId||null==c[h].senderId?e+='<div class="row chat-cont-inner" id="group'+c[h].id+"\" onmousedown=\"holdChat(this,'group','"+c[h].id+"')\" onmouseup=\"unHoldChatGroup('"+c[h].id+"','"+c[h].status+'\')">                <div class="col-20">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(c[h].imageURL)+')">                    </div>                </div>                <div class="col-80">                    <div class="dash-chat-notify">                        <label>'+formatAMPM(new Date(c[h].created))+'</label>                    </div>                    <div class="dash-chat-name">'+c[h].name+'</div>                    <label class="dash-chat-desc"><b> Group Created on '+sqlToJsDate(c[h].created)+"</b>  </label>                </div>            </div>":e+='<div class="row chat-cont-inner" id="group'+c[h].id+"\" onmousedown=\"holdChat(this,'group','"+c[h].id+"')\" onmouseup=\"unHoldChatGroup('"+c[h].id+"','"+c[h].status+'\')">                <div class="col-20">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(c[h].imageURL)+')">                    </div>                </div>                <div class="col-80">                    <div class="dash-chat-notify">                        <label>'+formatAMPM(new Date(c[h].time))+'</label>                    </div>                    <div class="dash-chat-name">'+c[h].name+'</div>                    <label class="dash-chat-desc"><b>'+c[h].senderName+"</b> <i class='fa fa-angle-right' aria-hidden='true'></i> "+f+" "+g+"</label>                </div>            </div>"));document.getElementById("chatListing").innerHTML=e}function chatClear(){var b=(localStorage.getItem("PROID"),chatListData),c=JSON.parse(localStorage.getItem("CONTACTS")),d="",e="",f="";chatListData=b;for(var g=0;g<b.length;g++)if("photo"==b[g].type?(e='<i class="fa fa-picture-o"></i>',f=emojione.unicodeToImage(b[g].desc)):"video"==b[g].type?(e='<i class="fa fa-video-camera"></i>',f=emojione.unicodeToImage(b[g].desc)):"audio"==b[g].type?(e='<i class="fa fa-headphones"></i>',f=emojione.unicodeToImage(b[g].desc)):"file"==b[g].type?(e='<i class="fa fa-file"></i>',f=emojione.unicodeToImage(b[g].desc)):"post"==b[g].type?(e='<i class="fa fa-address-card-o"></i>',f="Post"):"contact"==b[g].type?(e='<i class="fa fa-address-book-o"></i>',f="Contact"):"text"==b[g].type?(e="",f=emojione.unicodeToImage(b[g].desc)):"map"==b[g].type?(e='<i class="fa fa-location-arrow"></i>',f=emojione.unicodeToImage(b[g].desc)):(e="",f=""),"single"==b[g].format){console.log(b[g].format);for(var h=0;h<c.length;h++)c[h].is_user&&b[g].chatterId==c[h].system_id&&(d+='<div class="row chat-cont-inner" id="single'+b[g].chatterId+"\" onmousedown=\"holdChat(this,'single','"+b[g].chatterId+"')\" onmouseup=\"unHoldChat('"+b[g].chatterId+'\')">                <div class="col-20">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(c[h].imageURL)+')">                    </div>                </div>                <div class="col-80">                    <div class="dash-chat-notify">                        <label>'+formatAMPM(new Date(b[g].time))+'</label>                    </div>                    <div class="dash-chat-name">'+c[h].name+'</div>                    <label class="dash-chat-desc"> '+e+" "+f+"</label>                </div>            </div>")}else"group"==b[g].format&&(console.log("GRP:::"+b[g].format),""==b[g].senderId||null==b[g].senderId?d+='<div class="row chat-cont-inner" id="group'+b[g].id+"\" onmousedown=\"holdChat(this,'group','"+b[g].id+"')\" onmouseup=\"unHoldChatGroup('"+b[g].id+"','"+b[g].status+'\')">                <div class="col-20">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(b[g].imageURL)+')">                    </div>                </div>                <div class="col-80">                    <div class="dash-chat-notify">                        <label>'+formatAMPM(new Date(b[g].created))+'</label>                    </div>                    <div class="dash-chat-name">'+b[g].name+'</div>                    <label class="dash-chat-desc"><b> Group Created on '+sqlToJsDate(b[g].created)+"</b>  </label>                </div>            </div>":d+='<div class="row chat-cont-inner" id="group'+b[g].id+"\" onmousedown=\"holdChat(this,'group','"+b[g].id+"')\" onmouseup=\"unHoldChatGroup('"+b[g].id+"','"+b[g].status+'\')">                <div class="col-20">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(b[g].imageURL)+')">                    </div>                </div>                <div class="col-80">                    <div class="dash-chat-notify">                        <label>'+formatAMPM(new Date(b[g].time))+'</label>                    </div>                    <div class="dash-chat-name">'+b[g].name+'</div>                    <label class="dash-chat-desc"><b>'+b[g].senderName+"</b> <i class='fa fa-angle-right' aria-hidden='true'></i> "+e+" "+f+"</label>                </div>            </div>");document.getElementById("chatListing").innerHTML=d}function holdChat(a,b,c){return pressTimer=window.setTimeout(function(){console.log("FM:"+b+":::ID:"+c);var a="";"single"==b?a='<li class="item" onclick="deleteSingleChatRow('+c+')">Delete</li>':"group"==b&&(a='<li class="item" onclick="deleteGroupChatRow('+c+')">Delete</li>'),navigator.vibrate(500),document.getElementById("chatActionOptions").innerHTML=a,document.getElementById("chatAction").style.display="table"},1e3),!1}function unHoldChat(a){return clearTimeout(pressTimer),openChat(a),!1}function unHoldChatGroup(a,b){return clearTimeout(pressTimer),openGroupChat(a,b),!1}function deleteSingleChatRow(a){if(console.log(a),confirm("Are you sure you want to remove this conversation?")){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),!1!==b.responseText.trim()?$("#single"+a).remove():console.log("error"))},b.open("POST",server+"deleteSingleChatRow.php",!0);var c="friId="+a+"&proId="+localStorage.getItem("PROID");b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}}function deleteGroupChatRow(a){if(console.log(a),confirm("Are you sure you want to remove this conversation?")){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),!1!==b.responseText.trim()?$("#group"+a).remove():console.log("error"))},b.open("POST",server+"deleteGroupChatRow.php",!0);var c="grpId="+a+"&proId="+localStorage.getItem("PROID");b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}}function sendStatus(a){var b=/[^\s]+/;a.value.match(b)?(document.getElementById("sendDisable").style.display="none",document.getElementById("sendEnable").style.display="block"):(document.getElementById("sendEnable").style.display="none",document.getElementById("sendDisable").style.display="block")}function sendStatusEn(){document.getElementById("sendDisable").style.display="none",document.getElementById("sendEnable").style.display="block"}function holdSingleChat(a,b,c){var d=a.getAttribute("data-bubble-id"),e=a.getAttribute("data-bubble-link");return pressThreadTimer=window.setTimeout(function(){navigator.vibrate(500),c="MSG/"+c,console.log("ID:"+d+":::LINK:"+e),console.log("ST:"+b+":::FL:"+c);var a="";a=1==b?'<li class="item" onclick="deleteBubble(\''+d+'\')">Delete</li><li class="item" onclick="download(\''+server+e+"','"+c+"')\">Download</li>":'<li class="item" onclick="deleteBubble('+d+')">Delete</li>',document.getElementById("chatActionOptions").innerHTML=a,document.getElementById("chatAction").style.display="table"},1e3),!1}function unHoldSingleChat(){return clearTimeout(pressThreadTimer),!1}function deleteBubble(a){if(console.log(a),confirm("Are you sure you want to remove this chat?")){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),!1!==b.responseText.trim()?$("#"+a).remove():console.log("error"))},b.open("POST",server+"deleteBubble.php",!0);var c="id="+a;b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}}function fetchHelpOnce(a){prevId=0,localStorage.setItem("RELATIONPROFILEID",a);for(var b=JSON.parse(localStorage.getItem("CONTACTS")),c=0;c<b.length;c++)b[c].is_user&&b[c].system_id==a&&(document.getElementById("chatterName").innerHTML=b[c].name,document.getElementById("chatterProImage").style.backgroundImage="url("+server+getThumb(b[c].imageURL)+")",checkOffline(a),setInterval(function(){checkOffline(a)},1e4));helperOnce=!1}function fetchSingleChat(){if(!mutualExclusive){var a=localStorage.getItem("PROID"),b=localStorage.getItem("SINGLECHATID");helperOnce&&fetchHelpOnce(b);var c="",d=new XMLHttpRequest,e="",f="",g=[],h=[];d.onreadystatechange=function(){if(4==d.readyState&&200==d.status)if(console.log("CHAT:::"+d.responseText.trim()),!1!==d.responseText.trim()&&""!==d.responseText.trim()){e=JSON.parse(d.responseText.trim()),prevId=e[0].id,nextId=e[e.length-1].id,nextOffset=10,console.log(prevId+":::"+nextId+":::"+nextOffset);for(var i=e.length-1;i>=0;i--)if(e[i].senderId==a)if("text"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'text\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                   <div class="chat-content"> '+emojione.unicodeToImage(e[i].message)+"</div>                </div>            </div>        </div>";else if("video"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'videos\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <video class="msg-bubble-img" preload="auto" controls>                    <source src="'+server+e[i].link+'" type="video/mp4">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </video>                    <div class="chat-content">'+emojione.unicodeToImage(e[i].message)+"</div>                </div>            </div>        </div>";else if("audio"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'audios\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <audio class="msg-bubble-img-audio" preload="auto" controls>                    <source src="'+server+e[i].link+'" type="audio/mpeg">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </audio>                    <div class="chat-content"> '+emojione.unicodeToImage(e[i].message)+"</div>                </div>            </div>        </div>";else if("photo"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'images\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <p class="msg-bubble-img"  style="background-image:url('+server+getThumb(e[i].link)+')" onclick="profileFullImage(this)">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </p>                    <div class="chat-content"> '+emojione.unicodeToImage(e[i].message)+"</div>                </div>            </div>        </div>";else if("file"==e[i].type){var j=e[i].link,k=j.substr(j.lastIndexOf(".")+1),l=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var m in l)m==k&&(console.log("File is: "+m),holder="img/attach_icons/"+l[m]);c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'files\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                   <a href="'+e[i].link+'" target="_blank"> <p class="msg-bubble-img"  style="background-image:url('+holder+')"></a>                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </p>                    <div class="chat-content"> '+emojione.unicodeToImage(e[i].message)+"</div>                </div>            </div>        </div>"}else if("contact"==e[i].type){var n=e[i].message.split(",");console.log(n[0]+":::"+n[1]),c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'contact\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                          '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-contact">                        <div class="row">                            <div class="col-30 row col-center"><div class="msg-contact-pic"></div></div>                            <div class="col-70">                                <p class="name">'+n[0]+'</p>                                <p class="contact">'+n[1]+'</p>                            </div>                        </div>                        <div class="save-contact">                        </div>                    </div>                </div>            </div>        </div>'}else if("post"==e[i].type){console.log("IN");var o="";console.log(e[i].message);var q=JSON.parse(e[i].message);console.log(q);var r=e[i].message.replace(/"/g,"~");if(console.log("innerJson:"+r),"photo"==q.type)"images",o='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'images\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+q.title+'">                            <div class="row post-head" >                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(q.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+q.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(q.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+q.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+server+getThumb(q.title)+'" />                            </div>                        </div>';else if("text"==q.type)"text",o='<div class="shared-post" onmousedown="holdSingleChat(this,0,\'text\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+q.title+'">                            <div class="row post-head" >                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(q.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+q.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(q.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+q.desc+"                            </div>                                                 </div>";else if("video"==q.type)"videos",o='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'videos\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+q.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(q.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+q.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(q.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+q.desc+'                            </div>                                                     <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+q.title+'" type="video/mp4">                </video>                            </div>                        </div>';else if("audio"==q.type)"audios",o='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'audios\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+q.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(q.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+q.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(q.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+q.desc+'                            </div>                                                     <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+q.title+'" type="audio/mpeg">                </audio>                            </div>                        </div>';else if("file"==q.type){"files";var s="",t=q.title,u=t.substr(t.lastIndexOf(".")+1),v=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var w in v)w==u&&(console.log("File is: "+w),s="img/attach_icons/"+v[w]);o='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'files\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+q.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(q.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+q.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(q.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+q.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+s+'" />                            </div>                        </div>'}c+='<div class="row chat section" id="'+e[i].id+'"  >            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-content">'+o+"</div>                </div>            </div>        </div>"}else"map"==e[i].type&&(f=Math.floor(89999*Math.random()+1e4),c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'map\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[i].time))+'<span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                   <a href="http://www.google.com/maps/place/'+e[i].link+"/@"+e[i].link+',15z">                    <div class="msg-bubble-img" id="map'+f+'">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </div>                   </a>                   <div class="chat-content">'+emojione.unicodeToImage(e[i].message)+" </div>                </div>            </div>        </div>",g.push(e[i].link),h.push(f));else if(e[i].senderId==b)if("text"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'text\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                    <div class="chat-content">'+emojione.unicodeToImage(e[i].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>';else if("video"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'videos\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                    <video controls preload="auto" class="msg-bubble-img" >                       <source src="'+server+e[i].link+'" type="video/mp4">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </video>                  <div class="chat-content">'+emojione.unicodeToImage(e[i].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>';else if("audio"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'audios\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                    <audio controls class="msg-bubble-img-audio" preload="auto">                       <source src="'+server+e[i].link+'" type="audio/mpeg">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </audio>                  <div class="chat-content"> '+emojione.unicodeToImage(e[i].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>';else if("photo"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'images\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                    <p  class="msg-bubble-img" style="background-image:url('+server+getThumb(e[i].link)+')" onclick="profileFullImage(this)">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </p>                   <div class="chat-content"> '+emojione.unicodeToImage(e[i].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>';else if("file"==e[i].type){var x="",y=e[i].link,z=y.substr(y.lastIndexOf(".")+1),A=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var B in A)B==z&&(console.log("File is: "+B),x="img/attach_icons/"+A[B]);c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'files\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                   <a href="'+e[i].link+'" target="_blank"> <p class="msg-bubble-img"  style="background-image:url('+x+')"></a>                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </p>                    <div class="chat-content"> '+emojione.unicodeToImage(e[i].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>'}else if("contact"==e[i].type){var C=e[i].message.split(",");console.log(C[0]+":::"+C[1]),c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'contacts\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                       <div class="chat-contact">                        <div class="row">                            <div class="col-30 row col-center"><div class="msg-contact-pic"></div></div>                            <div class="col-70">                                <p class="name">'+C[0]+'</p>                                <p class="contact">'+C[1]+'</p>                            </div>                        </div>                        <div class="save-contact" onclick="saveContact(\''+C[0]+"','"+C[1]+'\')">                            Save Contact                        </div>                      </div>                </div>            </div>            <div class="col-20"></div>        </div>'}else if("post"==e[i].type){console.log("IN R");var D="",F=JSON.parse(e[i].message);console.log(F);var G=e[i].message.replace(/"/g,"~");if(console.log("innerJson:"+G),"photo"==F.type)"images",D='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'images\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+F.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(F.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+F.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(F.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+F.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+server+getThumb(F.title)+'" />                            </div>                        </div>';else if("text"==F.type)"text",D='<div class="shared-post" onmousedown="holdSingleChat(this,0,\'text\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+F.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(F.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+F.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(F.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+F.desc+"                            </div>                                                 </div>";else if("video"==F.type)"videos",D='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'text\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+F.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(F.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+F.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(F.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+F.desc+'                            </div>                                                     <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+F.title+'" type="video/mp4">                </video>                            </div>                        </div>';else if("audio"==F.type)"audios",D='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'audios\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+F.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(F.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+F.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(F.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+F.desc+'                            </div>                                                     <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+F.title+'" type="audio/mpeg">                </audio>                            </div>                        </div>';else if("file"==F.type){"files";var H="",I=F.title,J=I.substr(I.lastIndexOf(".")+1),K=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var L in K)L==J&&(console.log("File is: "+L),H="img/attach_icons/"+K[L]);D='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'files\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+F.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(F.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+F.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(F.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+F.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+H+'" />                            </div>                        </div>'}c+='<div class="row chat section" id="'+e[i].id+'" >            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                   <div class="chat-content">'+D+'</div>                </div>            </div>            <div class="col-20"></div>        </div>'}else"map"==e[i].type&&(f=Math.floor(89999*Math.random()+1e4),c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'maps\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                   <a href="http://www.google.com/maps/place/'+e[i].link+"/@"+e[i].link+',15z">                    <div  class="msg-bubble-img" id="map'+f+'">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </div>                   </a>                    <div class="chat-content">'+emojione.unicodeToImage(e[i].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>',g.push(e[i].link),h.push(f));document.getElementById("chat").innerHTML+=c,$("html, body").scrollTop($(document).height()),$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3);for(var M=0;M<h.length;M++){var N=g[M].split(",");loadmap("map"+h[M],N[0],N[1])}}else console.log("no result")},d.open("POST",server+"fetchSingleChat.php",!0);var i="proId="+a+"&singleChatId="+b+"&prev="+prevId;console.log(i),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(i)}}function fetchNextSingleChat(){if(!mutualExclusive){newLoaderOn();var a=localStorage.getItem("PROID"),b=localStorage.getItem("SINGLECHATID"),c="",d=new XMLHttpRequest,e="",f="",g=[],h=[];d.onreadystatechange=function(){if(4==d.readyState&&200==d.status)if(console.log("CHAT:::"+d.responseText.trim()),!1!==d.responseText.trim()&&""!==d.responseText.trim()){e=JSON.parse(d.responseText.trim()),nextId=e[e.length-1].id,nextOffset+=10,console.log("NEXTID:"+nextId+"NEXTOFF"+nextOffset);for(var i=e.length-1;i>=0;i--)if(e[i].senderId==a)if("text"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'text\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <p>'+emojione.unicodeToImage(e[i].message)+"</p>                </div>            </div>        </div>";else if("video"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'videos\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <video class="msg-bubble-img" preload="auto"  controls>                    <source src="'+server+e[i].link+'" type="video/mp4">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </video>                    <p> '+emojione.unicodeToImage(e[i].message)+"</p>                </div>            </div>        </div>";else if("audio"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'audios\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <audio class="msg-bubble-img-audio" preload="auto" controls>                    <source src="'+server+e[i].link+'" type="audio/mpeg">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </audio>                    <p> '+emojione.unicodeToImage(e[i].message)+"</p>                </div>            </div>        </div>";else if("photo"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'images\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <p class="msg-bubble-img"  style="background-image:url('+server+getThumb(e[i].link)+')" onclick="profileFullImage(this)">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </p>                    <p> '+emojione.unicodeToImage(e[i].message)+"</p>                </div>            </div>        </div>";else if("file"==e[i].type){var j=e[i].link,k=j.substr(j.lastIndexOf(".")+1),l=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var m in l)m==k&&(console.log("File is: "+m),holder="img/attach_icons/"+l[m]);c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'files\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                   <a href="'+e[i].link+'" target="_blank"> <p class="msg-bubble-img"  style="background-image:url('+holder+')"></a>                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </p>                    <p> '+emojione.unicodeToImage(e[i].message)+"</p>                </div>            </div>        </div>"}else if("contact"==e[i].type){var n=e[i].message.split(",");console.log(n[0]+":::"+n[1]),c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'contacts\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                          '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-contact">                        <div class="row">                            <div class="col-30 row col-center"><div class="msg-contact-pic"></div></div>                            <div class="col-70">                                <p class="name">'+n[0]+'</p>                                <p class="contact">'+n[1]+'</p>                            </div>                        </div>                        <div class="save-contact">                        </div>                    </div>                </div>            </div>        </div>'}else if("post"==e[i].type){console.log("IN");var o="";console.log(e[i].message);var q=JSON.parse(e[i].message);console.log(q);var r=e[i].message.replace(/"/g,"~");if(console.log("innerJson:"+r),"photo"==q.type)"images",o='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'images\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+q.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(q.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+q.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(q.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+q.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+server+getThumb(q.title)+'" />                            </div>                        </div>';else if("text"==q.type)"text",o='<div class="shared-post" onmousedown="holdSingleChat(this,0,\'text\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+q.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(q.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+q.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(q.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+q.desc+"                            </div>                                                 </div>";else if("video"==q.type)"videos",o='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'videos\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+q.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(q.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+q.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(q.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+q.desc+'                            </div>                                                     <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+q.title+'" type="video/mp4">                </video>                            </div>                        </div>';else if("audio"==q.type)"audios",o='<div class="shared-post">                            <div class="row post-head" onmousedown="holdSingleChat(this,1,\'audios\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+q.title+'">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(q.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+q.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(q.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+q.desc+'                            </div>                                                     <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+q.title+'" type="audio/wav">                </audio>                            </div>                        </div>';else if("file"==q.type){"files";var s="",t=q.title,u=t.substr(t.lastIndexOf(".")+1),v=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var w in v)w==u&&(console.log("File is: "+w),s="img/attach_icons/"+v[w]);o='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'files\')" onmouseup="unHoldSingleChat()"data-bubble-id="'+e[i].id+'" data-bubble-link="'+q.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(q.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+q.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(q.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+q.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+s+'" />                            </div>                        </div>'}c+='<div class="row chat section" id="'+e[i].id+'" >            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-content">'+o+"</div>                </div>            </div>        </div>"}else"map"==e[i].type&&(f=Math.floor(89999*Math.random()+1e4),c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'maps\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[i].time))+'<span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                   <a href="http://www.google.com/maps/place/'+e[i].link+"/@"+e[i].link+',15z">                    <div class="msg-bubble-img" id="map'+f+'">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </div>                   </a>                    <p>'+emojione.unicodeToImage(e[i].message)+" </p>                </div>            </div>        </div>",g.push(e[i].link),h.push(f));else if(e[i].senderId==b)if("text"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'text\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                    <p>'+emojione.unicodeToImage(e[i].message)+'</p>                </div>            </div>            <div class="col-20"></div>        </div>';else if("video"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'videos\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                    <video controls preload="auto" class="msg-bubble-img" >                       <source src="'+server+e[i].link+'" type="video/mp4">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </video>                    <p> '+emojione.unicodeToImage(e[i].message)+'</p>                </div>            </div>            <div class="col-20"></div>        </div>';else if("audio"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'audios\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                    <audio controls preload="auto" class="msg-bubble-img-audio" >                       <source src="'+server+e[i].link+'" type="audio/mpeg">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </audio>                    <p> '+emojione.unicodeToImage(e[i].message)+'</p>                </div>            </div>            <div class="col-20"></div>        </div>';else if("photo"==e[i].type)c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'images\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                    <p  class="msg-bubble-img" style="background-image:url('+server+getThumb(e[i].link)+')" onclick="profileFullImage(this)">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </p>                    <p> '+emojione.unicodeToImage(e[i].message)+'</p>                </div>            </div>            <div class="col-20"></div>        </div>';else if("file"==e[i].type){var x=e[i].link,y=x.substr(x.lastIndexOf(".")+1),z=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var A in z)A==y&&(console.log("File is: "+A),holder2="img/attach_icons/"+z[A]);c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,1,\'files\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                   <a href="'+e[i].link+'" target="_blank"> <p class="msg-bubble-img"  style="background-image:url('+holder2+')"></a>                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </p>                    <p> '+emojione.unicodeToImage(e[i].message)+'</p>                </div>            </div>            <div class="col-20"></div>        </div>'}else if("contact"==e[i].type){var B=e[i].message.split(",");console.log(B[0]+":::"+B[1]),c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'contacts\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                       <div class="chat-contact">                        <div class="row">                            <div class="col-30 row col-center"><div class="msg-contact-pic"></div></div>                            <div class="col-70">                                <p class="name">'+B[0]+'</p>                                <p class="contact">'+B[1]+'</p>                            </div>                        </div>                        <div class="save-contact" onclick="saveContact(\''+B[0]+"','"+B[1]+'\')">                            Save Contact                        </div>                      </div>                </div>            </div>            <div class="col-20"></div>        </div>'}else if("post"==e[i].type){console.log("IN R");var C="",E=JSON.parse(e[i].message);console.log(E);var F=e[i].message.replace(/"/g,"~");if(console.log("innerJson:"+F),"photo"==E.type)"images",C='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'images\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+E.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(E.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+E.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(E.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+E.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+server+getThumb(E.title)+'" />                            </div>                        </div>';else if("text"==E.type)"text",C='<div class="shared-post" onmousedown="holdSingleChat(this,0,\'text\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+E.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(E.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+E.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(E.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+E.desc+"                            </div>                                                 </div>";else if("video"==E.type)"videos",C='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'videos\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+E.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(E.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+E.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(E.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+E.desc+'                            </div>                                                     <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+E.title+'" type="video/mp4">                </video>                            </div>                        </div>';else if("audio"==E.type)"audios",C='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'audios\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+E.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(E.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+E.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(E.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+E.desc+'                            </div>                                                     <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+E.title+'" type="audio/wav">                </audio>                            </div>                        </div>';else if("file"==E.type){"files";var G="",H=E.title,I=H.substr(H.lastIndexOf(".")+1),J=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var K in J)K==I&&(console.log("File is: "+K),G="img/attach_icons/"+J[K]);C='<div class="shared-post" onmousedown="holdSingleChat(this,1,\'files\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+E.title+'">                            <div class="row post-head">                                <div class="col-20 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(E.imageURL)+')"></div>                                </div>                                <div class="col-80" ><p>'+E.userName+'</p>                                <div class="post-time">'+formatAMPM(new Date(E.time))+'</div></div>                            </div>                                                        <div class="post-desc" >                               '+E.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+G+'" />                            </div>                        </div>'}c+='<div class="row chat section" id="'+e[i].id+'"  >            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                   <div class="chat-content">'+C+'</div>                </div>            </div>            <div class="col-20"></div>        </div>'}else"map"==e[i].type&&(f=Math.floor(89999*Math.random()+1e4),c+='<div class="row chat section" id="'+e[i].id+'" onmousedown="holdSingleChat(this,0,\'maps\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+e[i].id+'" data-bubble-link="'+e[i].link+'">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(e[i].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                        </div>                    </div>                   <a href="http://www.google.com/maps/place/'+e[i].link+"/@"+e[i].link+',15z">                    <div  class="msg-bubble-img" id="map'+f+'">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </div>                   </a>                    <p>'+emojione.unicodeToImage(e[i].message)+'</p>                </div>            </div>            <div class="col-20"></div>        </div>',g.push(e[i].link),h.push(f));document.getElementById("chat").innerHTML=c+document.getElementById("chat").innerHTML,newLoaderOff(),$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3);for(var L=0;L<h.length;L++){var M=g[L].split(",");loadmap("map"+h[L],M[0],M[1])}$("html, body").scrollTop($(document).height())}else console.log("no chat"),document.getElementById("loadMore").innerHTML="No More Chats",newLoaderOff()},d.open("POST",server+"fetchNextSingleChat.php",!0);var i="proId="+a+"&singleChatId="+b+"&next="+nextId;console.log(i),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(i)}}function sendSingleChat(){document.getElementById("sendEnable").style.display="none",document.getElementById("sendDisable").style.display="block";var a=localStorage.getItem("PROID"),b=localStorage.getItem("SINGLECHATID"),c=document.getElementById("chatMessage").value,d=new XMLHttpRequest;d.onreadystatechange=function(){if(mutualExclusive=!0,4==d.readyState&&200==d.status)if(console.log(d.responseText.trim()),d.responseText.trim()){var a=d.responseText.trim().split(",");if(document.getElementById("chatMessage").value="",0!==prevId){var b='<div class="row chat section" id="'+a[0]+'" onmousedown="holdSingleChat(this,0,\'text\')" onmouseup="unHoldSingleChat()" data-bubble-id="'+a[0]+'" data-bubble-link="'+a[1]+'">            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date)+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-content">'+emojione.unicodeToImage(c)+"</div>                </div>            </div>        </div>";document.getElementById("chat").innerHTML+=b,$("html, body").scrollTop($(document).height())}mutualExclusive=!1}else console.log("error"),mutualExclusive=!1},d.open("POST",server+"sendSingleChat.php",!0);var e="proId="+a+"&chatterId="+b+"&message="+encodeURIComponent(c);console.log(e),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}function chatVideoOptions(){closepopupplain(),$(".attach-sub-menu").hide(),document.getElementById("videoAttach").style.display="table"}function chatAudioOptions(){closepopupplain(),$(".attach-sub-menu").hide(),document.getElementById("audioAttach").style.display="table"}function chatPhotoOptions(){closepopupplain(),$(".attach-sub-menu").hide(),document.getElementById("photoAttach").style.display="table"}function closeAttachOptions(){$(".attach-sub-menu").hide()}function chatTakeVideo(a){var b=function(a){var b,c,d;for(b=0,d=a.length;b<d;b+=1)c=a[b].fullPath,checkURL=c,document.getElementById("preBubbleImgVideo").src=c,closeAttachOptions(),chatPopup("preBubbleVideo")},c=function(a){navigator.notification.console.log("Error code: "+a.code,null,"Capture Error")};navigator.device.capture.captureVideo(b,c,{limit:1,quality:0})}function chatGetVideo(a){function b(a){checkURL=a,document.getElementById("preBubbleImgVideo").src=a,closeAttachOptions(),chatPopup("preBubbleVideo")}function c(a){console.log("Failed because: "+a)}console.log("get vid"),navigator.camera.getPicture(b,c,{quality:50,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.VIDEO,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function chatUploadVideo(){function h(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("bubbleDescVideo").value="",document.getElementById("preBubbleImgVideo").src="",setTimeout(function(){$("video").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3)}function i(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}var a=Math.floor(89999*Math.random()+1e4);mutualExclusive=!0;var b='<div class="row chat section" id="vid'+a+'">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date)+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <video class="msg-bubble-img" preload="auto" controls>                    <source src="'+checkURL+'" type="video/mp4">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </video>                    <div class="chat-content"> '+emojione.unicodeToImage(document.getElementById("bubbleDescVideo").value)+'</div>                 <div class="msg-upload-progress-cont">                   <div class="msg-upload-progress" id="'+a+'"></div>               </div>              </div>            </div>        </div>';closeChatPopup(),document.getElementById("chat").innerHTML+=b,$("html, body").scrollTop($(document).height()),mutualExclusive=!1;var c=encodeURI(server+"chatUploadVideo.php?proId="+localStorage.getItem("PROID")+"&chatterId="+localStorage.getItem("SINGLECHATID")+"&desc="+document.getElementById("bubbleDescVideo").value),d=new FileUploadOptions;d.fileKey="file",d.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),d.mimeType="video/3gpp",d.httpMethod="POST";var e={};e.proId=localStorage.getItem("PROID"),e.chatterId=localStorage.getItem("SINGLECHATID"),e.desc=document.getElementById("bubbleDescVideo").value,d.params=e,d.chunkedMode=!1;var f={headerParam:"headerValue"};d.headers=f;var g=new FileTransfer;g.onprogress=function(b){if($("#"+a).css("width","0%"),b.lengthComputable){var c=Math.floor(b.loaded/b.total*100);$("#"+a).css("width",c+"%")}else""===progressStatus.innerHTML?$("#"+a).css("width","0%"):$("#"+a).css("width","100%")},g.upload(checkURL,c,h,i,d)}function chatTakeAudio(a){pendingAudio=!0;var b=function(a){var b,c,d;for(b=0,d=a.length;b<d;b+=1)c=a[b].fullPath,checkURL=c,document.getElementById("preBubbleImgAudio").src=c,closeAttachOptions(),chatPopup("preBubbleAudio")},c=function(a){alert("Sorry! Your phone dosen't support this functionality."),console.log("Error code: "+a,null,"Capture Error")};navigator.device.capture.captureAudio(b,c,{limit:1})}function chatGetAudio(a){function b(a){checkURL=a;var b=checkURL.substr(checkURL.lastIndexOf(".")+1);"wav"==b||"amr"==b||"mp3"==b?(checkURL=a,document.getElementById("preBubbleImgAudio").src=a,chatPopup("preBubbleAudio")):alert("Audio File Format Not Supported."),closeAttachOptions()}function c(a){console.log("Failed because: "+a)}navigator.camera.getPicture(b,c,{quality:100,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.ALLMEDIA,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function chatUploadAudio(){function h(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("bubbleDescAudio").value="",document.getElementById("preBubbleImgAudio").src="",setTimeout(function(){$("audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3)}function i(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}pendingAudio=!1;var a=Math.floor(89999*Math.random()+1e4);mutualExclusive=!0;var b='<div class="row chat section">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date)+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <audio class="msg-bubble-img-audio" preload="auto" controls>                    <source src="'+checkURL+'" type="audio/mpeg">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </audio>                    <div class="chat-content"> '+emojione.unicodeToImage(document.getElementById("bubbleDescAudio").value)+'</div>                 <div class="msg-upload-progress-cont">                   <div class="msg-upload-progress" id="'+a+'"></div>               </div>              </div>            </div>        </div>';closeChatPopup(),document.getElementById("chat").innerHTML+=b,$("html, body").scrollTop($(document).height()),mutualExclusive=!1,console.log("in upload audio:"+checkURL);var c=encodeURI(server+"chatUploadAudio.php"),d=new FileUploadOptions;d.fileKey="file",d.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),d.mimeType="audio/wav",d.httpMethod="POST";var e={};e.proId=localStorage.getItem("PROID"),e.chatterId=localStorage.getItem("SINGLECHATID"),e.desc=document.getElementById("bubbleDescAudio").value,d.params=e,d.chunkedMode=!1;var f={headerParam:"headerValue"};d.headers=f;var g=new FileTransfer;g.onprogress=function(b){if($("#"+a).css("width","0%"),b.lengthComputable){var c=Math.floor(b.loaded/b.total*100);$("#"+a).css("width",c+"%")}else""===progressStatus.innerHTML?$("#"+a).css("width","0%"):$("#"+a).css("width","100%")},g.upload(checkURL,c,h,i,d)}function chatTakePhoto(a){removeJunk(),localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","TAKE"),console.log("get pic"),navigator.camera.getPicture(chatTakePhotoSuccess,chatTakePhotoFail,{quality:60,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA})}function chatTakePhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,checkURL=a,document.getElementById("preBubbleImgPhoto").style.backgroundImage="url("+a+")",closeAttachOptions(),chatPopup("preBubblePhoto"),localStorage.setItem("PAGELOC","")}function chatTakePhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function chatGetPhoto(a){multiImageURL=[],removeJunk();var b="";window.imagePicker.getPictures(function(a){for(var c=0;c<a.length;c++)multiImageURL.push(a[c]),b+='<div class="col">                <div class="status-update-pic">                    <div class="send-attach-img send-attach-img-multiple" style="background-image:url('+a[c]+')"></div>                </div>            </div>',console.log("Image URI: "+a[c]);document.getElementById("multiImage").innerHTML=b,appState.takingPicture=!1,appState.imageUri=a[0],closeAttachOptions(),chatPopup("preBubblePhoto"),console.log("IN:"+multiImageURL.length),localStorage.setItem("PAGELOC","")},function(a){console.log("Error: "+a)},{maximumImagesCount:10,quality:60})}function chatGetPhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,checkURL=a,document.getElementById("preBubbleImgPhoto").style.backgroundImage="url("+a+")",closeAttachOptions(),chatPopup("preBubblePhoto"),localStorage.setItem("PAGELOC","")}function chatGetPhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function chatUploadMultiPhoto(){for(var a=0;a<multiImageURL.length;a++)checkURL=multiImageURL[a],chatUploadPhoto()}function chatUploadPhoto(){function h(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("bubbleDescPhoto").value="",document.getElementById("preBubbleImgPhoto").style.backgroundImage="url(//:0)"}function i(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}var a=Math.floor(89999*Math.random()+1e4);mutualExclusive=!0;var b='<div class="row chat section">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date)+'<span> <img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <p class="msg-bubble-img" style="background-image:url('+checkURL+')">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </p>                    <div class="chat-content">'+emojione.unicodeToImage(document.getElementById("bubbleDescPhoto").value)+' </div>                </div>                <div class="msg-upload-progress-cont">                    <div class="msg-upload-progress" id="'+a+'"></div>                </div>            </div>        </div>';closeChatPopup(),document.getElementById("chat").innerHTML+=b,$("html, body").scrollTop($(document).height()),mutualExclusive=!1,console.log("in upload image:"+checkURL);var c=encodeURI(server+"chatUploadPhoto.php"),d=new FileUploadOptions;d.fileKey="file",d.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),d.mimeType="image/jpeg",d.httpMethod="POST";var e={};e.proId=localStorage.getItem("PROID"),e.chatterId=localStorage.getItem("SINGLECHATID"),e.desc=document.getElementById("bubbleDescPhoto").value,d.params=e,d.chunkedMode=!1;var f={headerParam:"headerValue"};d.headers=f;var g=new FileTransfer;removeJunk(),g.onprogress=function(b){if($("#"+a).css("width","0%"),b.lengthComputable){var c=Math.floor(b.loaded/b.total*100);$("#"+a).css("width",c+"%")}else""===progressStatus.innerHTML?$("#"+a).css("width","0%"):$("#"+a).css("width","100%")},g.upload(checkURL,c,h,i,d)}function chatTakeFile(a){function b(a){checkURL=a;var b=checkURL.substr(checkURL.lastIndexOf(".")+1),c=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var d in c)d==b&&(console.log("File: "+d),document.getElementById("preBubbleImgFile").style.backgroundImage="url(img/attach_icons/"+c[d]+")",chatPopup("preBubbleFile"))}function c(a){console.log("Failed because: "+a)}console.log("get file"),navigator.camera.getPicture(b,c,{quality:50,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.ALLMEDIA,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function chatUploadFile(){function q(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("bubbleDescFile").value="",document.getElementById("preBubbleImgFile").style.backgroundImage="url(//:0)"}function r(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}var a=Math.floor(89999*Math.random()+1e4);mutualExclusive=!0;var b=!1,c="",d="",e=checkURL,f=e.substr(e.lastIndexOf(".")+1),g=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var h in g)h==f&&(console.log("File is: "+h),d="img/attach_icons/"+g[h]);var i=JSON.parse('{"pdf":"application/pdf" , "txt":"text/plain" , "doc":"application/msword" , "docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document" , "ppt":"application/vnd.ms-powerpointtd>" , "pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation" , "xls":"application/vnd.ms-excel" , "xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}');for(var j in i)j==f&&(console.log("File: "+j),b=!0,c=i[j]);var k='<div class="row chat section">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date)+'<span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <p class="msg-bubble-img" style="background-image:url('+d+')">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </p>                    <div class="chat-content">'+emojione.unicodeToImage(document.getElementById("bubbleDescPhoto").value)+' </div>                </div>                <div class="msg-upload-progress-cont">                    <div class="msg-upload-progress" id="'+a+'"></div>                </div>            </div>        </div>';if(closeChatPopup(),document.getElementById("chat").innerHTML+=k,$("html, body").scrollTop($(document).height()),mutualExclusive=!1,console.log("in upload chat file:"+checkURL),b){console.log(c);var l=encodeURI(server+"chatUploadFile.php?proId="+localStorage.getItem("PROID")+"&desc="+document.getElementById("bubbleDescFile").value+"&ext="+f),m=new FileUploadOptions;m.fileKey="file",m.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),m.mimeType=c,m.httpMethod="POST";var n={};n.proId=localStorage.getItem("PROID"),n.chatterId=localStorage.getItem("SINGLECHATID"),n.desc=document.getElementById("bubbleDescFile").value,n.ext=f,m.params=n,m.chunkedMode=!1;var o={headerParam:"headerValue"};m.headers=o;var p=new FileTransfer;p.onprogress=function(b){if($("#"+a).css("width","0%"),b.lengthComputable){var c=Math.floor(b.loaded/b.total*100);$("#"+a).css("width",c+"%")}else""===progressStatus.innerHTML?$("#"+a).css("width","0%"):$("#"+a).css("width","100%")},p.upload(checkURL,l,q,r,m)}else alert("File Not Supported.")}function chatTakeContact(a){for(var b=JSON.parse(localStorage.getItem("CONTACTS")),c="<form name='contactForm'>",d=0,f="",g=0;g<b.length;g++)f=""===b[g].imageURL||null===b[g].imageURL?"img/list/arya_stark.jpg":server+b[g].imageURL,console.log("X:"+b[g].system_id),c+='<div class="row">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+f+')">                    </div>                </div>                <div class="col-70 col-center" onclick="setContact(this)" data-system-id="'+b[g].system_id+'">                    <p class="contact-person-name">'+b[g].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i> '+b[g].phone+"</p>                </div>                <div class=\"col-10\">                    <label class=\"radio-button\">                        <input type='radio' name='contactRadio' value='"+JSON.stringify(b[g])+"' id='rdb"+d+++'\'>                        <div class="radio-button__checkmark"></div>                    </label>                </div>            </div>';document.getElementById("contactList").innerHTML=c+"</form>",$("#listingContact").show()}function chatTakeContactSearch(a){console.log(a.value);var b="<form name='contactForm'>",c=0,e="";document.getElementById("contactList").innerHTML="";for(var f=JSON.parse(localStorage.getItem("CONTACTS")),g=0;g<f.length;g++)-1!=f[g].name.toLowerCase().indexOf(a.value.toLowerCase())&&(e=""===f[g].imageURL||null===f[g].imageURL?"img/list/arya_stark.jpg":server+f[g].imageURL,b+='<div class="row">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+getThumb(e)+')">                    </div>                </div>                <div class="col-70 col-center" onclick="setContact(this)" data-system-id="'+f[g].system_id+'">                    <p class="contact-person-name">'+f[g].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i> '+f[g].phone+"</p>                </div>                <div class=\"col-10\">                    <label class=\"radio-button\">                        <input type='radio' name='contactRadio' value='"+JSON.stringify(f[g])+"' id='rdb"+c+++'\'>                        <div class="radio-button__checkmark"></div>                    </label>                </div>            </div>');document.getElementById("contactList").innerHTML=b+"</form>"}function sendContact(a){var c=!1,d="",e="",f="",g=document.forms.contactForm.contactRadio.value;if(console.log(g),""===g||null===g?c=!1:(d=JSON.parse(g),c=!0),c){f=d.phone+","+d.name,e+='<div class="row chat section">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                          '+formatAMPM(new Date)+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-contact">                        <div class="row">                            <div class="col-30 row col-center"><div class="msg-contact-pic"></div></div>                            <div class="col-70">                                <p class="name">'+d.name+'</p>                                <p class="contact">'+d.phone+'</p>                            </div>                        </div>                        <div class="save-contact" >                        </div>                    </div>                </div>            </div>        </div>',$("#listingContact").hide(),document.getElementById("chat").innerHTML+=e,$("html, body").scrollTop($(document).height());var h=new XMLHttpRequest;h.onreadystatechange=function(){4==h.readyState&&200==h.status&&(console.log(h.responseText.trim()),1==h.responseText.trim()?console.log("uploaded"):console.log("not uploded"))},h.open("POST",server+"chatUploadContact.php",!0);var i="proId="+localStorage.getItem("PROID")+"&chatterId="+localStorage.getItem("SINGLECHATID")+"&message="+encodeURIComponent(f);h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(i)}else console.log("ELSE"),$("#displayListErr").html("Select at least one user to continue.")}function saveContact(a,b){function c(a){alert("Save Success")}function d(a){alert("Error = "+a.code)}console.log(b+":::"+a);var e=navigator.contacts.create();e.displayName=b,e.nickname=b;var f=[];f[0]=new ContactField("mobile",a,!0),e.phoneNumbers=f,e.save(c,d)}function loadmap(a,b,c){console.log("in loadmap :: "+a+"::"+lat+"::"+lon);var d={center:new google.maps.LatLng(b,c),zoom:17,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!1,scrollwheel:!1,draggable:!1,minZoom:9,mapTypeControl:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DEFAULT,position:google.maps.ControlPosition.LEFT_BOTTOM},fullscreenControl:!1},e=new google.maps.Map(document.getElementById(a),d),f={position:new google.maps.LatLng(b,c),map:e,animation:google.maps.Animation.BOUNCE};marker=new google.maps.Marker(f),marker.setMap(e);var g={content:"Your Position"},h=new google.maps.InfoWindow(g);google.maps.event.addListener(marker,"click",function(a){h.open(e,marker)}),google.maps.event.addListener(marker,"mouseout",function(a){h.close(e,marker)})}function currentloc(){var a=new google.maps.LatLng(lat,lon);marker.setPosition(a)}function getPosition(){function c(a){console.log("Error"),console.log("code: "+a.code+"\nmessage: "+a.message+"\n")}var a={enableHighAccuracy:!0,timeout:3e4},b=function(a){lat=a.coords.latitude,lon=a.coords.longitude,console.log("Success:"+lat+":::"+lon),$(".map-loader").hide(),loadmap("preBubbleImgMap",lat,lon)};navigator.geolocation.getCurrentPosition(b,c,a)}function chatTakeLocation(){getPosition(),loadmap("preBubbleImgMap",lat,lon),chatPopup("preBubbleMap")}function chatUploadLocation(){var a=Math.floor(89999*Math.random()+1e4);mutualExclusive=!0;var b='<div class="row chat section">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date)+'<span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                   <a href="http://www.google.com/maps/place/'+lat+","+lon+"/@"+lat+","+lon+',15z">                    <div class="msg-bubble-img" id="map'+a+'">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </div>                   </a>                    <div class="chat-content">'+emojione.unicodeToImage(document.getElementById("bubbleDescMap").value)+" </div>                </div>            </div>        </div>";closeChatPopup(),document.getElementById("chat").innerHTML+=b,$("html, body").scrollTop($(document).height()),loadmap("map"+a,lat,lon);var c=localStorage.getItem("PROID"),d=localStorage.getItem("SINGLECHATID"),e=document.getElementById("bubbleDescMap").value,f=new XMLHttpRequest;f.onreadystatechange=function(){4==f.readyState&&200==f.status&&(console.log(f.responseText.trim()),mutualExclusive=!1)},f.open("POST",server+"chatUploadMap.php",!0);var g="proId="+c+"&chatterId="+d+"&desc="+encodeURIComponent(e)+"&lat="+lat+"&lon="+lon;f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function populateContacts(a){for(var b=JSON.parse(localStorage.getItem("CONTACTS")),c="",d=0,e=0;e<b.length;e++)b[e].is_user&&2==b[e].status&&(c+='<div class="row">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon"  style="background-image:url('+server+getThumb(b[e].imageURL)+')">                    </div>                </div>                <div class="col-70 col-center" onclick="checkProfile(this)" data-system-id="'+b[e].system_id+'">                    <p class="contact-person-name">'+b[e].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i> '+b[e].phone+'</p>                </div>                <div class="col-10">                    <label class="checkbox">                        <input type="checkbox" id="chk'+d+++'" data-system-id="'+b[e].system_id+'">                        <div class="checkbox__checkmark"></div>                    </label>                </div>            </div>');document.getElementById("contactList").innerHTML=c}function takeGroupDisplayPhoto(a){localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","TAKE"),console.log("get pic"),removeGrpErr(),navigator.camera.getPicture(takeGroupDisplayPhotoSuccess,takeGroupDisplayPhotoFail,{quality:30,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA})}function takeGroupDisplayPhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,document.getElementById("grpIcon").style.backgroundImage="url("+a+")",displayImageSet=!0,checkURL=a,localStorage.setItem("PAGELOC","")}function takeGroupDisplayPhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function getGroupDisplayPhoto(){localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","GET"),console.log("get pic"),removeGrpErr(),navigator.camera.getPicture(getGroupDisplayPhotoSuccess,getGroupDisplayPhotoFail,{quality:30,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY})}function getGroupDisplayPhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a;try{document.getElementById("grpIcon").style.backgroundImage="url("+a+")"}catch(a){console.log("getGroupDisplayPhotoSuccess:catch")}displayImageSet=!0,checkURL=a,localStorage.setItem("PAGELOC","")}function getGroupDisplayPhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function groupUploadDisplayPhoto(){function f(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),loadingOff(),window.location.href="groups.html"}function g(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}console.log("in upload image:"+checkURL);var a=encodeURI(server+"groupUploadDisplayPhoto.php"),b=new FileUploadOptions;b.fileKey="file",b.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),b.mimeType="image/jpeg",b.httpMethod="POST";var c={};c.grpId=localStorage.getItem("GRPID"),c.proId=localStorage.getItem("PROID"),b.params=c,b.chunkedMode=!1;var d={headerParam:"headerValue"};b.headers=d,(new FileTransfer).upload(checkURL,a,f,g,b)}function removeGrpErr(a){$("#grpIcon").css("border","none"),$("#grpNameErr").css("border-bottom","1px solid #63b5f6"),$(".err-notify").html("")}function createGroup(){var a=0,b=!1,c=[],d=/[^\s]+/,e=document.getElementById("grpName").value;if(displayImageSet)if(e.match(d)||""!==e){for(;null!==document.getElementById("chk"+a);)console.log(document.getElementById("chk"+a).checked+":::"+document.getElementById("chk"+a).getAttribute("data-system-id")),document.getElementById("chk"+a).checked&&(b=!0,c.push(document.getElementById("chk"+a).getAttribute("data-system-id"))),a++;if(b){var f=localStorage.getItem("PROID"),g=new XMLHttpRequest;g.onreadystatechange=function(){loadingOn(),4==g.readyState&&200==g.status&&(console.log(g.responseText.trim()),!1!==g.responseText.trim()&&(localStorage.setItem("GRPID",g.responseText.trim()),groupUploadDisplayPhoto()))},g.open("POST",server+"createGroup.php",!0);var h="proId="+f+"&grpName="+e+"&members="+JSON.stringify(c);g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.send(h)}else $("#displayListErr").html("Select at least one user to continue.")}else $("#displayNameErr").html("Select a valid name."),$("#grpNameErr").css("border-bottom","1px solid black");else $("#displayPhotoErr").html("Select a display picture."),$("#grpIcon").css("border","2px solid black")}function groupUploadDisplayPhotoPrev(){function f(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),loadingOff(),window.location.href="groups.html"}function g(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}console.log("in upload image:"+checkURL);var a=encodeURI(server+"groupUploadDisplayPhotoPrev.php"),b=new FileUploadOptions;b.fileKey="file",b.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),b.mimeType="image/jpeg",b.httpMethod="POST";var c={};c.grpId=localStorage.getItem("GRPID"),c.proId=localStorage.getItem("PROID"),b.params=c,b.chunkedMode=!1;var d={headerParam:"headerValue"};b.headers=d,(new FileTransfer).upload(checkURL,a,f,g,b)}function updateGroup(){var d=/[^\s]+/,e=document.getElementById("grpName").value;if(e.match(d)||""!==e){var f=localStorage.getItem("PROID"),g=localStorage.getItem("GRPID"),h=new XMLHttpRequest;h.onreadystatechange=function(){loadingOn(),4==h.readyState&&200==h.status&&(console.log(h.responseText.trim()),!1!==h.responseText.trim()&&(displayImageSet?groupUploadDisplayPhotoPrev():(loadingOff(),window.location.href="groups.html")))},h.open("POST",server+"updateGroup.php",!0);var i="proId="+f+"&grpId="+g+"&grpName="+e;h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(i)}else $("#displayNameErr").html("Select a valid name."),$("#grpNameErr").css("border-bottom","1px solid black")}function openGroupHome(a,b){console.log("openHomeGroup"+a),localStorage.setItem("GRPID",a),localStorage.setItem("GRPSTATUS",b),fetchGroupHomePost()}function openGroupChat(a,b){console.log("openGroupChat"+a),localStorage.setItem("GRPID",a),localStorage.setItem("GRPSTATUS",b),window.location.href="groupchat.html"}function getGroupId(a){console.log("GroupId"+a),localStorage.setItem("GRPID",a),window.location.href="group_posts.html"}function fetchActiveGroupList(a){preLoaderOn();var b=localStorage.getItem("PROID"),c=new XMLHttpRequest,d="",e="",f="";c.onreadystatechange=function(){if(4==c.readyState&&200==c.status)if(console.log("GROUP:::"+c.responseText.trim()),!1!==c.responseText.trim()&&""!==c.responseText.trim()){localStorage.setItem("GRPIDLIST",c.responseText.trim()),d=JSON.parse(c.responseText),groupListData=d;for(var a=0;a<d.length;a++)f=0==d[a].status?"group-list-deleted":"",e+='<div class="row chat-cont-inner" >            <div class="col-20">                <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[a].photo)+')">                </div>            </div>            <div class="col-60 col-center" onclick="getGroupId(\''+d[a].id+'\')">                <div class="dash-chat-name '+f+'">'+d[a].name+'</div>                <label class="dash-chat-desc">'+d[a].members.replace(/,\s*$/,"")+'</label>            </div>            <div class="col-20 col-center text-right" onclick="openGroupChat(\''+d[a].id+"','"+d[a].status+'\')">                <img src="img/icons/chat.svg" />            </div>        </div>';document.getElementById("chatListing").innerHTML=e,preLoaderOff()}else document.getElementById("blankGroup").style.display="block",preLoaderOff(),console.log("blank group list")},c.open("POST",server+"fetchActiveGroupList.php",!0);var g="proId="+b;c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(g)}function groupSearch(a){document.getElementById("crossHide").style.display="table-cell";for(var c=(localStorage.getItem("PROID"),groupListData),d="",e=0;e<c.length;e++)-1!=c[e].name.toLowerCase().indexOf(a.value.toLowerCase())&&(d+='<div class="row chat-cont-inner" >            <div class="col-20">                <div class="dash-chat-img" style="background-image:url('+server+getThumb(c[e].photo)+')">                </div>            </div>            <div class="col-60 col-center" onclick="getGroupId(\''+c[e].id+'\')">                <div class="dash-chat-name">'+c[e].name+'</div>                <label class="dash-chat-desc">'+c[e].members+'</label>            </div>            <div class="col-20 col-center text-right" onclick="openGroupChat(\''+c[e].id+"','"+c[e].status+'\')">                <img src="img/icons/chat.svg" />            </div>        </div>');document.getElementById("chatListing").innerHTML=d}function groupClear(){for(var b=(localStorage.getItem("PROID"),groupListData),c="",d=0;d<b.length;d++)c+='<div class="row chat-cont-inner" >            <div class="col-20">                <div class="dash-chat-img" style="background-image:url('+server+getThumb(b[d].photo)+')">                </div>            </div>            <div class="col-60 col-center" onclick="getGroupId(\''+b[d].id+'\')">                <div class="dash-chat-name">'+b[d].name+'</div>                <label class="dash-chat-desc">'+b[d].members+'</label>            </div>            <div class="col-20 col-center text-right" onclick="openGroupChat(\''+b[d].id+"','"+b[d].status+'\')">                <img src="img/icons/chat.svg" />            </div>        </div>';document.getElementById("chatListing").innerHTML=c}function holdGroupChat(a){var b=a.getAttribute("id");return pressThreadTimer=window.setTimeout(function(){console.log("ID:"+b);var a='<li class="item" onclick="deleteGroupBubble('+b+')">Delete</li>';navigator.vibrate(500),document.getElementById("chatActionOptions").innerHTML=a,document.getElementById("chatAction").style.display="table"},1e3),!1}function unHoldGroupChat(){return clearTimeout(pressThreadTimer),!1}function deleteGroupBubble(a){if(console.log(a),confirm("Are you sure you want to remove this chat?")){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),!1!==b.responseText.trim()?$("#"+a).remove():console.log("error"))},b.open("POST",server+"deleteGroupBubble.php",!0);var c="id="+a;b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}}function fetchHelpOnceGrp(a){prevGrpId=0;for(var b=JSON.parse(localStorage.getItem("GRPIDLIST")),c=0;c<b.length;c++)b[c].id==a&&(document.getElementById("groupName").innerHTML=b[c].name,document.getElementById("groupProImage").style.backgroundImage="url("+server+getThumb(b[c].photo)+")");var d=localStorage.getItem("GRPSTATUS"),e="";0==d?(document.getElementById("attachmentClip").style.visibility="hidden",document.getElementById("redirectionalLink").setAttribute("onclick",""),document.getElementById("messageSendingBox").style.display="none",e='<div class="group-post-disabled"></div>'):e="",document.getElementById("chat").innerHTML=e,helpOnceGrp=!1}function fetchGroupChat(){if(!groupMutualExclusive){var a=localStorage.getItem("PROID"),b=localStorage.getItem("GRPID");helpOnceGrp&&fetchHelpOnceGrp(b);var c="",d="",e="",f=[],g=[],h=JSON.parse(localStorage.getItem("USERINFO")),j=(h[0].imageURL,new XMLHttpRequest);j.onreadystatechange=function(){if(4==j.readyState&&200==j.status)if(console.log("GROUP:::"+j.responseText.trim()),!1!==j.responseText.trim()&&""!==j.responseText.trim()){d=JSON.parse(j.responseText.trim()),prevGrpId=d[0].id,nextGrpId=d[d.length-1].id;for(var b=d.length-1;b>=0;b--)if(d[b].senderId==a)if("text"==d[b].type)c+='<div class="row chat section" id="'+d[b].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                            Me                        </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date(d[b].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-content">'+emojione.unicodeToImage(d[b].message)+"</div>                </div>            </div>        </div>";else if("contact"==d[b].type){var h=d[b].message.split(",");console.log(h[0]+":::"+h[1]),c+='<div class="row chat section" id="'+d[b].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                            Me                        </div>                        <div class="col-40 text-right">                          '+formatAMPM(new Date(d[b].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-contact">                        <div class="row">                            <div class="col-30 row col-center"><div class="msg-contact-pic"></div></div>                            <div class="col-70">                                <p class="name">'+h[0]+'</p>                                <p class="contact">'+h[1]+'</p>                            </div>                        </div>                        <div class="save-contact">                        </div>                    </div>                </div>            </div>        </div>'}else"post"==d[b].type?c+='<div class="row chat section" id="'+d[b].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                           Me                         </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date(d[b].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-content">'+d[b].message+"</div>                </div>            </div>        </div>":"map"==d[b].type&&(e=Math.floor(89999*Math.random()+1e4),c+='<div class="row chat section" id="'+d[b].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                           Me                         </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(d[b].time))+'<span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                   <a href="http://www.google.com/maps/place/'+d[b].link+"/@"+d[b].link+',15z">                    <div class="msg-bubble-img" id="map'+e+'">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </div>                   </a>                    <div class="chat-content">'+emojione.unicodeToImage(d[b].message)+" </div>                </div>            </div>        </div>",f.push(d[b].link),g.push(e));else if("text"==d[b].type)c+='<div class="row chat section" id="'+d[b].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(d[b].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                            '+d[b].name+'                        </div>                    </div>                    <div class="chat-content">'+emojione.unicodeToImage(d[b].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>';else if("contact"==d[b].type){var i=d[b].message.split(",");console.log(i[0]+":::"+i[1]),c+='<div class="row chat section" id="'+d[b].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(d[b].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                            '+d[b].name+'                        </div>                    </div>                       <div class="chat-contact">                        <div class="row">                            <div class="col-30 row col-center"><div class="msg-contact-pic"></div></div>                            <div class="col-70">                                <p class="name">'+i[0]+'</p>                                <p class="contact">'+i[1]+'</p>                            </div>                        </div>                        <div class="save-contact" onclick="groupSaveContact(\''+i[0]+"','"+i[1]+'\')">                            Save Contact                        </div>                      </div>                </div>            </div>            <div class="col-20"></div>        </div>'}else"post"==d[b].type?c+='<div class="row chat section" id="'+d[b].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(d[b].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                            '+d[b].name+'                        </div>                    </div>                    <div class="chat-content">'+emojione.unicodeToImage(d[b].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>':"map"==d[b].type&&(e=Math.floor(89999*Math.random()+1e4),c+='<div class="row chat section" id="'+d[b].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(d[b].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                            '+d[b].name+'                        </div>                    </div>                   <a href="http://www.google.com/maps/place/'+d[b].link+"/@"+d[b].link+',15z">                    <div  class="msg-bubble-img" id="map'+e+'">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </div>                   </a>                    <div class="chat-content">'+emojione.unicodeToImage(d[b].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>',f.push(d[b].link),g.push(e));document.getElementById("chat").innerHTML+=c,$("html, body").scrollTop($(document).height());for(var k=0;k<g.length;k++){var l=f[k].split(",");loadmap("map"+g[k],l[0],l[1])}}else console.log("no result")},j.open("POST",server+"fetchGroupChat.php",!0);var k="proId="+a+"&grpId="+b+"&prev="+prevGrpId;j.setRequestHeader("Content-type","application/x-www-form-urlencoded"),j.send(k)}}function fetchNextGroupChat(){if(!groupMutualExclusive){newLoaderOn();var b=(localStorage.getItem("GRPSTATUS"),localStorage.getItem("PROID")),c=localStorage.getItem("GRPID"),d="",e="",f="",g=[],h=[],i=JSON.parse(localStorage.getItem("USERINFO")),k=(i[0].imageURL,new XMLHttpRequest);k.onreadystatechange=function(){if(4==k.readyState&&200==k.status)if(console.log("GROUP:::"+k.responseText.trim()),!1!==k.responseText.trim()&&""!==k.responseText.trim()){e=JSON.parse(k.responseText.trim()),nextGrpId=e[e.length-1].id;for(var a=e.length-1;a>=0;a--)if(e[a].senderId==b)if("text"==e[a].type)d+='<div class="row chat section" id="'+e[a].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                            Me                        </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date(e[a].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-content">'+emojione.unicodeToImage(e[a].message)+"</div>                </div>            </div>        </div>";else if("contact"==e[a].type){var c=e[a].message.split(",");console.log(c[0]+":::"+c[1]),d+='<div class="row chat section" id="'+e[a].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                            Me                        </div>                        <div class="col-40 text-right">                          '+formatAMPM(new Date(e[a].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-contact">                        <div class="row">                            <div class="col-30 row col-center"><div class="msg-contact-pic"></div></div>                            <div class="col-70">                                <p class="name">'+c[0]+'</p>                                <p class="contact">'+c[1]+'</p>                            </div>                        </div>                        <div class="save-contact">                        </div>                    </div>                </div>            </div>        </div>'}else"post"==e[a].type?d+='<div class="row chat section" id="'+e[a].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                           Me                         </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date(e[a].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-content">'+e[a].message+"</div>                </div>            </div>        </div>":"map"==e[a].type&&(f=Math.floor(89999*Math.random()+1e4),d+='<div class="row chat section" id="'+e[a].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                           Me                         </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date(e[a].time))+'<span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                   <a href="http://www.google.com/maps/place/'+e[a].link+"/@"+e[a].link+',15z">                    <div class="msg-bubble-img" id="map'+f+'">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </div>                   </a>                    <div class="chat-content">'+emojione.unicodeToImage(e[a].message)+" </div>                </div>            </div>        </div>",g.push(e[a].link),h.push(f));else if("text"==e[a].type)d+='<div class="row chat section" id="'+e[a].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(e[a].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                            '+e[a].name+'                        </div>                    </div>                    <div class="chat-content">'+emojione.unicodeToImage(e[a].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>';else if("contact"==e[a].type){var i=e[a].message.split(",");console.log(i[0]+":::"+i[1]),d+='<div class="row chat section" id="'+e[a].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                              '+formatAMPM(new Date(e[a].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                            '+e[a].name+'                        </div>                    </div>                       <div class="chat-contact">                        <div class="row">                            <div class="col-30 row col-center"><div class="msg-contact-pic"></div></div>                            <div class="col-70">                                <p class="name">'+i[0]+'</p>                                <p class="contact">'+i[1]+'</p>                            </div>                        </div>                        <div class="save-contact" onclick="groupSaveContact(\''+i[0]+"','"+i[1]+'\')">                            Save Contact                        </div>                      </div>                </div>            </div>            <div class="col-20"></div>        </div>'}else"post"==e[a].type?d+='<div class="row chat section" id="'+e[a].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(e[a].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                            '+e[a].name+'                        </div>                    </div>                    <div class="chat-content">'+emojione.unicodeToImage(e[a].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>':"map"==e[a].type&&(f=Math.floor(89999*Math.random()+1e4),d+='<div class="row chat section" id="'+e[a].id+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-80">                <div class="msg-sent-cont msg-sent-cont-alt">                    <div class="row">                        <div class="col-40">                            '+formatAMPM(new Date(e[a].time))+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                        <div class="col-60 text-right">                            '+e[a].name+'                        </div>                    </div>                   <a href="http://www.google.com/maps/place/'+e[a].link+"/@"+e[a].link+',15z">                    <div  class="msg-bubble-img" id="map'+f+'">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </div>                   </a>                    <div class="chat-content">'+emojione.unicodeToImage(e[a].message)+'</div>                </div>            </div>            <div class="col-20"></div>        </div>',g.push(e[a].link),h.push(f));document.getElementById("chat").innerHTML=d+document.getElementById("chat").innerHTML,newLoaderOff();for(var j=0;j<h.length;j++){var l=g[j].split(",");loadmap("map"+h[j],l[0],l[1])}}else document.getElementById("loadMore").innerHTML="No More Chat",console.log("no chat"),newLoaderOff()},k.open("POST",server+"fetchNextGroupChat.php",!0);var l="proId="+b+"&grpId="+c+"&next="+nextGrpId;console.log(l),k.setRequestHeader("Content-type","application/x-www-form-urlencoded"),k.send(l)}}function sendGroupChat(){console.log(helpOnceGrp),groupMutualExclusive=!0,document.getElementById("sendEnable").style.display="none",document.getElementById("sendDisable").style.display="block";var a=localStorage.getItem("PROID"),b=localStorage.getItem("GRPID"),c=document.getElementById("chatMessage").value,d=JSON.parse(localStorage.getItem("USERINFO")),f=(d[0].imageURL,new XMLHttpRequest);f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)if(console.log(f.responseText.trim()),f.responseText.trim()){if(document.getElementById("chatMessage").value="",0!==prevGrpId){var a='<div class="row chat section" id="'+f.responseText.trim()+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20"></div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                            Me                        </div>                        <div class="col-40 text-right">                             '+formatAMPM(new Date)+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-content">'+emojione.unicodeToImage(c)+"</div>                </div>            </div>        </div>";document.getElementById("chat").innerHTML+=a,$("html, body").scrollTop($(document).height())}groupMutualExclusive=!1}else console.log("error"),groupMutualExclusive=!1},f.open("POST",server+"sendGroupChat.php",!0);var g="proId="+a+"&grpId="+b+"&message="+encodeURIComponent(c);console.log(g),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function groupChatUploadLocation(){groupMutualExclusive=!0;var a=Math.floor(89999*Math.random()+1e4),b='<div class="row chat section" id="loc'+a+'" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                            Me                        </div>                        <div class="col-40 text-right">                            '+formatAMPM(new Date)+'<span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                   <a href="http://www.google.com/maps/place/'+lat+","+lon+"/@"+lat+","+lon+',15z">                    <div class="msg-bubble-img" id="map'+a+'">                        <div class="msg-bubble-img-loader row row-center">                        </div>                    </div>                   </a>                    <div class="chat-content">'+emojione.unicodeToImage(document.getElementById("bubbleDescMap").value)+" </div>                </div>            </div>        </div>";closeChatPopup(),document.getElementById("chat").innerHTML+=b,$("html, body").scrollTop($(document).height()),loadmap("map"+a,lat,lon);var c=localStorage.getItem("PROID"),d=localStorage.getItem("GRPID"),e=document.getElementById("bubbleDescMap").value,f=new XMLHttpRequest;f.onreadystatechange=function(){4==f.readyState&&200==f.status&&(console.log(f.responseText.trim()),document.getElementById("loc"+a).setAttribute("id",f.responseText.trim()),groupMutualExclusive=!0)},f.open("POST",server+"groupChatUploadMap.php",!0);var g="proId="+c+"&grpId="+d+"&desc="+encodeURIComponent(e)+"&lat="+lat+"&lon="+lon;f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function groupChatTakeContact(a){for(var b=JSON.parse(localStorage.getItem("CONTACTS")),c="<form name='contactForm'>",d=0,f="",g=0;g<b.length;g++)f=""===b[g].imageURL||null===b[g].imageURL?"img/list/arya_stark.jpg":server+getThumb(b[g].imageURL),console.log("X:"+b[g].system_id),c+='<div class="row">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+f+')">                    </div>                </div>                <div class="col-70 col-center" onclick="setContactId(this)" data-system-id="'+b[g].system_id+'">                    <p class="contact-person-name">'+b[g].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i> '+b[g].phone+"</p>                </div>                <div class=\"col-10\">                    <label class=\"radio-button\">                        <input type='radio' name='contactRadio' value='"+JSON.stringify(b[g])+"' id='rdb"+d+++'\'>                        <div class="radio-button__checkmark"></div>                    </label>                </div>            </div>';document.getElementById("contactList").innerHTML=c+"</form>",$("#listingContact").show()}function groupChatTakeContactSearch(a){var b="<form name='contactForm'>",c=0,e="";document.getElementById("contactList").innerHTML="";for(var f=JSON.parse(localStorage.getItem("CONTACTS")),g=0;g<f.length;g++)-1!=f[g].name.toLowerCase().indexOf(a.value.toLowerCase())&&(e=""===f[g].imageURL||null===f[g].imageURL?"img/list/arya_stark.jpg":server+getThumb(f[g].imageURL),b+='<div class="row">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+e+')">                    </div>                </div>                <div class="col-70 col-center" onclick="setContactId(this)" data-system-id="'+f[g].system_id+'">                    <p class="contact-person-name">'+f[g].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i> '+f[g].phone+"</p>                </div>                <div class=\"col-10\">                    <label class=\"radio-button\">                        <input type='radio' name='contactRadio' value='"+JSON.stringify(f[g])+"' id='rdb"+c+++'\'>                        <div class="radio-button__checkmark"></div>                    </label>                </div>            </div>');document.getElementById("contactList").innerHTML=b+"</form>"}function groupSendContact(a){groupMutualExclusive=!0;var c=!1,d="",e="",f="",g=document.forms.contactForm.contactRadio.value;if(""===g||null===g?c=!1:(d=JSON.parse(g),c=!0),c){f=d.phone+","+d.name,e+='<div class="row chat section" id="contTemp" onmousedown="holdGroupChat(this)" onmouseup="unHoldGroupChat()">            <div class="col-20">            </div>            <div class="col-80">                <div class="msg-sent-cont">                    <div class="row">                        <div class="col-60">                        </div>                        <div class="col-40 text-right">                          '+formatAMPM(new Date)+' <span><img src="img/icons/double-tick-indicator.svg" /></span>                        </div>                    </div>                    <div class="chat-contact">                        <div class="row">                            <div class="col-30 row col-center"><div class="msg-contact-pic"></div></div>                            <div class="col-70">                                <p class="name">'+d.name+'</p>                                <p class="contact">'+d.phone+'</p>                            </div>                        </div>                        <div class="save-contact" >                        </div>                    </div>                </div>            </div>        </div>',$("#listingContact").hide(),document.getElementById("chat").innerHTML+=e,$("html, body").scrollTop($(document).height());var h=new XMLHttpRequest;h.onreadystatechange=function(){4==h.readyState&&200==h.status&&(console.log(h.responseText.trim()),h.responseText.trim()?(console.log("uploaded"),document.getElementById("contTemp").setAttribute("id",h.responseText.trim()),groupMutualExclusive=!1):(console.log("not uploded"),groupMutualExclusive=!1))},h.open("POST",server+"groupChatUploadContact.php",!0);var i="proId="+localStorage.getItem("PROID")+"&grpId="+localStorage.getItem("GRPID")+"&message="+encodeURIComponent(f);h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(i)}else console.log("ELSE"),$("#displayListErr").html("Select at least one user to continue.")}function groupSaveContact(a,b){function c(a){console.log(a),alert("Save Success")}function d(a){alert("Error = "+a.code)}console.log(b+":::"+a);var e=navigator.contacts.create();e.displayName=b,e.nickname=b;var f=[];f[0]=new ContactField("mobile",a,!0),e.phoneNumbers=f,e.save(c,d)}function fetchGroupInfo(a){var b=localStorage.getItem("PROID"),c=localStorage.getItem("GRPID");console.log("GRPID:::"+c+":::PROID:::"+b);for(var d=JSON.parse(localStorage.getItem("GRPIDLIST")),e="",f=0;f<d.length;f++)if(d[f].id==c){localStorage.setItem("CURRGRPBRIEF",JSON.stringify(d[f]));var g="url("+server+d[f].photo+")";$(".user-profile-pic").css("background-image",g),document.getElementById("grpName").innerHTML=d[f].name,document.getElementById("grpCreated").innerHTML="Created on "+sqlToJsDate(d[f].created),grpNameTransfer=d[f].name,e=d[f].by}var j=new XMLHttpRequest,k='<p class="group-members-head">Group Members</p>',l="";j.onreadystatechange=function(){if(4==j.readyState&&200==j.status)if(console.log(j.responseText.trim()),localStorage.setItem("GRPMEM",j.responseText.trim()),!1!==j.responseText.trim()){if(data1=JSON.parse(j.responseText.trim()),e==b){for(var a=0;a<data1.length;a++)data1[a].system_id==e?k+='<div class="row" id="'+data1[a].system_id+'">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+server+getThumb(data1[a].imageURL)+')">                    </div>                </div>                <div class="col-70 col-center" onclick="checkProfile(this)" data-system-id="'+data1[a].system_id+'">                    <p class="contact-person-name">'+data1[a].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i>'+data1[a].phone+'</p>                </div>                <div class="col-10 contact-person-request col-bottom"  data-system-id="'+data1[a].system_id+'">                  <p>Admin</p>                </div>            </div>':l+='<div class="row" id="'+data1[a].system_id+'">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+server+getThumb(data1[a].imageURL)+')">                    </div>                </div>                <div class="col-70 col-center" onclick="checkProfile(this)" data-system-id="'+data1[a].system_id+'">                    <p class="contact-person-name">'+data1[a].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i>'+data1[a].phone+'</p>                </div>                <div class="col-10 contact-person-request col-bottom">                    <i class="fa fa-trash-o"  onclick="removeFromGroup(this)" data-system-id="'+data1[a].system_id+'"></i>                </div>            </div>';document.getElementById("PGRP").style.display="block",document.getElementById("LGRP").style.display="none",document.getElementById("DGRP").style.display="block",document.getElementById("groupEditOption").style.display="block"}else{for(var c=0;c<data1.length;c++)data1[c].system_id==e?k+='<div class="row" id="'+data1[c].system_id+'">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+server+getThumb(data1[c].imageURL)+')">                    </div>                </div>                <div class="col-70 col-center" onclick="checkProfile(this)" data-system-id="'+data1[c].system_id+'">                    <p class="contact-person-name">'+data1[c].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i>'+data1[c].phone+'</p>                </div>                <div class="col-10 contact-person-request col-bottom"  data-system-id="'+data1[c].system_id+'">                  <p>Admin</p>                </div>            </div>':l+='<div class="row" id="'+data1[c].system_id+'">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+server+getThumb(data1[c].imageURL)+')">                    </div>                </div>                <div class="col-70 col-center" onclick="checkProfile(this)" data-system-id="'+data1[c].system_id+'">                    <p class="contact-person-name">'+data1[c].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i>'+data1[c].phone+'</p>                </div>                <div class="col-10 contact-person-request col-bottom">                </div>            </div>';document.getElementById("PGRP").style.display="none",document.getElementById("LGRP").style.display="block",document.getElementById("DGRP").style.display="none",document.getElementById("groupEditOption").style.display="none"}document.getElementById("membersList").innerHTML=k+l}else console.log("error")},j.open("POST",server+"fetchGroupInfo.php",!0);var m="proId="+b+"&grpId="+c;j.setRequestHeader("Content-type","application/x-www-form-urlencoded"),j.send(m)}function extractGroupInfo(){console.log(localStorage.getItem("CURRGRPBRIEF"));var a=JSON.parse(localStorage.getItem("CURRGRPBRIEF")),b="url("+server+a.photo+")";$("#grpIcon").css("background-image",b),document.getElementById("grpName").value=a.name,localStorage.setItem("GRPID",a.id)}function addParticipant(a){for(var b=0,c=!1,d=[],e=localStorage.getItem("PROID"),f=localStorage.getItem("GRPID");null!=document.getElementById("chk"+b);)console.log(document.getElementById("chk"+b).checked+":::"+document.getElementById("chk"+b).getAttribute("data-system-id")),document.getElementById("chk"+b).checked&&(c=!0,d.push(document.getElementById("chk"+b).getAttribute("data-system-id"))),b++;if(c){var g=new XMLHttpRequest;g.onreadystatechange=function(){loadingOn(),4==g.readyState&&200==g.status&&(console.log(g.responseText.trim()),!1!==g.responseText.trim()&&location.reload())},g.open("POST",server+"addParticipant.php",!0);var h="grpId="+f+"&grpName="+encodeURIComponent(grpNameTransfer)+"&proId="+e+"&members="+JSON.stringify(d);g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.send(h)}else console.log("ELSE"),$("#displayListErr").html("Select at least one user to continue.")}function removeFromGroup(a){var b=localStorage.getItem("GRPID"),c=JSON.parse(localStorage.getItem("GRPMEM")),d=a.getAttribute("data-system-id");if(confirm("Are You Sure You Want To Remove User?")){var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)if(console.log(f.responseText.trim()),!1!==f.responseText.trim())for(var a=0;a<c.length;a++)console.log(c[a].system_id),c[a].system_id==d&&(c.splice(a),localStorage.setItem("GRPMEM",JSON.stringify(c)),document.getElementById(d).style.display="none");else console.log("Not Removed")},f.open("POST",server+"removeFromGroup.php",!0);var g="grpId="+b+"&uId="+d;console.log(g),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}}function participantList(a){for(var b=JSON.parse(localStorage.getItem("CONTACTS")),c=JSON.parse(localStorage.getItem("GRPMEM")),d="",e=0,f=[],g=0;g<c.length;g++)console.log(c[g].system_id),f.push(c[g].system_id);for(var h=0;h<b.length;h++)b[h].is_user&&(console.log("X:"+b[h].system_id),2==b[h].status&&-1==f.indexOf(b[h].system_id)&&(d+='<div class="row">                <div class="col-20">                    <div class="dash-chat-img contact-person-icon" style="background-image:url('+server+getThumb(b[h].imageURL)+')">                    </div>                </div>                <div class="col-70 col-center" onclick="checkProfile(this)" data-system-id="'+b[h].system_id+'">                    <p class="contact-person-name">'+b[h].name+'</p>                    <p class="contact-person-num"><i class="fa fa-phone"></i> '+b[h].phone+'</p>                </div>                <div class="col-10">                    <label class="checkbox">                        <input type="checkbox" id="chk'+e+++'" data-system-id="'+b[h].system_id+'">                        <div class="checkbox__checkmark"></div>                    </label>                </div>            </div>'));document.getElementById("contactList").innerHTML=d,$(".dash-search").show()}function leaveGroup(a){var b=localStorage.getItem("GRPID"),c=localStorage.getItem("PROID");if(confirm("Are You Sure You Want To Leave Group?")){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(console.log(e.responseText.trim()),e.responseText.trim()?(document.getElementById(c).style.display="none",location.href="groups.html"):console.log("Not Removed"))},e.open("POST",server+"leaveGroup.php",!0);var f="grpId="+b+"&proId="+c;e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}}function deleteGroup(a){var b=localStorage.getItem("GRPID"),c=localStorage.getItem("PROID");if(console.log("grpId:"+b+"::: proId:"+c),confirm("Are You Sure You Want To Delete This Group?")){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(console.log(e.responseText.trim()),e.responseText.trim()?location.href="groups.html":console.log("Not Removed"))},e.open("POST",server+"deleteGroup.php",!0);var f="grpId="+b+"&proId="+c;e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}}function fetchGroupPost(){var a=localStorage.getItem("GRPID"),b="",d="",e="",f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)if(console.log(f.responseText.trim()),!1!==f.responseText.trim()&&""!==f.responseText.trim()){d=JSON.parse(f.responseText.trim()),document.getElementById("proPic").style.backgroundImage="url("+server+getThumb(d[0].imageURL)+")",document.getElementById("proName").innerHTML=d[0].name,grpStatus=d[0].status,0==grpStatus?(document.getElementById("redirectionalLink").setAttribute("onclick",""),document.getElementById("postSendingBox").style.display="none",e='<div class="group-post-disabled"></div>'):e="";for(var a=0;a<d[0].detail.length;a++)if("photo"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+d[0].detail[a].postedByName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(d[0].detail[a].URL)+'" /></div><div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','0','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')">                <i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+" comments</div>            </div>";else if("video"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+d[0].detail[a].desc+'            </div>            <div class="post-video">                <video controls  preload="auto"  loop>                    <source src="'+server+d[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div></div>            </div>";else if("audio"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+d[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div></div>        </div>";else if("file"==d[0].detail[a].type){var c="",g=d[0].detail[a].URL,h=g.substr(g.lastIndexOf(".")+1),i=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var j in i)j==h&&(console.log("File is: "+j),c="img/attach_icons/"+i[j]);b+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+d[0].detail[a].postedByName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+c+'" /></div><div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div></div></div>"}else if("shared"==d[0].detail[a].type){var k="",l="",m=JSON.parse(d[0].detail[a].desc),n=d[0].detail[a].desc.replace(/"/g,"~");if(console.log("innerJson:"+n),"photo"==d[0].detail[a].format)l="images",k='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(m.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+m.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(m.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+m.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+server+getThumb(m.title)+'" />                            </div>                        </div>';else if("text"==d[0].detail[a].format)l="text",k='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(m.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+m.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(m.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+m.desc+"                            </div>                                                 </div>";else if("video"==d[0].detail[a].format)l="videos",k='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(m.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+m.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(m.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+m.desc+'                            </div>                                                     <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+m.title+'" type="video/mp4">                </video>                            </div>                        </div>';else if("audio"==d[0].detail[a].format)l="audios",k='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(m.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+m.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(m.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+m.desc+'                            </div>                                                     <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+m.title+'" type="audio/wav">                </audio>                            </div>                        </div>';else if("file"==d[0].detail[a].format){l="files";var o="",p=m.title,q=p.substr(p.lastIndexOf(".")+1),r=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var s in r)s==q&&(console.log("File is: "+s),o="img/attach_icons/"+r[s]);k='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(m.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+m.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(m.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+m.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+o+'" />                            </div>                        </div>'}b+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+d[0].detail[a].postedByImageURL+')"></div></div><div class="col-60"><p>'+d[0].detail[a].postedByName+'<span class="post-shared-user"> shared</span></p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+"</div></div>"+k+'<div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+n+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/"+l+'\')" ><i class="fa fa-download"></i> </div></div></div>'}document.getElementById("postList").innerHTML=e+b,$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3),document.getElementById("cardLoader").style.display="none"}else console.log("Not Removed")},f.open("POST",server+"fetchGroupPost.php",!0);var g="grpId="+a;console.log(g),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function toggleLoaderGroupPost(a){newLoaderOn(),offsetGroupPost+=10,fetchNextGroupPost(offsetGroupPost)}function fetchNextGroupPost(a){var b=localStorage.getItem("GRPID"),c="",e="",f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)if(console.log(f.responseText.trim()),!1!==f.responseText.trim()&&""!==f.responseText.trim())if(e=JSON.parse(f.responseText.trim()),0!==e[0].length){for(var a=0;a<e[0].detail.length;a++)if("photo"==e[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+e[0].detail[a].postedByName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(e[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(e[0].detail[a].URL)+'" /></div><div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==e[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+e[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(e[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','0','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')">                <i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+" comments</div>            </div>";else if("video"==e[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+e[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+e[0].detail[a].desc+'            </div>            <div class="post-video">                <video controls  preload="auto"  loop>                    <source src="'+server+e[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div>            </div>";else if("audio"==e[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+e[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(e[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+e[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div></div>        </div>";else if("file"==e[0].detail[a].type){var b="",d=e[0].detail[a].URL,g=d.substr(d.lastIndexOf(".")+1),h=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var i in h)i==g&&(console.log("File is: "+i),b="img/attach_icons/"+h[i]);c+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+e[0].detail[a].postedByName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(e[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+b+'" /></div><div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div></div></div>"}else if("shared"==e[0].detail[a].type){var j="",k="",l=JSON.parse(e[0].detail[a].desc),m=e[0].detail[a].desc.replace(/"/g,"~");if(console.log("innerJson:"+m),"photo"==e[0].detail[a].format)k="images",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+server+getThumb(l.title)+'" />                            </div>                        </div>';else if("text"==e[0].detail[a].format)k="text",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+"                            </div>                                                 </div>";else if("video"==e[0].detail[a].format)k="videos",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+l.title+'" type="video/mp4">                </video>                            </div>                        </div>';else if("audio"==e[0].detail[a].format)k="audios",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+l.title+'" type="audio/wav">                </audio>                            </div>                        </div>';else if("file"==e[0].detail[a].format){k="files";var n="",o=l.title,p=o.substr(o.lastIndexOf(".")+1),q=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var r in q)r==p&&(console.log("File is: "+r),n="img/attach_icons/"+q[r]);j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+n+'" />                            </div>                        </div>'}c+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+e[0].detail[a].postedByName+'<span class="post-shared-user"> shared</span></p></div><div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+"</div></div>"+j+'<div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+m+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/"+k+'\')" ><i class="fa fa-download"></i> </div></div></div>'}document.getElementById("postList").innerHTML+=c,$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3),newLoaderOff()}else document.getElementById("loadMore").innerHTML="<p>No More Posts</p>",newLoaderOff();else console.log("Not Removed")},f.open("POST",server+"fetchNextGroupPost.php",!0);var g="grpId="+b+"&offset="+a;console.log(g),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function setGroupId(a){window.localStorage.setItem("GRPID",a),window.location.href="group_posts.html"}function setGroupPostId(a,b,c,d,e,f,g,h,i,j,k){var l='{"id":"'+a+'","type":"'+b+'","genId":"'+c+'","imageURL":"'+d+'","userName":"'+e+'","time":"'+f+'","desc":"'+g+'","title":"'+h+'","count":"'+i+'","posterId":"'+j+'","posterName":"'+k+'"}';console.log(l),localStorage.setItem("GRPPOSTDETAIL",l),window.location.href="group_comment_screen.html"}function fetchGroupComments(){if(!mutualExclusive3){console.log(localStorage.getItem("GRPPOSTDETAIL"));var a=JSON.parse(localStorage.getItem("GRPPOSTDETAIL")),b=a.id,c="";if("photo"==a.type)c+='<div class="row post-head"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')"></div></div><div class="col-60"><p><span onclick="setGroupId(\''+a.genId+"')\">"+a.userName+"</span> < <span  onclick=\"setGeneratorId('"+a.posterId+"')\">"+a.posterName+'</span></p></div><div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(a.title)+'" /></div><div class="row post-comment"><div class="col-50"><i class="fa fa-comment"></i> '+a.count+' comments</div><div class="col-50 text-right"><i ></i></div></div>';else if("text"==a.type)c+='<div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')">                    </div>                </div>                <div class="col-60"><p><span onclick="setGroupId(\''+a.genId+"')\">"+a.userName+"</span> < <span  onclick=\"setGeneratorId('"+a.posterId+"')\">"+a.posterName+'</span></p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'            </div>            <div class="post-comment" >                <i class="fa fa-comment"></i> '+a.count+" comments            </div>";else if("video"==a.type)c+='<div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')">                    </div>                </div>                <div class="col-60"><p><span onclick="setGroupId(\''+a.genId+"')\">"+a.userName+"</span> < <span  onclick=\"setGeneratorId('"+a.posterId+"')\">"+a.posterName+'</span></p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'            </div>            <div class="post-video">                <video controls  preload="auto"  loop >                    <source src="'+server+a.title+'" type="video/mp4">                </video>            </div>            <div class="post-comment" >                <i class="fa fa-comment"></i> '+a.count+" comments            </div>        </div>";else if("audio"==a.type)c+='<div class="row post-head">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')">                    </div>                </div>                <div class="col-60"><p><span onclick="setGroupId(\''+a.genId+"')\">"+a.userName+"</span> < <span  onclick=\"setGeneratorId('"+a.posterId+"')\">"+a.posterName+'</span></p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(a.desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+a.title+'" type="audio/wav">                </audio>            </div>            <div class="post-comment" >                <i class="fa fa-comment"></i> '+a.count+" comments            </div>        </div>";else if("file"==a.type){var d="",e=a.title,f=e.substr(e.lastIndexOf(".")+1),g=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var h in g)h==f&&(console.log("File is: "+h),d="img/attach_icons/"+g[h]);c+='<div class="row post-head"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')"></div></div><div class="col-60"><p><span onclick="setGroupId(\''+a.genId+"')\">"+a.userName+"</span> < <span  onclick=\"setGeneratorId('"+a.posterId+"')\">"+a.posterName+'</span></p></div><div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'</div><div class="post-pic" ><img src="'+d+'" /></div><div class="row post-comment"><div class="col-50"><i class="fa fa-comment"></i> '+a.count+' comments</div><div class="col-50 text-right"><i ></i></div></div>'}else if("shared"==a.type){var i="",k=a.desc.replace(/~/g,'"'),l=JSON.parse(k);if("photo"==l.type)i='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+server+getThumb(l.title)+'" />                            </div>                        </div>';else if("text"==l.type)i='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+"                            </div>                                                 </div>";else if("video"==l.type)i='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+l.title+'" type="video/mp4">                </video>                            </div>                        </div>';else if("audio"==l.type)i='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+l.title+'" type="audio/wav">                </audio>                            </div>                        </div>';else if("file"==l.type){var m="",n=l.title,o=n.substr(n.lastIndexOf(".")+1),p=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var q in p)q==o&&(console.log("File is: "+q),m="img/attach_icons/"+p[q]);i='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+m+'" />                            </div>                        </div>'}c+='<div class="row post-head"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')"></div></div><div class="col-60"><p><span onclick="setGroupId(\''+a.genId+"')\">"+a.userName+"</span> < <span  onclick=\"setGeneratorId('"+a.posterId+"')\">"+a.posterName+'</span></p></div><div class="col-25 post-time">'+formatAMPM(new Date(a.time))+"</div></div>"+i+'<div class="row post-comment"><div class="col-50"><i class="fa fa-comment"></i> '+a.count+' comments</div><div class="col-50 text-right"><i ></i></div></div>'}var r="",s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status)if(console.log(s.responseText.trim()),!1!==s.responseText.trim()&&""!==s.responseText.trim()){for(var a=JSON.parse(s.responseText),d=a.length-1;d>=0;d--)r+='<div class="row post-head" onclick="setGeneratorId(\''+a[d].userId+'\')">            <div class="col-15 post-pro-pic col-center">                <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].imageURL)+')">                </div>            </div>            <div class="col-60">                <p>'+a[d].name+'</p>                <p class="comment">'+a[d].comment+'</p>            </div>            <div class="col-25 post-time">                '+formatAMPM(new Date(a[d].time))+"            </div>        </div>";document.getElementById("commentFocus").innerHTML=c+r;var e="<i class='fa fa-comment'></i> "+a[0].count+" comments";localStorage.setItem("GROUPCOMMENTCOUNT",b+","+a[0].count),$(".post-comment").html(e),$("html, body").scrollTop($(document).height())}else document.getElementById("commentFocus").innerHTML=c},s.open("POST",server+"fetchGroupComments.php",!0);var t="postId="+b;s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(t)}}function sendGroupComment(){document.getElementById("sendEnable").style.display="none",document.getElementById("sendDisable").style.display="block";var a=localStorage.getItem("PROID"),b=JSON.parse(localStorage.getItem("GRPPOSTDETAIL")),c=b.id,d=document.getElementById("commentMessage").value,e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(mutualExclusive3=!0,console.log(e.responseText.trim()),e.responseText.trim()?(document.getElementById("commentMessage").value="",mutualExclusive3=!1,fetchGroupComments()):(console.log("error"),mutualExclusive3=!1))},e.open("POST",server+"sendGroupComment.php",!0);var f="proId="+a+"&postId="+c+"&message="+encodeURIComponent(d);e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}function uploadGroupText(a){var b=document.getElementById("proText").value;if(console.log("UGT:::"+b),""!==b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(console.log(c.responseText.trim()),c.responseText.trim()&&(closePopup(),"home"==a?fetchGroupHomePostPrevious():fetchGroupPost(),removeJunk()))},c.open("POST",server+"uploadGroupText.php",!0);var d="proText="+b+"&grpId="+localStorage.getItem("GRPID")+"&proId="+localStorage.getItem("PROID");c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d),console.log(d)}else console.log("Status Not Updated.")}function postGroupTakeVideo(a){var b=function(a){var b,c,d;for(b=0,d=a.length;b<d;b+=1)c=a[b].fullPath,checkURL=c,document.getElementById("videoImage").src=c,popupVideo()},c=function(a){navigator.notification.console.log("Error code: "+a.code,null,"Capture Error")};navigator.device.capture.captureVideo(b,c,{limit:1,quality:0})}function postGroupGetVideo(a){function b(a){checkURL=a,document.getElementById("videoImage").src=a,closepopupplain1(),popupVideo()}function c(a){console.log("Failed because: "+a)}console.log("get vid"),navigator.camera.getPicture(b,c,{quality:50,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.VIDEO,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function uploadGroupVideo(a){function g(b){console.log("Code = "+b.responseCode),console.log("Response = "+b.response),console.log("Sent = "+b.bytesSent),console.log(b.response),document.getElementById("videoDesc").value="",closePopup(),"home"==a?fetchGroupHomePostPrevious():fetchGroupPost(),setTimeout(function(){$("video").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3),removeJunk()}function h(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}console.log("in upload video:"+checkURL);var b=encodeURI(server+"uploadGroupVideo.php?grpId="+localStorage.getItem("GRPID")+"&proId="+localStorage.getItem("PROID")+"&desc="+document.getElementById("videoDesc").value),c=new FileUploadOptions;c.fileKey="file",c.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),c.mimeType="video/3gpp",c.httpMethod="POST";var d={};d.grpId=localStorage.getItem("GRPID"),d.proId=localStorage.getItem("PROID"),d.desc=document.getElementById("videoDesc").value,c.params=d,c.chunkedMode=!1;var e={headerParam:"headerValue"};c.headers=e;var f=new FileTransfer;f.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},f.upload(checkURL,b,g,h,c)}function postGroupTakeAudio(a){pendingAudio=!0;var b=function(a){var b,c,d;for(b=0,d=a.length;b<d;b+=1)c=a[b].fullPath,checkURL=c,document.getElementById("audioImage").src=checkURL,popupAudio()},c=function(a){alert("Sorry! Your phone dosen't support this functionality."),console.log("Error code: "+a,null,"Capture Error")};navigator.device.capture.captureAudio(b,c,{limit:1})}function postGroupGetAudio(a){function b(a){checkURL=a;var b=a.split(".")[1];"wav"==b||"amr"==b||"mp3"==b?(document.getElementById("audioImage").src=a,popupAudio()):alert("Audio File Format Not Supported."),closepopupplain2()}function c(a){console.log("Failed because: "+a)}navigator.camera.getPicture(b,c,{quality:100,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.ALLMEDIA,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function uploadGroupAudio(a){function g(b){console.log("Code = "+b.responseCode),console.log("Response = "+b.response),console.log("Sent = "+b.bytesSent),console.log(b.response),document.getElementById("audioDesc").value="",closePopup(),"home"==a?fetchGroupHomePostPrevious():fetchGroupPost(),setTimeout(function(){$("audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3),removeJunk()}function h(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}pendingAudio=!1,console.log("in upload audio:"+checkURL);var b=encodeURI(server+"uploadGroupAudio.php"),c=new FileUploadOptions;c.fileKey="file",c.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),c.mimeType="audio/wav",c.httpMethod="POST";var d={};d.grpId=localStorage.getItem("GRPID"),d.proId=localStorage.getItem("PROID"),d.desc=document.getElementById("audioDesc").value,c.params=d,c.chunkedMode=!1;var e={headerParam:"headerValue"};c.headers=e;var f=new FileTransfer;f.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},f.upload(checkURL,b,g,h,c)}function postGroupTakePhoto(a){console.log("get pic"),localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","TAKE"),navigator.camera.getPicture(postGroupTakePhotoSuccess,postGroupTakePhotoFail,{quality:60,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA})}function postGroupTakePhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,checkURL=a,document.getElementById("photoImage").style.backgroundImage="url("+a+")",closepopupplain(),popupPhoto(),localStorage.setItem("PAGELOC","")}function postGroupTakePhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function postGroupGetPhoto(a){localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","GET"),console.log("get pic"),navigator.camera.getPicture(postGroupGetPhotoSuccess,postGroupGetPhotoFail,{quality:60,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY})}function postGroupGetPhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,checkURL=a,document.getElementById("photoImage").style.backgroundImage="url("+a+")",closepopupplain(),popupPhoto(),localStorage.setItem("PAGELOC","")}function postGroupGetPhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function uploadGroupPhoto(a){function g(b){console.log("Code = "+b.responseCode),console.log("Response = "+b.response),console.log("Sent = "+b.bytesSent),console.log(b.response),document.getElementById("photoDesc").value="",closePopup(),"home"==a?fetchGroupHomePostPrevious():fetchGroupPost(),removeJunk()}function h(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}var b=encodeURI(server+"uploadGroupPhoto.php"),c=new FileUploadOptions;c.fileKey="file",c.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),c.mimeType="image/jpeg",c.httpMethod="POST";var d={};d.grpId=localStorage.getItem("GRPID"),d.proId=localStorage.getItem("PROID"),d.desc=document.getElementById("photoDesc").value,c.params=d,c.chunkedMode=!1;var e={headerParam:"headerValue"};c.headers=e;var f=new FileTransfer;f.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},f.upload(checkURL,b,g,h,c)}function postGroupGetFile(a){function b(a){checkURL=a;var b=!1,c=checkURL.substr(checkURL.lastIndexOf(".")+1),d=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var e in d)e==c&&(console.log("File: "+e),b=!0,document.getElementById("fileImage").style.backgroundImage="url(img/attach_icons/"+d[e]+")",popupFile());b||alert("Sorry, File Not Supported.")}function c(a){console.log("Failed because: "+a)}console.log("get file"),navigator.camera.getPicture(b,c,{quality:50,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.ALLMEDIA,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function uploadGroupFile(a){function l(b){console.log("Code = "+b.responseCode),console.log("Response = "+b.response),console.log("Sent = "+b.bytesSent),console.log(b.response),document.getElementById("fileDesc").value="",closePopup(),"home"==a?fetchGroupHomePostPrevious():fetchGroupPost(),removeJunk()}function m(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}console.log("in upload group file:"+checkURL);var b=checkURL.substr(checkURL.lastIndexOf(".")+1);console.log("extenstion:"+b);var c=JSON.parse('{"pdf":"application/pdf" , "txt":"text/plain" , "doc":"application/msword" , "docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document" , "ppt":"application/vnd.ms-powerpointtd>" , "pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation" , "xls":"application/vnd.ms-excel" , "xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}'),d=!1,e="";for(var f in c)f==b&&(console.log("File: "+f),d=!0,e=c[f]);if(d){console.log(e);var g=encodeURI(server+"uploadGroupFile.php?proId="+localStorage.getItem("PROID")+"&desc="+document.getElementById("fileDesc").value+"&ext="+b),h=new FileUploadOptions;h.fileKey="file",h.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),h.mimeType=e,h.httpMethod="POST";var i={};i.grpId=localStorage.getItem("GRPID"),i.proId=localStorage.getItem("PROID"),i.desc=document.getElementById("fileDesc").value,i.ext=b,h.params=i,h.chunkedMode=!1;var j={headerParam:"headerValue"};h.headers=j;var k=new FileTransfer;k.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},k.upload(checkURL,g,l,m,h)}else alert("File Not Supported.")}function createCelebProfile(){if(checkBox)$("#privacyErr").html("Please Agree To Proceed.");else{var a=/^[a-z ,.'-]+$/i,b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=document.getElementById("proCategory").value,d=document.getElementById("proName").value,e=d.split(" ")[0],f=d.split(" ").length>1?d.split(" ")[1]:"",g=document.getElementById("proEmail").value,h="";"Celebrity"==c?"0"==(h=document.getElementById("proGender").value)&&($("#proGender").css("border-bottom","2px solid #000"),$("#genderErr").html("Please Select Your Gender")):h="",console.log(h);var i=document.getElementById("proStatus").value;if(coverPicUpdated)if(proPicUpdated)if("0"!=c)if(d.match(a))if(g.match(b))if(" "!=i&&""!==i){var j=new XMLHttpRequest;j.onreadystatechange=function(){loadingOnC(),4==j.readyState&&200==j.status&&(console.log(j.responseText.trim()),!1!==j.responseText.trim()&&celebDisplayImageUpload(j.responseText.trim()))},j.open("POST",server+"createCelebProfile.php",!0);var k="proCategory="+c+"&proFName="+e+"&proLName="+f+"&proEmail="+g+"&proGender="+h+"&proStatus="+i+"&proId="+localStorage.getItem("PROID");j.setRequestHeader("Content-type","application/x-www-form-urlencoded"),console.log(k),j.send(k)}else $("#proStatus").css("border-bottom","2px solid #000"),$("#statusErr").html("Invalid Status");else $("#proEmail").css("border-bottom","2px solid #000"),$("#emailErr").html("Invalid Email");else $("#proName").css("border-bottom","2px solid #000"),$("#nameErr").html("Invalid Name");else $("#proCategory").css("border-bottom","2px solid #000"),$("#catErr").html("Invalid Category");else $("#proPic").css("border","2px solid #000"),$("#picErr").html("Select a display picture.");else $("#picErr").html("Select a cover picture.")}}function takePicture(){console.log("Take Pic"),localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","TAKE"),localStorage.setItem("CELEBPICTYPE","DP"),navigator.camera.getPicture(takePictureSuccess,takePictureFail,{quality:30,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA})}function takePictureSuccess(a){console.log("CAMERA SUCC"),appState.takingPicture=!1,appState.imageUri=a,document.getElementById("proPic").style.backgroundImage="url("+a+")",checkURL=a,fileURL=a,proPicUpdated=!0,cleanup(),localStorage.setItem("PAGELOC","")}function takePictureFail(a){console.log("CAMERA FAIL"),appState.takingPicture=!1,console.log("Failed because: "+a)}function getPicture(){console.log("get pic"),localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","GET"),localStorage.setItem("CELEBPICTYPE","DP"),navigator.camera.getPicture(getPictureSuccess,getPictureFail,{quality:30,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY})}function getPictureSuccess(a){appState.takingPicture=!1,appState.imageUri=a,document.getElementById("proPic").style.backgroundImage="url("+a+")",checkURL=a,fileURL=a,proPicUpdated=!0,localStorage.setItem("PAGELOC","")}function getPictureFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function celebDisplayImageUpload(a){function g(b){console.log("Code = "+b.responseCode),console.log("Response = "+b.response),console.log("Sent = "+b.bytesSent),console.log(b.response),celebDisplayImageUploadCover(a)}function h(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure"),loadingOffC()}console.log("in upload file:"+checkURL+":::"+a);var b=encodeURI(server+"celebDisplayImageUpload.php"),c=new FileUploadOptions;c.fileKey="fileUploadKey",c.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),c.mimeType="image/jpeg",c.httpMethod="POST";var d={};d.celId=a,c.params=d,c.chunkedMode=!1;var e={headerParam:"headerValue"};c.headers=e,(new FileTransfer).upload(checkURL,b,g,h,c)}function takePictureC(){localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","TAKE"),localStorage.setItem("CELEBPICTYPE","COVER"),navigator.camera.getPicture(takePictureCSuccess,takePictureCFail,{quality:30,correctOrientation:!1,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA})}function takePictureCSuccess(a){appState.takingPicture=!1,appState.imageUri=a,document.getElementById("coverProPic").style.backgroundImage="url(data:image/jpeg;base64,"+a+")",checkURLC=a,coverPicUpdated=!0,cleanup(),localStorage.setItem("PAGELOC","")}function takePictureCFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function getPictureC(){localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","GET"),localStorage.setItem("CELEBPICTYPE","COVER"),navigator.camera.getPicture(getPictureCSuccess,getPictureCFail,{quality:30,correctOrientation:!1,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY})}function getPictureCSuccess(a){appState.takingPicture=!1,appState.imageUri=a,document.getElementById("coverProPic").style.backgroundImage="url(data:image/jpeg;base64,"+a+")",checkURLC=a,coverPicUpdated=!0,localStorage.setItem("PAGELOC","")}function getPictureCFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function celebDisplayImageUploadCover(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),0!=b.responseText.trim()&&(localStorage.setItem("CELEBAPPLIED",1),window.location.href="celeb_pending.html"))},b.open("POST",server+"celebDisplayImageUploadCover.php",!0);var c="celId="+a+"&screen="+checkURLC;b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}function fetchCelebrityList(a){console.log("FETCH LIST"),preLoaderOn();var b="",c="",d="",e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status)if(console.log(e.responseText.trim().length),0!=e.responseText.trim().length&&""!=e.responseText.trim()){c=JSON.parse(e.responseText.trim()),socialSearchData=c;for(var a=0;a<c.length;a++)c[a].applied==localStorage.getItem("PROID")&&(document.getElementById("statusButton").style.display="none",localStorage.setItem("CELEBSTATUS","1")),1==localStorage.getItem("CELEBAPPLIED")?(document.getElementById("celebStatus").style.display="block",1==localStorage.getItem("CELEBSTATUS")?document.getElementById("celebStatus").setAttribute("onclick","location.href = 'celeb_posts.html'"):document.getElementById("celebStatus").setAttribute("onclick","location.href = 'celeb_pending.html'")):document.getElementById("celebStatus").style.display="none",d=c[a].is_follower?' <div class="col-30 col-center">    <div class="celeb-follow-btn follow-active">       Following    </div>       </div>':'<div class="col-30 col-center"  onclick="follow(\''+c[a].id+'\')">            <div class="celeb-follow-btn" id="cel'+c[a].id+'" >              <span>+ </span> Follow        </div>',b+='<div class="celeb-pro-list">            <div class="row">                <div class="col-70" onclick="gotoCeleb(\''+c[a].id+'\')">                    <div class="row">                        <div class="col-20 celeb-pro-pic-base">                            <div class="celeb-pro-pic">                                <div class="celeb-pro-pic-cont" style="background-image:url('+server+getThumb(c[a].imageURL)+')">                                </div>                            </div>                        </div>                        <div class="col-80">                            <div class="celeb-pro-desc">                                <h3>'+c[a].name+"</h3>                                <p>"+c[a].quote+"</p>                            </div>                        </div>                    </div>                </div>  "+d+"                 </div>            </div>        </div>";document.getElementById("celebList").innerHTML=b,preLoaderOff()}else console.log("No Celebrity"),document.getElementById("blankCelebList").style.display="block",preLoaderOff()},e.open("POST",server+"fetchCelebrityList.php",!0);var f="proId="+localStorage.getItem("PROID");e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}function socialSearch(a){document.getElementById("crossHide").style.display="table-cell";for(var b="",c="",d=socialSearchData,e=0;e<d.length;e++)-1!=d[e].name.toLowerCase().indexOf(a.value.toLowerCase())&&(c=d[e].is_follower?' <div class="col-30 col-center">    <div class="celeb-follow-btn follow-active">       Following    </div>       </div>':'<div class="col-30 col-center"  onclick="follow(\''+d[e].id+'\')">            <div class="celeb-follow-btn" id="cel'+d[e].id+'" >              <span>+ </span> Follow        </div>',b+='<div class="celeb-pro-list">            <div class="row">                <div class="col-70" onclick="gotoCeleb(\''+d[e].id+'\')">                    <div class="row">                        <div class="col-20 celeb-pro-pic-base">                            <div class="celeb-pro-pic">                                <div class="celeb-pro-pic-cont" style="background-image:url('+server+getThumb(d[e].imageURL)+')">                                </div>                            </div>                        </div>                        <div class="col-80">                            <div class="celeb-pro-desc">                                <h3>'+d[e].name+"</h3>                                <p>"+d[e].quote+"</p>                            </div>                        </div>                    </div>                </div>  "+c+"                 </div>            </div>        </div>");document.getElementById("celebList").innerHTML=b}function socialClear(){document.getElementById("search-input").value="";for(var a="",b="",c=socialSearchData,d=0;d<c.length;d++)b=c[d].is_follower?' <div class="col-30 col-center">    <div class="celeb-follow-btn follow-active">       Following    </div>       </div>':'<div class="col-30 col-center"  onclick="follow(\''+c[d].id+'\')">            <div class="celeb-follow-btn" id="cel'+c[d].id+'" >              <span>+ </span> Follow        </div>',a+='<div class="celeb-pro-list">            <div class="row">                <div class="col-70" onclick="gotoCeleb(\''+c[d].id+'\')">                    <div class="row">                        <div class="col-20 celeb-pro-pic-base">                            <div class="celeb-pro-pic">                                <div class="celeb-pro-pic-cont" style="background-image:url('+server+getThumb(c[d].imageURL)+')">                                </div>                            </div>                        </div>                        <div class="col-80">                            <div class="celeb-pro-desc">                                <h3>'+c[d].name+"</h3>                                <p>"+c[d].quote+"</p>                            </div>                        </div>                    </div>                </div>  "+b+"                 </div>            </div>        </div>";document.getElementById("celebList").innerHTML=a}function follow(a){if(confirm("Do You Want To Follow?")){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),b.responseText.trim()&&($("#cel"+a).addClass("follow-active"),$("#cel"+a).html("Following"),localStorage.setItem("LATESTFOLLOWCELEB",1)))},b.open("POST",server+"followCelebrity.php",!0);var c="cId="+a+"&proId="+localStorage.getItem("PROID");b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}}function followIn(a){if(confirm("Do You Want To Follow?")){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),b.responseText.trim()&&(document.getElementById("isFollower").innerHTML="Unfollow",document.getElementById("followCount").innerHTML=parseInt(document.getElementById("followCount").innerHTML)+1,document.getElementById("isFollower").setAttribute("onclick","followOut('"+a+"')"),localStorage.setItem("LATESTFOLLOWCELEB",1)))},b.open("POST",server+"followCelebrity.php",!0);var c="cId="+a+"&proId="+localStorage.getItem("PROID");b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}}function followOut(a){if(confirm("Do You Want To Unfollow?")){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),b.responseText.trim()&&(document.getElementById("isFollower").innerHTML="Follow",document.getElementById("followCount").innerHTML=parseInt(document.getElementById("followCount").innerHTML)-1,document.getElementById("isFollower").setAttribute("onclick","followIn('"+a+"')"),localStorage.setItem("LATESTFOLLOWCELEB",1)))},b.open("POST",server+"unfollowCelebrity.php",!0);var c="cId="+a+"&proId="+localStorage.getItem("PROID");b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}}function gotoCeleb(a){window.localStorage.setItem("CELID",a),window.location.href="celeb_profile.html"}function preLoaderOn(a){document.getElementById("preLoader").style.display="table"}function preLoaderOff(a){document.getElementById("preLoader").style.display="none"}function fetchCelebrityDetail(){preLoaderOn();var a=localStorage.getItem("CELID"),b="",d="",f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)if(console.log(f.responseText.trim()),!1!==f.responseText.trim()){d=JSON.parse(f.responseText.trim()),document.getElementById("coverPic").style.backgroundImage="url("+server+d[0].imageURLCover+")",document.getElementById("proPic").style.backgroundImage="url("+server+getThumb(d[0].imageURL)+")",document.getElementById("proName").innerHTML=d[0].name,document.getElementById("followCount").innerHTML=d[0].followerCount,document.getElementById("proQuote").innerHTML=d[0].quote,d[0].is_follower?(document.getElementById("isFollower").innerHTML="Unfollow",document.getElementById("isFollower").setAttribute("onclick",'followOut("'+d[0].id+'")')):(document.getElementById("isFollower").innerHTML="Follow",document.getElementById("isFollower").setAttribute("onclick",'followIn("'+d[0].id+'")'));for(var a=0;a<d[0].detail.length;a++)if("photo"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" ><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')"></div></div><div class="col-60"><p>'+d[0].name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(d[0].detail[a].URL)+'" /></div><div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','0','"+d[0].detail[a].commentCount+'\')">                <i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+" comments</div>            </div>";else if("video"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+d[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div></div>            </div>";else if("audio"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+d[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div></div>        </div>";else if("file"==d[0].detail[a].type){var c="",e=d[0].detail[a].URL,g=e.substr(e.lastIndexOf(".")+1),h=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var i in h)i==g&&(console.log("File is: "+i),c="img/attach_icons/"+h[i]);b+='<div class="post-container"><div class="row post-head" ><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')"></div></div><div class="col-60"><p>'+d[0].name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+c+'" /></div><div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div></div></div>"}document.getElementById("postList").innerHTML=b,$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3),preLoaderOff()}else console.log("Not Removed"),preLoaderOff()},f.open("POST",server+"fetchCelebrityDetail.php",!0);var g="celId="+a+"&proId="+localStorage.getItem("PROID");f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function toggleLoader(a){document.getElementById("loadMore").style.display="none",document.getElementById("proLoader").style.display="block",offset+=10,fetchNextCelebrityDetail(offset)}function fetchNextCelebrityDetail(a){var b=localStorage.getItem("CELID"),c="",d="",e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status)if(!1!==e.responseText.trim())if(d=JSON.parse(e.responseText.trim()),0!==d[0].length){for(var a=0;a<d[0].detail.length;a++)if("photo"==d[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" ><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')"></div></div><div class="col-60"><p>'+d[0].name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(d[0].detail[a].URL)+'" /></div><div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==d[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','0','"+d[0].detail[a].commentCount+'\')">                <i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+" comments</div>            </div>";else if("video"==d[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <video controls  preload="auto"  loop>                    <source src="'+server+d[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div></div>            </div>";else if("audio"==d[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+d[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div></div>        </div>";else if("file"==d[0].detail[a].type){var b="",f=d[0].detail[a].URL,g=f.substr(f.lastIndexOf(".")+1),h=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var i in h)i==g&&(console.log("File is: "+i),b="img/attach_icons/"+h[i]);c+='<div class="post-container"><div class="row post-head" ><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')"></div></div><div class="col-60"><p>'+d[0].name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+b+'" /></div><div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div></div></div>"}document.getElementById("postList").innerHTML+=c,document.getElementById("loadMore").style.display="block",document.getElementById("proLoader").style.display="none",$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3)}else document.getElementById("loadMore").innerHTML="<p>No More Posts</p>",document.getElementById("loadMore").setAttribute("onclick",""),document.getElementById("loadMore").style.display="block",document.getElementById("proLoader").style.display="none";else console.log("No result")},e.open("POST",server+"fetchNextCelebrityDetail.php",!0);var f="celId="+b+"&offset="+a+"&proId="+localStorage.getItem("PROID");e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}function setCelebId(a){window.localStorage.setItem("CELID",a),window.location.href="celeb_profile.html"}function setCelebPostId(a,b,c,d,e,f,g,h,i){var j='{"id":"'+a+'","type":"'+b+'","genId":"'+c+'","imageURL":"'+d+'","userName":"'+e+'","time":"'+f+'","desc":"'+g+'","title":"'+h+'","count":"'+i+'"}';localStorage.setItem("CELEBPOSTDETAIL",j),window.location.href="celebrity_comment_screen.html"}function fetchCelebrityComments(){if(!mutualExclusive2){var a=JSON.parse(localStorage.getItem("CELEBPOSTDETAIL")),b=a.id,c="";if("photo"==a.type)c+='<div class="row post-head" onclick="setCelebId(\''+a.genId+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')"></div></div><div class="col-60"><p>'+a.userName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(a.title)+'" /></div><div class="row post-comment"><div class="col-50"><i class="fa fa-comment"></i> '+a.count+' comments</div><div class="col-50 text-right"><i class="fa fa-download"></i></div></div>';else if("text"==a.type)c+='<div class="row post-head" onclick="setCelebId(\''+a.genId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a.userName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'            </div>            <div class="post-comment" >                <i class="fa fa-comment"></i> '+a.count+" comments            </div>";else if("video"==a.type)c+='<div class="row post-head" onclick="setCelebId(\''+a.genId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a.userName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'            </div>            <div class="post-video">                <video controls  preload="auto"  loop >                    <source src="'+server+a.title+'" type="video/mp4">                </video>            </div>            <div class="post-comment" >                <i class="fa fa-comment"></i> '+a.count+" comments            </div>        </div>";else if("audio"==a.type)c+='<div class="row post-head" onclick="setCelebId(\''+a.genId+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+a.userName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(a.desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+a.title+'" type="audio/wav">                </audio>            </div>            <div class="post-comment" >                <i class="fa fa-comment"></i> '+a.count+" comments            </div>        </div>";else if("file"==a.type){var d="",e=a.title,f=e.substr(e.lastIndexOf(".")+1),g=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var h in g)h==f&&(console.log("File is: "+h),d="img/attach_icons/"+g[h]);c+='<div class="row post-head" onclick="setCelebId(\''+a.genId+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(a.imageURL)+')"></div></div><div class="col-60"><p>'+a.userName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(a.time))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(a.desc)+'</div><div class="post-pic" ><img src="'+d+'" /></div><div class="row post-comment"><div class="col-50"><i class="fa fa-comment"></i> '+a.count+' comments</div><div class="col-50 text-right"><i class="fa fa-download"></i></div></div>'}var i="",j=new XMLHttpRequest;j.onreadystatechange=function(){if(4==j.readyState&&200==j.status)if(!1!==j.responseText.trim()&&""!=j.responseText.trim()){for(var a=JSON.parse(j.responseText),d=a.length-1;d>=0;d--)i+='<div class="row post-head" >            <div class="col-15 post-pro-pic col-center">                <div class="dash-chat-img" style="background-image:url('+server+getThumb(a[d].imageURL)+')">                </div>            </div>            <div class="col-60">                <p>'+a[d].name+'</p>                <p class="comment">'+a[d].comment+'</p>            </div>            <div class="col-25 post-time">                '+formatAMPM(new Date(a[d].time))+"            </div>        </div>";document.getElementById("commentFocus").innerHTML=c+i;var e="<i class='fa fa-comment'></i> "+a[0].count+" comments";localStorage.setItem("CELEBCOMMENTCOUNT",b+","+a[0].count),$(".post-comment").html(e),$("html, body").scrollTop($(document).height())}else document.getElementById("commentFocus").innerHTML=c},j.open("POST",server+"fetchCelebrityComments.php",!0);var k="postId="+b;j.setRequestHeader("Content-type","application/x-www-form-urlencoded"),j.send(k)}}function sendCelebrityComment(){document.getElementById("sendEnable").style.display="none",document.getElementById("sendDisable").style.display="block";var a=localStorage.getItem("PROID"),b=JSON.parse(localStorage.getItem("CELEBPOSTDETAIL")),c=b.id,d=document.getElementById("commentMessage").value,e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(mutualExclusive2=!0,e.responseText.trim()?(document.getElementById("commentMessage").value="",mutualExclusive2=!1,fetchCelebrityComments()):(console.log("error"),mutualExclusive2=!1))},e.open("POST",server+"sendCelebrityComment.php",!0);var f="proId="+a+"&postId="+c+"&message="+encodeURIComponent(d);e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}function checkCelebrityStatus(){console.log("CHECK STATUS");var a=localStorage.getItem("PROID"),b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),"Y"==b.responseText.trim()?fetchCelebrityList():"X"==b.responseText.trim()?(document.getElementById("statusButton").style.display="none",fetchCelebrityList()):(localStorage.setItem("CID",b.responseText.trim()),localStorage.setItem("CELEBAPPLIED",1),fetchCelebrityList()))},b.open("POST",server+"checkCelebrityStatus.php",!0);var c="proId="+a;b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}function fetchMyCelebrityProfile(){preLoaderOn();var a=localStorage.getItem("CID"),d="",e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(!1!==e.responseText.trim()?(localStorage.setItem("MYCELEBPROFILEINFO",e.responseText.trim()),d=JSON.parse(e.responseText.trim()),document.getElementById("coverPic").style.backgroundImage="url("+server+d.imageURLCover+")",document.getElementById("proPic").style.backgroundImage="url("+server+getThumb(d.imageURL)+")",document.getElementById("proName").innerHTML=d.name,"Celebrity"==d.category?document.getElementById("proGenderEmail").innerHTML=d.gender+", "+d.email:document.getElementById("proGenderEmail").innerHTML=d.email,document.getElementById("followCount").innerHTML=d.followerCount,document.getElementById("proQuote").innerHTML=d.quote,preLoaderOff()):(console.log("Not Result"),preLoaderOff()))},e.open("POST",server+"fetchMyCelebrityProfile.php",!0);var f="cId="+a;e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}function extractMyCelebrityProfile(){preLoaderOn();var a=JSON.parse(localStorage.getItem("MYCELEBPROFILEINFO"));document.getElementById("coverProPic").style.backgroundImage="url("+server+a.imageURLCover+")",document.getElementById("proPic").style.backgroundImage="url("+server+getThumb(a.imageURL)+")",document.getElementById("proCategory").value=a.category,document.getElementById("proName").value=a.name,document.getElementById("proEmail").value=a.email,"Celebrity"==a.category?document.getElementById("proGender").value=a.gender:document.getElementById("genderSelection").style.display="none",document.getElementById("proStatus").innerHTML=a.quote,preLoaderOff()}function updateCelebProfile(){if(checkBox)$("#privacyErr").html("Please Agree To Proceed.");else{var a=/^[a-z ,.'-]+$/i,b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=document.getElementById("proCategory").value,d=document.getElementById("proName").value,e=d.split(" ")[0],f=d.split(" ").length>1?d.split(" ")[1]:"",g=document.getElementById("proEmail").value,h="";h="Celebrity"==c?document.getElementById("proGender").value:"",console.log(h);var i=document.getElementById("proStatus").value;if("0"!=c)if(d.match(a))if(g.match(b))if(" "!=i&&""!==i){var j=new XMLHttpRequest;j.onreadystatechange=function(){loadingOnC(),4==j.readyState&&200==j.status&&(console.log(j.responseText.trim()),!1!==j.responseText.trim()&&celebDisplayImageUploadPrev(j.responseText.trim()))},j.open("POST",server+"updateCelebProfile.php",!0);var k="proCategory="+c+"&proFName="+e+"&proLName="+f+"&proEmail="+g+"&proGender="+h+"&proStatus="+i+"&cId="+localStorage.getItem("CID");j.setRequestHeader("Content-type","application/x-www-form-urlencoded"),j.send(k)}else $("#proStatus").css("border-bottom","2px solid #000"),$("#statusErr").html("Invalid Status");else $("#proEmail").css("border-bottom","2px solid #000"),$("#emailErr").html("Invalid Email");else $("#proName").css("border-bottom","2px solid #000"),$("#nameErr").html("Invalid Name");else $("#proCategory").css("border-bottom","2px solid #000"),$("#catErr").html("Invalid Category")}}function celebDisplayImageUploadPrev(a){function g(b){console.log("Code = "+b.responseCode),console.log("Response = "+b.response),console.log("Sent = "+b.bytesSent),console.log(b.response),celebDisplayImageUploadCoverPrev(a)}function h(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure"),loadingOffC()}if(proPicUpdated){console.log("in upload file:"+checkURL+":::"+a);var b=encodeURI(server+"celebDisplayImageUploadPrev.php"),c=new FileUploadOptions;c.fileKey="fileUploadKey",c.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),c.mimeType="image/jpeg",c.httpMethod="POST";var d={};d.celId=a,c.params=d,c.chunkedMode=!1;var e={headerParam:"headerValue"};c.headers=e;(new FileTransfer).upload(checkURL,b,g,h,c)}else celebDisplayImageUploadCoverPrev(a)}function celebDisplayImageUploadCoverPrev(a){if(coverPicUpdated){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&(console.log(b.responseText.trim()),0!=b.responseText.trim()&&(loadingOffC(),window.location.href="my_celeb_profile.html"))},b.open("POST",server+"celebDisplayImageUploadCoverPrev.php",!0);var c="celId="+a+"&screen="+checkURLC;b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c)}else loadingOffC(),window.location.href="my_celeb_profile.html"}function fetchMyCelebrityPost(){var a=localStorage.getItem("CID"),b="",d="",e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status)if(console.log(e.responseText.trim()),!1!==e.responseText.trim()){d=JSON.parse(e.responseText.trim()),document.getElementById("proPic").style.backgroundImage="url("+server+getThumb(d[0].imageURL)+")",document.getElementById("proName").innerHTML=d[0].name;for(var a=0;a<d[0].detail.length;a++)if("photo"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" ><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')"></div></div><div class="col-60"><p>'+d[0].name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(d[0].detail[a].URL)+'" /></div><div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','0','"+d[0].detail[a].commentCount+'\')">                <i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+" comments</div>            </div>";else if("video"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <video controls  preload="auto"  loop>                    <source src="'+server+d[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div> </div>            </div>";else if("audio"==d[0].detail[a].type)b+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+d[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div> </div>        </div>";else if("file"==d[0].detail[a].type){var c="",f=d[0].detail[a].URL,g=f.substr(f.lastIndexOf(".")+1),h=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var i in h)i==g&&(console.log("File is: "+i),c="img/attach_icons/"+h[i]);b+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-pic">              <img src="'+c+'" />            </div>      <div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div> </div>        </div>"}document.getElementById("postList").innerHTML=b,$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3),document.getElementById("cardLoader").style.display="none"}else console.log("Not Removed")},e.open("POST",server+"fetchMyCelebrityPost.php",!0);var f="cId="+a;e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}function toggleLoaderMyCelebrityPost(a){newLoaderOn(),offsetMyCelebPost+=10,fetchNextMyCelebrityPost(offsetMyCelebPost)}function fetchNextMyCelebrityPost(a){var b=localStorage.getItem("CID"),c="",e="",f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)if(console.log(f.responseText.trim()),!1!==f.responseText.trim())if(e=JSON.parse(f.responseText.trim()),0!==e[0].length){for(var a=0;a<e[0].detail.length;a++)if("photo"==e[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" ><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].imageURL)+')"></div></div><div class="col-60"><p>'+e[0].name+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(e[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(e[0].detail[a].URL)+'" /></div><div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==e[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+e[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(e[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setCelebPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','0','"+e[0].detail[a].commentCount+'\')">                <i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+" comments</div>            </div>";else if("video"==e[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+e[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(e[0].detail[a].desc)+'            </div>            <div class="post-video">                <video controls  preload="auto"  loop>                    <source src="'+server+e[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div> </div>            </div>";else if("audio"==e[0].detail[a].type)c+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+e[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(e[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+e[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div> </div>        </div>";else if("file"==e[0].detail[a].type){var b="",d=e[0].detail[a].URL,g=d.substr(d.lastIndexOf(".")+1),h=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var i in h)i==g&&(console.log("File is: "+i),b="img/attach_icons/"+h[i]);c+='<div class="post-container"><div class="row post-head" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].imageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+e[0].name+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(e[0].detail[a].desc)+'            </div>            <div class="post-pic">              <img src="'+b+'" />            </div>      <div class="row post-comment"><div class="col-50" onclick="setCelebPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div> </div>        </div>"}document.getElementById("postList").innerHTML+=c,newLoaderOff(),$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3)}else document.getElementById("loadMore").innerHTML="<p>No More Posts</p>",newLoaderOff();else console.log("Not Removed")},f.open("POST",server+"fetchNextMyCelebrityPost.php",!0);var g="cId="+b+"&offset="+a;console.log(g),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function uploadCelebText(a){var b=document.getElementById("proText").value;if(""!==b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(console.log(c.responseText.trim()),c.responseText.trim()&&(closePopup(),fetchMyCelebrityPost(),removeJunk()))},c.open("POST",server+"uploadCelebText.php",!0);var d="proText="+b+"&cId="+localStorage.getItem("CID");c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(d)}else console.log("Status Not Updated.")}function postCelebTakeVideo(a){var b=function(a){var b,c,d;for(b=0,d=a.length;b<d;b+=1)c=a[b].fullPath,checkURL=c,document.getElementById("videoImage").src=c,popupVideo()},c=function(a){navigator.notification.console.log("Error code: "+a.code,null,"Capture Error")};navigator.device.capture.captureVideo(b,c,{limit:1,quality:0})}function postCelebGetVideo(a){function b(a){checkURL=a,document.getElementById("videoImage").src=a,closepopupplain1(),popupVideo()}function c(a){console.log("Failed because: "+a)}console.log("get vid"),navigator.camera.getPicture(b,c,{quality:50,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.VIDEO,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function uploadCelebVideo(){function f(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("videoDesc").value="",closePopup(),fetchMyCelebrityPost(),removeJunk()}function g(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}var a=encodeURI(server+"uploadCelebVideo.php?cId="+localStorage.getItem("CID")+"&desc="+document.getElementById("videoDesc").value),b=new FileUploadOptions;b.fileKey="file",b.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),b.mimeType="video/3gpp",b.httpMethod="POST";var c={};c.cId=localStorage.getItem("CID"),c.desc=document.getElementById("videoDesc").value,b.params=c,b.chunkedMode=!1;var d={headerParam:"headerValue"};b.headers=d;var e=new FileTransfer;e.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},e.upload(checkURL,a,f,g,b)}function postCelebTakeAudio(a){pendingAudio=!0;var b=function(a){var b,c,d;for(b=0,d=a.length;b<d;b+=1)c=a[b].fullPath,checkURL=c,document.getElementById("audioImage").src=checkURL,popupAudio()},c=function(a){alert("Sorry! Your phone dosen't support this functionality."),console.log("Error code: "+a,null,"Capture Error")};navigator.device.capture.captureAudio(b,c,{limit:1})}function postCelebGetAudio(a){function b(a){checkURL=a;var b=a.split(".")[1];"wav"==b||"amr"==b||"mp3"==b?(document.getElementById("audioImage").src=a,popupAudio()):alert("Audio File Format Not Supported."),closepopupplain2()}function c(a){console.log("Failed because: "+a)}navigator.camera.getPicture(b,c,{quality:100,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.ALLMEDIA,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function uploadCelebAudio(){function f(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("audioDesc").value="",closePopup(),fetchMyCelebrityPost(),removeJunk()}function g(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}pendingAudio=!1,console.log("in upload audio:"+checkURL);var a=encodeURI(server+"uploadCelebAudio.php"),b=new FileUploadOptions;b.fileKey="file",b.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),b.mimeType="audio/wav",b.httpMethod="POST";var c={};c.cId=localStorage.getItem("CID"),c.desc=document.getElementById("audioDesc").value,b.params=c,b.chunkedMode=!1;var d={headerParam:"headerValue"};b.headers=d;var e=new FileTransfer;e.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},e.upload(checkURL,a,f,g,b)}function postCelebTakePhoto(a){console.log("get pic"),localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","TAKE"),navigator.camera.getPicture(postCelebTakePhotoSuccess,postCelebTakePhotoFail,{quality:60,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA})}function postCelebTakePhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,checkURL=a,document.getElementById("photoImage").style.backgroundImage="url("+a+")",closepopupplain(),popupPhoto(),localStorage.setItem("PAGELOC","")}function postCelebTakePhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function postCelebGetPhoto(a){console.log("get pic"),localStorage.setItem("PAGELOC",pageLocation),appState.takingPicture=!0,localStorage.setItem("PAGERED","GET"),navigator.camera.getPicture(postCelebGetPhotoSuccess,postCelebGetPhotoFail,{quality:60,correctOrientation:!1,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY})}function postCelebGetPhotoSuccess(a){appState.takingPicture=!1,appState.imageUri=a,checkURL=a,document.getElementById("photoImage").style.backgroundImage="url("+a+")",closepopupplain(),popupPhoto(),localStorage.setItem("PAGELOC","")}function postCelebGetPhotoFail(a){appState.takingPicture=!1,console.log("Failed because: "+a)}function uploadCelebPhoto(){function f(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("photoDesc").value="",closePopup(),fetchMyCelebrityPost(),removeJunk()}function g(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}var a=encodeURI(server+"uploadCelebPhoto.php"),b=new FileUploadOptions;b.fileKey="file",b.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),b.mimeType="image/jpeg",b.httpMethod="POST";var c={};c.cId=localStorage.getItem("CID"),c.desc=document.getElementById("photoDesc").value,b.params=c,b.chunkedMode=!1;var d={headerParam:"headerValue"};b.headers=d;var e=new FileTransfer;e.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},e.upload(checkURL,a,f,g,b)}function postCelebGetFile(a){function b(a){checkURL=a;var b=!1,c=checkURL.substr(checkURL.lastIndexOf(".")+1),d=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var e in d)e==c&&(console.log("File: "+e),b=!0,document.getElementById("fileImage").style.backgroundImage="url(img/attach_icons/"+d[e]+")",popupFile());b||alert("Sorry, File Not Supported.")}function c(a){console.log("Failed because: "+a)}console.log("get file"),navigator.camera.getPicture(b,c,{quality:50,correctOrientation:!1,destinationType:navigator.camera.DestinationType.FILE_URI,mediaType:navigator.camera.MediaType.ALLMEDIA,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY})}function uploadCelebFile(){function k(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),console.log(a.response),document.getElementById("fileDesc").value="",closePopup(),fetchMyCelebrityPost()}function l(a){console.log("An error has occurred: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),console.log("Failure")}console.log("in upload celeb file:"+checkURL);var a=checkURL.substr(checkURL.lastIndexOf(".")+1);console.log("extenstion:"+a);var b=JSON.parse('{"pdf":"application/pdf" , "txt":"text/plain" , "doc":"application/msword" , "docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document" , "ppt":"application/vnd.ms-powerpointtd>" , "pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation" , "xls":"application/vnd.ms-excel" , "xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}'),c=!1,d="";for(var e in b)e==a&&(console.log("File: "+e),c=!0,d=b[e]);if(c){console.log(d);var f=encodeURI(server+"uploadCelebFile.php?proId="+localStorage.getItem("CID")+"&desc="+document.getElementById("fileDesc").value+"&ext="+a),g=new FileUploadOptions;g.fileKey="file",g.fileName=checkURL.substr(checkURL.lastIndexOf("/")+1),g.mimeType=d,g.httpMethod="POST";var h={};h.cId=localStorage.getItem("CID"),h.desc=document.getElementById("fileDesc").value,h.ext=a,g.params=h,g.chunkedMode=!1;var i={headerParam:"headerValue"};g.headers=i;var j=new FileTransfer;j.onprogress=function(a){if($(".myBar").css("width","0%"),a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);$(".myBar").css("width",b+"%")}else""===progressStatus.innerHTML?$(".myBar").css("width","0%"):$(".myBar").css("width","100%")},j.upload(checkURL,f,k,l,g)}else alert("File Not Supported.")}function populateEmoji(a){console.log(a),null==ESET[a]||""==ESET[a]?(document.getElementById("tabpage_"+a).innerHTML=localStorage.getItem("EMOJI"+a),ESET[a]="1",console.log(localStorage.getItem("EMOJI"+a))):console.log("ELSE POPULATE EMOJI")}function setInput(a){var b=a.getAttribute("data-emoji-name");console.log(emojione.shortnameToUnicode(b)),document.getElementById("chatMessage").value+=emojione.shortnameToUnicode(b);document.getElementById("sendDisable").style.display="none",document.getElementById("sendEnable").style.display="block"}function removeText(){console.log("IN");for(var a=document.getElementById("chatMessage").value,b=a.split(" "),c=0;c<b.length;c++)console.log(b[c]+":::"+b.length);var d=removeInvalidChars(b[b.length-1]);console.log(":::"+d+":::");var e=(d.match(/`/g)||[]).length;console.log(e),0!==e?(fin=a.replace(b[b.length-1],""),console.log(fin),document.getElementById("chatMessage").value=fin):document.getElementById("chatMessage").value=a.substring(0,a.length-1)}function removeInvalidChars(a){return a.replace(new RegExp(ranges.join("|"),"g"),"`")}function fetchGroupHomePost(){var a=localStorage.getItem("GRPID");document.getElementById("currentPage").innerHTML=document.getElementById("grp"+a).getAttribute("data-group-name"),$(".grpCol").html(""),document.getElementById("grpCol"+a).innerHTML='<i class="fa fa-dot-circle-o" aria-hidden="true"></i>',document.getElementById("buttonSwapText").setAttribute("onclick","uploadGroupText('home')"),document.getElementById("buttonSwapVideo").setAttribute("onclick","uploadGroupVideo('home')"),document.getElementById("buttonSwapAudio").setAttribute("onclick","uploadGroupAudio('home')"),document.getElementById("buttonSwapPhoto").setAttribute("onclick","uploadGroupPhoto('home')"),document.getElementById("buttonSwapFile").setAttribute("onclick","uploadGroupFile('home')"),document.getElementById("buttonSwapTakePhoto").setAttribute("onclick","postGroupTakePhoto()"),document.getElementById("buttonSwapGetPhoto").setAttribute("onclick","postGroupGetPhoto()"),document.getElementById("buttonSwapTakeVideo").setAttribute("onclick","postGroupTakevideo()"),document.getElementById("buttonSwapGetVideo").setAttribute("onclick","postGroupGetVideo()"),document.getElementById("buttonSwapTakeAudio").setAttribute("onclick","postGroupTakeAudio()"),document.getElementById("buttonSwapGetAudio").setAttribute("onclick","postGroupGetAudio()"),document.getElementById("buttonSwapGetFile").setAttribute("onclick","postGroupGetFile()"),currentPage=1;var b="",d="",e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status)if(console.log(e.responseText.trim()),!1!==e.responseText.trim()&&""!==e.responseText.trim()){d=JSON.parse(e.responseText.trim()),localStorage.setItem("LASTCREATEDGROUP",d[0].detail[0].at);for(var a=0;a<d[0].detail.length;a++)if("photo"==d[0].detail[a].type)b+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+d[0].detail[a].postedByName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(d[0].detail[a].URL)+'" /></div><div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==d[0].detail[a].type)b+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','0','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')">                <i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+" comments</div>            </div>";else if("video"==d[0].detail[a].type)b+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <video controls  preload="auto"  loop>                    <source src="'+server+d[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div></div>            </div>";else if("audio"==d[0].detail[a].type)b+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+d[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div></div>        </div>";else if("file"==d[0].detail[a].type){var c="",f=d[0].detail[a].URL,g=f.substr(f.lastIndexOf(".")+1),h=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var i in h)i==g&&(console.log("File is: "+i),c="img/attach_icons/"+h[i]);b+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+d[0].detail[a].postedByName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+c+'" /></div><div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div></div></div>"}else if("shared"==d[0].detail[a].type){var j="",k="",l=JSON.parse(d[0].detail[a].desc),m=d[0].detail[a].desc.replace(/"/g,"~");if(console.log("innerJson:"+m),"photo"==d[0].detail[a].format)k="images",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+server+getThumb(l.title)+'" />                            </div>                        </div>';else if("text"==d[0].detail[a].format)k="text",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+"                            </div>                                                 </div>";else if("video"==d[0].detail[a].format)k="videos",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+l.title+'" type="video/mp4">                </video>                            </div>                        </div>';else if("audio"==d[0].detail[a].format)k="audios",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+l.title+'" type="audio/wav">                </audio>                            </div>                        </div>';else if("file"==d[0].detail[a].format){k="files";var n="",o=l.title,p=o.substr(o.lastIndexOf(".")+1),q=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var r in q)r==p&&(console.log("File is: "+r),n="img/attach_icons/"+q[r]);j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+n+'" />                            </div>                        </div>'}b+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+d[0].detail[a].postedByName+'<span class="post-shared-user"> shared</span></p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+"</div></div>"+j+'<div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+m+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/"+k+'\')" ><i class="fa fa-download"></i> </div></div></div>'}document.getElementById("dataFeed").innerHTML=b,setTimeout(function(){myScroll.refresh()},1e3),$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3)}else console.log("Not Removed")},e.open("POST",server+"fetchGroupPost.php",!0);var f="grpId="+a;console.log(f),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}function toggleGroupHomeLoader(a){document.getElementById("loadMore").style.display="none",document.getElementById("proLoader").style.display="block",offsetGroupHome+=10,fetchGroupHomePostNext(offsetGroupHome)}function fetchGroupHomePostNext(a){var b=localStorage.getItem("GRPID"),c="",e="",f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)if(console.log(f.responseText.trim()),!1!==f.responseText.trim()&&""!==f.responseText.trim())if(e=JSON.parse(f.responseText.trim()),0!==e[0].length){for(var a=0;a<e[0].detail.length;a++)if("photo"==e[0].detail[a].type)c+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+e[0].detail[a].postedByName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(e[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(e[0].detail[a].URL)+'" /></div><div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==e[0].detail[a].type)c+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+e[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(e[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','0','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')">                <i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+" comments</div>            </div>";else if("video"==e[0].detail[a].type)c+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+e[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(e[0].detail[a].desc)+'            </div>            <div class="post-video">                <video controls  preload="auto"  loop>                    <source src="'+server+e[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div></div>            </div>";else if("audio"==e[0].detail[a].type)c+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+e[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(e[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+e[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div></div>        </div>";else if("file"==e[0].detail[a].type){var b="",d=e[0].detail[a].URL,g=d.substr(d.lastIndexOf(".")+1),h=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var i in h)i==g&&(console.log("File is: "+i),b="img/attach_icons/"+h[i]);c+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+e[0].detail[a].postedByName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(e[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+b+'" /></div><div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+e[0].detail[a].desc+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div></div></div>"}else if("shared"==e[0].detail[a].type){var j="",k="",l=JSON.parse(e[0].detail[a].desc),m=e[0].detail[a].desc.replace(/"/g,"~");if(console.log("innerJson:"+m),"photo"==e[0].detail[a].format)k="images",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+server+getThumb(l.title)+'" />                            </div>                        </div>';else if("text"==e[0].detail[a].format)k="text",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+"                            </div>                                                 </div>";else if("video"==e[0].detail[a].format)k="videos",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+l.title+'" type="video/mp4">                </video>                            </div>                        </div>';else if("audio"==e[0].detail[a].format)k="audios",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+l.title+'" type="audio/wav">                </audio>                            </div>                        </div>';else if("file"==e[0].detail[a].format){k="files";var n="",o=l.title,p=o.substr(o.lastIndexOf(".")+1),q=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var r in q)r==p&&(console.log("File is: "+r),n="img/attach_icons/"+q[r]);j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+n+'" />                            </div>                        </div>'}c+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+e[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(e[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+e[0].detail[a].postedByName+'<span class="post-shared-user"> shared</span></p></div><div class="col-25 post-time">'+formatAMPM(new Date(e[0].detail[a].at))+"</div></div>"+j+'<div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+e[0].detail[a].pId+"','"+e[0].detail[a].type+"','"+e[0].id+"','"+e[0].imageURL+"','"+e[0].name+"','"+e[0].detail[a].at+"','"+m+"','"+e[0].detail[a].URL+"','"+e[0].detail[a].commentCount+"','"+e[0].detail[a].postedBy+"','"+e[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+e[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+e[0].detail[a].URL+"','MSG/"+k+'\')" ><i class="fa fa-download"></i> </div></div></div>'}document.getElementById("dataFeed").innerHTML+=c,setTimeout(function(){myScroll.refresh()},1e3),$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3)}else console.log("no more group post"),myScroll.refresh();else console.log("ELSE")},f.open("POST",server+"fetchNextGroupPost.php",!0);var g="grpId="+b+"&offset="+a;console.log(g),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(g)}function fetchGroupHomePostPrevious(){var a=localStorage.getItem("GRPID"),b="",d="",e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status)if(console.log(e.responseText.trim()),!1!==e.responseText.trim()&&""!==e.responseText.trim())if(d=JSON.parse(e.responseText.trim()),0!==d[0].length){localStorage.setItem("LASTCREATEDGROUP",d[0].detail[0].at);for(var a=0;a<d[0].detail.length;a++)if("photo"==d[0].detail[a].type)b+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+d[0].detail[a].postedByName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+server+getThumb(d[0].detail[a].URL)+'" /></div><div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/images')\" ><i class=\"fa fa-download\"></i> </div></div></div>";else if("text"==d[0].detail[a].type)b+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-comment" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','0','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')">                <i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+" comments</div>            </div>";else if("video"==d[0].detail[a].type)b+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')">                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <video controls  preload="auto"  loop>                    <source src="'+server+d[0].detail[a].URL+'" type="video/mp4">                </video>            </div>           <div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/videos')\" ><i class=\"fa fa-download\"></i> </div></div>            </div>";else if("audio"==d[0].detail[a].type)b+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')" >                <div class="col-15 post-pro-pic col-center">                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')">                    </div>                </div>                <div class="col-60">                    <p>'+d[0].detail[a].postedByName+'</p>                </div>                <div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'                </div>            </div>            <div class="post-desc">'+emojione.unicodeToImage(d[0].detail[a].desc)+'            </div>            <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+d[0].detail[a].URL+'" type="audio/wav">                </audio>            </div>      <div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/audios')\" ><i class=\"fa fa-download\"></i> </div></div>        </div>";else if("file"==d[0].detail[a].type){var c="",f=d[0].detail[a].URL,g=f.substr(f.lastIndexOf(".")+1),h=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var i in h)i==g&&(console.log("File is: "+i),c="img/attach_icons/"+h[i]);b+='<div class="post-container" ><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+d[0].detail[a].postedByName+'</p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+'</div></div><div class="post-desc" >'+emojione.unicodeToImage(d[0].detail[a].desc)+'</div><div class="post-pic" ><img src="'+c+'" /></div><div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+d[0].detail[a].desc+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/files')\" ><i class=\"fa fa-download\"></i> </div></div></div>"}else if("shared"==d[0].detail[a].type){var j="",k="",l=JSON.parse(d[0].detail[a].desc),m=d[0].detail[a].desc.replace(/"/g,"~");if(console.log("innerJson:"+m),"photo"==d[0].detail[a].format)k="images",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+server+getThumb(l.title)+'" />                            </div>                        </div>';else if("text"==d[0].detail[a].format)k="text",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+"                            </div>                                                 </div>";else if("video"==d[0].detail[a].format)k="videos",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-video">                <video  controls  preload="auto"  loop>                    <source src="'+server+l.title+'" type="video/mp4">                </video>                            </div>                        </div>';else if("audio"==d[0].detail[a].format)k="audios",j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-video">                <audio controls preload="auto">                    <source src="'+server+l.title+'" type="audio/wav">                </audio>                            </div>                        </div>';else if("file"==d[0].detail[a].format){k="files";var n="",o=l.title,p=o.substr(o.lastIndexOf(".")+1),q=JSON.parse('{"pdf":"pdf.svg" , "txt":"txt.svg" , "doc":"doc.svg" , "docx":"doc.svg" , "ppt":"ppt.svg" , "pptx":"ppt.svg" , "xls":"xls.svg" , "xlsx":"xls.svg"}');for(var r in q)r==p&&(console.log("File is: "+r),n="img/attach_icons/"+q[r]);j='<div class="shared-post">                            <div class="row post-head">                                <div class="col-15 post-pro-pic col-center">                                    <div class="dash-chat-img" style="background-image:url('+server+getThumb(l.imageURL)+')"></div>                                </div>                                <div class="col-55" ><p>'+l.userName+'</p></div>                                <div class="col-30 post-time">'+formatAMPM(new Date(l.time))+'</div>                            </div>                                                        <div class="post-desc" >                               '+l.desc+'                            </div>                                                     <div class="post-pic">                              <img src="'+n+'" />                            </div>                        </div>'}b+='<div class="post-container"><div class="row post-head" onclick="setGeneratorId(\''+d[0].detail[a].postedBy+'\')"><div class="col-15 post-pro-pic col-center"><div class="dash-chat-img" style="background-image:url('+server+getThumb(d[0].detail[a].postedByImageURL)+')"></div></div><div class="col-60"><p>'+d[0].detail[a].postedByName+'<span class="post-shared-user"> shared</span></p></div><div class="col-25 post-time">'+formatAMPM(new Date(d[0].detail[a].at))+"</div></div>"+j+'<div class="row post-comment"><div class="col-50" onclick="setGroupPostId(\''+d[0].detail[a].pId+"','"+d[0].detail[a].type+"','"+d[0].id+"','"+d[0].imageURL+"','"+d[0].name+"','"+d[0].detail[a].at+"','"+m+"','"+d[0].detail[a].URL+"','"+d[0].detail[a].commentCount+"','"+d[0].detail[a].postedBy+"','"+d[0].detail[a].postedByName+'\')"><i class="fa fa-comment"></i> '+d[0].detail[a].commentCount+' comments </div><div class="col-50 text-right" onclick="download(\''+server+d[0].detail[a].URL+"','MSG/"+k+'\')" ><i class="fa fa-download"></i> </div></div></div>'}document.getElementById("dataFeed").innerHTML=b+document.getElementById("dataFeed").innerHTML,setTimeout(function(){myScroll.refresh()},1e3),$("img").on("error",function(){$(this).attr("src","img/pictures/notFound.png")}),setTimeout(function(){$("video,audio").on("click",function(){this.paused?this.play():this.pause(),"true"!==this.getAttribute("controls")&&this.setAttribute("controls","true"),this.setAttribute("controls","true")})},2e3)}else console.log("no more group posts"),myScroll.refresh();else console.log("ELSE")},e.open("POST",server+"fetchPrevGroupPost.php",!0);var f="grpId="+a+"&onset="+encodeURIComponent(localStorage.getItem("LASTCREATEDGROUP"));console.log(f),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(f)}function openHome(){document.getElementById("currentPage").innerHTML=document.getElementById("grpHome").getAttribute("data-group-name"),$(".grpCol").html(""),document.getElementById("grpColHome").innerHTML='<i class="fa fa-dot-circle-o" aria-hidden="true"></i>',document.getElementById("buttonSwapText").setAttribute("onclick","uploadText('')"),document.getElementById("buttonSwapVideo").setAttribute("onclick","uploadVideo('')"),document.getElementById("buttonSwapAudio").setAttribute("onclick","uploadAudio('')"),document.getElementById("buttonSwapPhoto").setAttribute("onclick","uploadPhoto('')"),document.getElementById("buttonSwapFile").setAttribute("onclick","uploadFile('')"),document.getElementById("buttonSwapTakePhoto").setAttribute("onclick","postTakePhoto()"),document.getElementById("buttonSwapGetPhoto").setAttribute("onclick","postGetPhoto()"),document.getElementById("buttonSwapTakeVideo").setAttribute("onclick","postTakevideo()"),document.getElementById("buttonSwapGetVideo").setAttribute("onclick","postGetVideo()"),document.getElementById("buttonSwapTakeAudio").setAttribute("onclick","postTakeAudio()"),document.getElementById("buttonSwapGetAudio").setAttribute("onclick","postGetAudio()"),document.getElementById("buttonSwapGetFile").setAttribute("onclick","postGetFile()"),currentPage=0,dataFeedRefreshPopulate()}function appSharing(){window.plugins.socialsharing.share("MSG,A Complete Social Networking Solution","A Complete Social Networking Solution","www/img/icon.png","https://play.google.com/store/apps/details?id=com.terasoltechnologies.msg")}function openFileInApp(a,b){function c(b){console.log("extension: "+b.extension+"\ncanBeOpen: "+b.canBeOpen),b.canBeOpen?window.cordova.plugins.FileOpener.openFile(a,d,e):alert("Phone Doesn't Have The Required Software.")}function d(a){console.log("message: "+a.message)}function e(a){console.log("message: "+a.message)}window.cordova.plugins.FileOpener.canOpenFile(a,c,e)}function getThumb(a){try{a=a.replace(/\/([^\/]*)$/,"/th_"+"$1")}catch(b){console.log("No Image"),a="uploads/notFound.png"}return a}function remThumb(a){return a=a.replace(/th_/g,"")}function fetchWallet(){preLoaderOn(),""!==localStorage.getItem("PROVIDERS")&&null!==localStorage.getItem("PROVIDERS")?getPoints():getProviders()}function getProviders(){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(console.log("GetPro:"+a.responseText.trim()),""!=a.responseText&&null!==a.responseText&&(localStorage.setItem("PROVIDERS",a.responseText),getPoints()),preLoaderOff())},a.open("POST",server+"fetchWallet.php",!0);var b="proId="+localStorage.getItem("PROID")+"&code=1";a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(b)}function getPoints(){var a="<option selected disabled>Operator</option>",b=JSON.parse(localStorage.getItem("PROVIDERS")).providers,c="",d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){if(console.log("GetPoi:"+d.responseText.trim()),""!=d.responseText&&null!==d.responseText){c=JSON.parse(d.responseText);for(var e=0;e<b.length;e++)b[e].provider_id==c.detail.provider_id?a+='<option value="'+b[e].provider_id+'" selected>'+b[e].provider_name+"</option>":a+='<option value="'+b[e].provider_id+'">'+b[e].provider_name+"</option>",document.getElementById("operatorList").innerHTML=a}preLoaderOff()}},d.open("POST",server+"fetchWallet.php",!0);var e="proId="+localStorage.getItem("PROID")+"&code=2";d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(e)}var appState={takingPicture:!0,imageUri:""},APP_STORAGE_KEY="exampleAppState",cameraExport={},pageLocation=window.location.pathname.split("/").reverse()[0],smsList=[],interceptEnabled=!1,server="http://www.mymsgapp.com/services/",checkBox=!1,interval="",proPicUpdated=!1,coverPicUpdated=!1,progressStatus="",cameraAppStatus=!0,fileURL="",checkURL="",checkURLC="",pendingAudio=!1,backpressCounter=0,notify=0,push="",pushwp="",timerIndex="",firstCall=!1,currentPage=0,megaLoad1=!1,megaLoad2=!1,megaLoad3=!1,megaLoad4=!1,megaLoad5=!1,megaLoad6=!1;$(document).ready(function(){if("index.html"==pageLocation){var a=[],b=[];b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,a[0]='<div class="row">',a[1]='<div class="row">',a[2]='<div class="row">',a[3]='<div class="row">',a[4]='<div class="row">',a[5]='<div class="row">',a[6]='<div class="row">',a[7]='<div class="row">',a[8]='<div class="row">',a[9]='<div class="row">';for(var c in emojiList)if(!(emojiList[c].unicode.indexOf("-")>-1&&-1==emojiList[c].unicode.indexOf("-1f1")))switch(emojiList[c].category){case emojiCategory[0]:a[0]+='<div class="col-10" onclick="setInput(this)" data-emoji-name="'+emojiList[c].shortname+'" ><a><img src="emoji/'+emojiList[c].unicode+'.svg" style="width: 75%;" /></a></div>',b[0]++,10==b[0]&&(b[0]=0,a[0]+='</div> <div class="row">');break;case emojiCategory[1]:b[1]++,a[1]+='<div class="col-10" onclick="setInput(this)" data-emoji-name="'+emojiList[c].shortname+'" ><a><img src="emoji/'+emojiList[c].unicode+'.svg" style="width: 75%;" /></a></div>',10==b[1]&&(b[1]=0,a[1]+='</div> <div class="row">');break;case emojiCategory[2]:a[2]+='<div class="col-10" onclick="setInput(this)" data-emoji-name="'+emojiList[c].shortname+'" ><a><img src="emoji/'+emojiList[c].unicode+'.svg" style="width: 75%;" /></a></div>',b[2]++,10==b[2]&&(b[2]=0,a[2]+='</div> <div class="row">');break;case emojiCategory[3]:a[3]+='<div class="col-10" onclick="setInput(this)" data-emoji-name="'+emojiList[c].shortname+'" ><a><img src="emoji/'+emojiList[c].unicode+'.svg" style="width: 75%;" /></a></div>',b[3]++,10==b[3]&&(b[3]=0,a[3]+='</div> <div class="row">');break;case emojiCategory[4]:a[4]+='<div class="col-10" onclick="setInput(this)" data-emoji-name="'+emojiList[c].shortname+'" ><a><img src="emoji/'+emojiList[c].unicode+'.svg" style="width: 75%;" /></a></div>',b[4]++,10==b[4]&&(b[4]=0,a[4]+='</div> <div class="row">');break;case emojiCategory[5]:a[5]+='<div class="col-10" onclick="setInput(this)" data-emoji-name="'+emojiList[c].shortname+'" ><a><img src="emoji/'+emojiList[c].unicode+'.svg" style="width: 75%;" /></a></div>',b[5]++,10==b[5]&&(b[5]=0,a[5]+='</div> <div class="row">');break;case emojiCategory[6]:a[6]+='<div class="col-10" onclick="setInput(this)" data-emoji-name="'+emojiList[c].shortname+'" ><a><img src="emoji/'+emojiList[c].unicode+'.svg" style="width: 75%;" /></a></div>',b[6]++,10==b[6]&&(b[6]=0,a[6]+='</div> <div class="row">');break;case emojiCategory[7]:a[7]+='<div class="col-10" onclick="setInput(this)" data-emoji-name="'+emojiList[c].shortname+'" ><a><img src="emoji/'+emojiList[c].unicode+'.svg" style="width: 75%;" /></a></div>',b[7]++,10==b[7]&&(b[7]=0,a[7]+='</div> <div class="row">');break;case emojiCategory[8]:a[8]+='<div class="col-10" onclick="setInput(this)" data-emoji-name="'+emojiList[c].shortname+'" ><a><img src="emoji/'+emojiList[c].unicode+'.svg" style="width: 75%;" /></a></div>',b[8]++,10==b[8]&&(b[8]=0,a[8]+='</div> <div class="row">');break;case emojiCategory[9]:a[9]+='<div class="col-10" onclick="setInput(this)" data-emoji-name="'+emojiList[c].shortname+'" ><a><img src="emoji/'+emojiList[c].unicode+'.svg" style="width: 75%;" /></a></div>',b[9]++,10==b[9]&&(b[9]=0,a[9]+='</div> <div class="row">')}localStorage.setItem("EMOJI1",a[0]+"</div>"),localStorage.setItem("EMOJI2",a[1]+"</div>"),localStorage.setItem("EMOJI3",a[2]+"</div>"),localStorage.setItem("EMOJI4",a[3]+"</div>"),localStorage.setItem("EMOJI5",a[4]+"</div>"),localStorage.setItem("EMOJI6",a[5]+"</div>"),localStorage.setItem("EMOJI7",a[6]+"</div>"),localStorage.setItem("EMOJI8",a[7]+"</div>"),localStorage.setItem("EMOJI9",a[8]+"</div>"),localStorage.setItem("EMOJI10",a[9]+"</div>"),megaLoad1=!0,console.log("1-megaUpload:"+megaLoad1)}if("profile.html"==pageLocation&&fetchProfile(),"user_profile_edit.html"==pageLocation&&extractProfile(),"friend_profile.html"==pageLocation&&fetchFriendProfile(),"singlechat.html"==pageLocation&&(fetchSingleChat(),setInterval(function(){fetchSingleChat()},1e3)),"chat.html"==pageLocation){if(null===localStorage.getItem("USERINFO")||""===localStorage.getItem("USERINFO"))fetchPreProfile();else{var e=JSON.parse(localStorage.getItem("USERINFO"));document.getElementById("profilePicture").style.backgroundImage="url("+server+getThumb(e[0].imageURL)+")",document.getElementById("profileQuote").innerHTML='"'+e[0].quote+'"'}1==localStorage.getItem("CELEBAPPLIED")?(document.getElementById("celebStatus").style.display="block",1==localStorage.getItem("CELEBSTATUS")?document.getElementById("celebStatus").setAttribute("onclick","location.href = 'celeb_posts.html'"):document.getElementById("celebStatus").setAttribute("onclick","location.href = 'celeb_pending.html'")):document.getElementById("celebStatus").style.display="none",fetchActiveChatList(),null===localStorage.getItem("COUNT")||""===localStorage.getItem("COUNT")?notificationCounter():document.getElementById("notificationCount").innerHTML=localStorage.getItem("COUNT"),notificationCounter(),setInterval(function(){notificationCounter(),messageCounter()},1e4)}if("comment_screen.html"==pageLocation&&(fetchComments(),setInterval(function(){fetchComments()},6e3)),"celebrity_comment_screen.html"==pageLocation&&(fetchCelebrityComments(),setInterval(function(){fetchCelebrityComments()},6e3)),"group_comment_screen.html"==pageLocation&&(fetchGroupComments(),setInterval(function(){fetchGroupComments()},6e3)),"addgroup.html"==pageLocation&&populateContacts(),"groups.html"==pageLocation&&(null===localStorage.getItem("USERINFO")&&""===localStorage.getItem("USERINFO")&&fetchPreProfile(),fetchActiveGroupList()),"groupchat.html"==pageLocation&&(fetchGroupChat(),setInterval(function(){fetchGroupChat()},2e3)),"group_info.html"==pageLocation&&fetchGroupInfo(),"groupedit.html"==pageLocation&&extractGroupInfo(),"social.html"==pageLocation){if(null===localStorage.getItem("USERINFO")||""===localStorage.getItem("USERINFO"))fetchPreProfile();else{var f=JSON.parse(localStorage.getItem("USERINFO"));document.getElementById("profilePicture").style.backgroundImage="url("+server+getThumb(f[0].imageURL)+")",document.getElementById("profileQuote").innerHTML='"'+f[0].quote+'"'}null===localStorage.getItem("CID")||""===localStorage.getItem("CID")?checkCelebrityStatus():fetchCelebrityList(),null===localStorage.getItem("COUNT")||""===localStorage.getItem("COUNT")?notificationCounter():document.getElementById("notificationCount").innerHTML=localStorage.getItem("COUNT"),notificationCounter(),setInterval(function(){notificationCounter()},1e4)}"celeb_profile.html"==pageLocation&&fetchCelebrityDetail(),"celeb_posts.html"==pageLocation&&(null===localStorage.getItem("CID")||""===localStorage.getItem("CID")||fetchMyCelebrityPost()),"my_celeb_profile.html"==pageLocation&&fetchMyCelebrityProfile(),"edit_celeb_profile.html"==pageLocation&&(proPicUpdated=!1,coverPicUpdated=!1,extractMyCelebrityProfile()),"group_posts.html"==pageLocation&&fetchGroupPost(),"notifications.html"==pageLocation&&fetchNotification(),"wallet.html"==pageLocation&&fetchWallet()});var app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1),document.addEventListener("pause",this.onPause,!1),document.addEventListener("resume",this.onResume,!1),document.addEventListener("backbutton",this.backkeypress,!1)},onDeviceReady:function(){if(checkConnection(0),"index.html"==pageLocation&&(null===localStorage.getItem("PROID")||""===localStorage.getItem("PROID")?(console.log("PROID NOT SET"),megaLoad2=!0,megaLoad3=!0,megaLoad4=!0,megaLoad5=!0,megaLoad6=!0,console.log("YYY"),window.location="login.html"):(console.log("PROID SET"),contactFetch(),fetchGroupList(),fetchPreProfile(),timerIndex=setTimeout(function(){console.log("XXX"),"PROFILE"==window.localStorage.getItem("VALIDATED")?window.location="user_profile.html":"HOME"==window.localStorage.getItem("VALIDATED")?window.location="home.html":window.location="login.html"},4e3)),checkConnection(0)),"otp.html"==pageLocation&&initApp(),"login.html"==pageLocation&&navigator.globalization.getPreferredLanguage(successCallback,errorCallback),"home.html"==pageLocation){if(""!==localStorage.getItem("NOTIFICATIONID")&&null!==localStorage.getItem("NOTIFICATIONID")||("android"==device.platform||"Android"==device.platform||"ios"==device.platform?(push=PushNotification.init({android:{senderID:"440801567822",sound:"true",vibration:"true",icon:"icon"},GCM:{title:"Large Icon",message:"Loaded from drawables folder",image:"icon"},browser:{pushServiceURL:"http://push.api.phonegap.com/v1/push"},ios:{alert:"true",badge:"true",sound:"true"},windows:{}}),main()):"Win32NT"==device.platform&&(pushwp=window.plugins.pushNotification,mainwp())),null===localStorage.getItem("DATAFEED")||""===localStorage.getItem("DATAFEED")?(firstCall=!0,dataFeedRefresh()):""===localStorage.getItem("LATESTFOLLOWCELEB")||null===localStorage.getItem("LATESTFOLLOWCELEB")?dataFeedRefreshPopulate():(firstCall=!0,dataFeedRefresh(),localStorage.setItem("LATESTFOLLOWCELEB","")),null===localStorage.getItem("HOMEGROUPLIST")||""===localStorage.getItem("HOMEGROUPLIST")?fetchGroupList():(setTimeout(function(){fetchGroupList("R")},5e3),fetchGroupListPopulate()),null!==localStorage.getItem("CONTACTS")&&""!==localStorage.getItem("CONTACTS")||contactFetch(),null==localStorage.getItem("USERINFO")||""==localStorage.getItem("USERINFO"))fetchPreProfile();else{var a=JSON.parse(localStorage.getItem("USERINFO"));document.getElementById("profilePicture").style.backgroundImage="url("+server+getThumb(a[0].imageURL)+")",document.getElementById("profileQuote").innerHTML='"'+a[0].quote+'"'}1==localStorage.getItem("CELEBAPPLIED")?(document.getElementById("celebStatus").style.display="block",1==localStorage.getItem("CELEBSTATUS")?document.getElementById("celebStatus").setAttribute("onclick","location.href = 'celeb_posts.html'"):document.getElementById("celebStatus").setAttribute("onclick","location.href = 'celeb_pending.html'")):document.getElementById("celebStatus").style.display="none",null===localStorage.getItem("COUNT")||""===localStorage.getItem("COUNT")?notificationCounter():document.getElementById("notificationCount").innerHTML=localStorage.getItem("COUNT"),notificationCounter(),setInterval(function(){notificationCounter()},1e4)}"contacts.html"==pageLocation&&(null===localStorage.getItem("CONTACTS")||""===localStorage.getItem("CONTACTS")?contactFetch("CON"):(fetchContacts(),fetchContactRelation())),"user_profile.html"==localStorage.getItem("PAGELOC")&&("TAKE"==localStorage.getItem("PAGERED")?takePhotoSuccess(localStorage.getItem("PAGEINTAKE")):"GET"==localStorage.getItem("PAGERED")&&getPhotoSuccess(localStorage.getItem("PAGEINTAKE")),localStorage.setItem("PAGELOC","")),"home.html"==localStorage.getItem("PAGELOC")&&("TAKE"==localStorage.getItem("PAGERED")?postTakePhotoSuccess(localStorage.getItem("PAGEINTAKE")):"GET"==localStorage.getItem("PAGERED")&&postGetPhotoSuccess(localStorage.getItem("PAGEINTAKE")),localStorage.setItem("PAGELOC","")),"singlechat.html"==localStorage.getItem("PAGELOC")&&("TAKE"==localStorage.getItem("PAGERED")?chatTakePhotoSuccess(localStorage.getItem("PAGEINTAKE")):"GET"==localStorage.getItem("PAGERED")&&chatGetPhotoSuccess(localStorage.getItem("PAGEINTAKE")),localStorage.setItem("PAGELOC","")),"addgroup.html"==localStorage.getItem("PAGELOC")&&("TAKE"==localStorage.getItem("PAGERED")?takeGroupDisplayPhotoSuccess(localStorage.getItem("PAGEINTAKE")):"GET"==localStorage.getItem("PAGERED")&&getGroupDisplayPhotoSuccess(localStorage.getItem("PAGEINTAKE")),localStorage.setItem("PAGELOC","")),"create_celeb_profile.html"==localStorage.getItem("PAGELOC")&&("COVER"==localStorage.getItem("CELEBPICTYPE")&&("TAKE"==localStorage.getItem("PAGERED")?takePictureCSuccess(localStorage.getItem("PAGEINTAKE")):"GET"==localStorage.getItem("PAGERED")&&getPictureCSuccess(localStorage.getItem("PAGEINTAKE"))),"DP"==localStorage.getItem("CELEBPICTYPE")&&("TAKE"==localStorage.getItem("PAGERED")?takePictureSuccess(localStorage.getItem("PAGEINTAKE")):"GET"==localStorage.getItem("PAGERED")&&getPictureSuccess(localStorage.getItem("PAGEINTAKE"))),localStorage.setItem("PAGELOC","")),"celeb_posts.html"==localStorage.getItem("PAGELOC")&&("TAKE"==localStorage.getItem("PAGERED")?postCelebTakePhotoSuccess(localStorage.getItem("PAGEINTAKE")):"GET"==localStorage.getItem("PAGERED")&&postCelebGetPhotoSuccess(localStorage.getItem("PAGEINTAKE")),localStorage.setItem("PAGELOC","")),"group_posts.html"==localStorage.getItem("PAGELOC")&&("TAKE"==localStorage.getItem("PAGERED")?postGroupTakePhotoSuccess(localStorage.getItem("PAGEINTAKE")):"GET"==localStorage.getItem("PAGERED")&&postGroupGetPhotoSuccess(localStorage.getItem("PAGEINTAKE")),localStorage.setItem("PAGELOC","")),app.receivedEvent("deviceready")},onPause:function(){makeOffline(),console.log("PAUSED"),(appState.takingPicture||appState.imageUri)&&window.localStorage.setItem(APP_STORAGE_KEY,JSON.stringify(appState))},onResume:function(a){makeOnline(),console.log("RESUME");var b=window.localStorage.getItem(APP_STORAGE_KEY);b&&(appState=JSON.parse(b)),!appState.takingPicture&&appState.imageUri?console.log("PRE:"+appState.imageUri):appState.takingPicture&&a.pendingResult&&("OK"===a.pendingResult.pluginStatus?(localStorage.setItem("PAGEINTAKE",a.pendingResult.result),location.href=localStorage.getItem("PAGELOC")):console.log(a.pendingResult.result))},receivedEvent:function(a){console.log("Received Event: "+a)},backkeypress:function(){"login.html"==pageLocation||"otp.html"==pageLocation?navigator.app.exitApp():"home.html"==pageLocation?(console.log("PA:"+pendingAudio),pendingAudio?2==++backpressCounter&&closePopup():$(".cd-popup").hasClass("is-visible")?closePopup():(makeOffline(),navigator.app.exitApp())):"singlechat.html"==pageLocation?(console.log("PA:"+pendingAudio),pendingAudio?2==++backpressCounter&&closeChatPopup():$(".send-attach-outer").hasClass("send-attach-outer-visible")?closeChatPopup():window.history.back()):"groupchat.html"==pageLocation?$(".send-attach-outer").hasClass("send-attach-outer-visible")?closeChatPopup():window.history.back():"celeb_posts.html"==pageLocation?(console.log("PA:"+pendingAudio),pendingAudio?2==++backpressCounter&&closePopup():$(".cd-popup").hasClass("is-visible")?closePopup():(makeOffline(),navigator.app.exitApp())):"group_posts.html"==pageLocation?(console.log("PA:"+pendingAudio),pendingAudio?2==++backpressCounter&&closePopup():$(".cd-popup").hasClass("is-visible")?closePopup():(makeOffline(),navigator.app.exitApp())):"user_profile.html"==pageLocation?alert("Processing underway..."):window.history.back()}};app.initialize();var monArr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Date.prototype.yyyymmdd=function(){var a=this.getMonth()+1,b=this.getDate();return[this.getFullYear(),(a>9?"":"0")+a,(b>9?"":"0")+b].join("")};var date=new Date,connErr='<div class="celebrity-loader internet-connection-loader" id="connErr">        <div class="celebrity-loader-inner">            <img src="img/alerts/internet_down.jpg" />            <p>Whoops</p>            <p class="internet-connect-details">No Internet connection found.</p>            <img class="internet-retry push-m" src="img/icons/retry.svg"  onclick="checkConnection(1)" />            <p class="internet-connect-details">Retry</p>        </div>    </div>',offsetNotify=0,store="",assetURL="",fileName="",folderName="",ext="",videos=document.getElementsByTagName("video"),fraction=.8,offsetHome=0,mutualExclusive1=!1,offsetProfile=0,offsetFriendProfile=0,chatListData="",pressTimer,mutualExclusive=!1,helperOnce=!0,prevId="",nextId="",nextOffset=0,pressThreadTimer,multiImageURL=[],lat=0,lon=0,marker="",displayImageSet=!1,groupListData="",prevGrpId="",nextGrpId="",helpOnceGrp=!0,groupMutualExclusive=!1,grpNameTransfer="",offsetGroupPost=0,mutualExclusive3=!1,socialSearchData="",offset=0,mutualExclusive2=!1,offsetMyCelebPost=0;window.onerror=function(a,b,c){return console.log("Error message: "+a+"\nURL: "+b+"\nLine Number: "+c),!0};var ESET=[];ESET[0]="";var ranges=["[-]","[-]","[-]"],offsetGroupHome=0;